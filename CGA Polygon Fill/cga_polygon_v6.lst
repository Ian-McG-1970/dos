     1                                  ; nasm cga_line_v7.asm -o cgaline.com -f bin
     2                                  
     3                                  
     4                                  ; list of next line tables - even values = +8192 odd values = -8192 - put into 2 registers - swap registers after each next line
     5                                  
     6                                  VIDEO_SEGMENT	equ	0b800h 	; display memory segment for true CGA graphics modes
     7                                  SW				equ 80 		; screen width
     8                                  SE				equ	0		; screen even start
     9                                  SO				equ	8192	; screen odd start
    10                                  
    11                                  
    12                                  INPUT_STATUS_1	equ	03dah	; VGA status register
    13                                  VSYNC_MASK	equ	08h	; vertical sync bit in status register 1
    14                                  DE_MASK		equ	01h	; display enable bit in status register 1
    15                                  
    16                                  MAP_MASK	equ	2		; SC map mask register
    17                                  SC_INDEX		equ	3c4h	; SC index register
    18                                   
    19                                  TOP_CC		equ	1
    20                                  BOTTOM_CC	equ	2
    21                                  LEFT_CC		equ	4
    22                                  RIGHT_CC	equ	8
    23                                  BEHIND_CC	equ	16
    24                                  BACK_CC		equ 16
    25                                  FRONT_CC 	equ 32
    26                                  
    27                                  MIDDLE_X		equ	160
    28                                  MIDDLE_Y		equ	100
    29                                  TOP_EDGE	equ	MIDDLE_Y-100
    30                                  BOTTOM_EDGE	equ	MIDDLE_Y+99
    31                                  LEFT_EDGE	equ	MIDDLE_X-160
    32                                  RIGHT_EDGE	equ	MIDDLE_X+159
    33                                  
    34                                  KEY_1	EQU	0231h
    35                                  KEY_2	EQU	0332h
    36                                  KEY_3	EQU	0433h
    37                                  KEY_4 	EQU	0534h
    38                                  KEY_5 	EQU	0635h
    39                                  KEY_6 	EQU	0736h
    40                                  KEY_ESC	EQU 27
    41                                  
    42                                  CPU 386
    43                                  bits 16
    44                                  org 100h
    45                                  
    46                                  %macro left_edge 0 
    47                                  	shl		bx,2			; start hor *4
    48                                  	mov		ecx,[es:di]
    49                                  	or		ecx,[FillLeftTab32+bx] 
    50                                  	mov		[es:di],ecx
    51                                  %endmacro	
    52                                  
    53                                  %macro right_edge 0 
    54                                  	shl		bp,2			; start hor *4
    55                                  	mov		ecx,[es:di]
    56                                  	or		ecx,[FillRightTab32+bp] 
    57                                  	mov		[es:di],ecx
    58                                  %endmacro
    59                                  
    60                                  ;%macro fill_cont	0
    61                                  ;	mov		cx,bx
    62                                  ;	pop 	bp
    63                                  
    64                                  ;	add		bp,8
    65                                  ;	add		si,360/4
    66                                  ;	dec		cl
    67                                  ;	jnz		Fill.fillloop
    68                                  ;%endmacro
    69                                  
    70                                  section .text
    71                                  
    72                                  start:
    73 00000000 E8AF01                  	call	BuildScreenTable
    74 00000003 B80400                  	mov	ax,04h 	; CGA 320 x 200 4 colors
    75 00000006 CD10                    	int		10h
    76                                  
    77                                  ;	mov	ax,0Bh 	; Pallette
    78                                  ;	mov	bh,1
    79                                  ;	mov	bl,0
    80                                  ;	mov	bx,00000h ; pallette 0 high
    81                                  ;	int	10h 
    82                                  	
    83 00000008 B44A                    	mov	ah, 4ah
    84 0000000A BB0010                  	mov	bx, 1000h
    85 0000000D CD21                    	int	21h
    86 0000000F B448                    	mov	ah, 48h
    87 00000011 BB0010                  	mov	bx, 1000h
    88 00000014 CD21                    	int	21h
    89 00000016 A3[5194]                	mov	[BackBufferSeg], ax
    90                                  
    91 00000019 31C0                    	xor ax,ax
    92 0000001B A2[3094]                	mov	[Exit],al
    93 0000001E A3[2A94]                	mov	[XAngle],ax
    94 00000021 A3[2C94]                	mov	[YAngle],ax		
    95 00000024 A3[2E94]                	mov	[ZAngle],ax
    96                                  	
    97                                  ;	mov	[Test0],ax
    98                                  	
    99                                  MainLoop:
   100 00000027 E8F703                  		call	WaitVSync ; Wait for vertical sync so the new start address has a chance to take effect.
   101 0000002A E80204                  		call	CopyClearBackBuffer ; copy back to front
   102                                  	
   103 0000002D 8B1E[5194]              		mov		bx,[BackBufferSeg]
   104 00000031 8EC3                    		mov		es,bx
   105                                  
   106 00000033 B300                    		mov		bl,0
   107 00000035 A1[A81C]                		mov		ax,[XOffset]
   108                                  ;		call	Hex16
   109 00000038 B301                    		mov		bl,1
   110 0000003A A1[AA1C]                		mov		ax,[YOffset]
   111                                  ;		call	Hex16
   112 0000003D B302                    		mov		bl,2
   113 0000003F A1[AC1C]                		mov		ax,[ZOffset]
   114                                  ;		call	Hex16
   115                                  
   116 00000042 B304                    		mov		bl,4
   117 00000044 A1[2A94]                		mov		ax,[XAngle]
   118                                  ;		call	Hex16
   119 00000047 B305                    		mov		bl,5
   120 00000049 A1[2C94]                		mov		ax,[YAngle]
   121                                  ;		call	Hex16
   122 0000004C B306                    		mov		bl,6
   123 0000004E A1[2E94]                		mov		ax,[ZAngle]
   124                                  ;		call	Hex16
   125                                  
   126 00000051 B308                    	mov		bl,8
   127 00000053 A1[AE1E]                	mov		ax,[testx]
   128 00000056 E8560F                  	call	Hex16
   129 00000059 B309                    	mov		bl,9
   130 0000005B A1[B01E]                	mov		ax,[testy]
   131 0000005E E84E0F                  	call	Hex16
   132 00000061 B30A                    	mov		bl,10
   133 00000063 A1[B21E]                	mov		ax,[testz]
   134 00000066 E8460F                  	call	Hex16
   135                                  
   136 00000069 8B1E[B21E]              	mov		bx,[testz]
   137 0000006D 8B16[AE1E]              	mov		dx,[testx]
   138 00000071 8B0E[B01E]              	mov		cx,[testy]
   139 00000075 E89811                  	call	PerspectiveZW
   140                                  
   141 00000078 30FF                    	xor		bh,bh
   142 0000007A 53                      	push	bx
   143 0000007B B30C                    	mov		bl,12
   144                                  ;	call	Hex16
   145                                  	
   146 0000007D 58                      	pop		ax
   147 0000007E B30D                    	mov		bl,13
   148                                  ;	call	Hex8
   149                                  
   150 00000080 8B1E[B21E]              	mov		bx,[testz]
   151 00000084 8B16[AE1E]              	mov		dx,[testx]
   152 00000088 8B0E[B01E]              	mov		cx,[testy]
   153 0000008C E88111                  	call	PerspectiveZW
   154 0000008F 89CD                    	mov		bp,cx
   155 00000091 E84D04                  	call	Plot11
   156                                  
   157 00000094 BBFE01                  	mov		bx,510
   158 00000097 BAFE01                  	mov		dx,510
   159 0000009A B90100                  	mov		cx,1
   160 0000009D E87011                  	call	PerspectiveZW
   161 000000A0 89CD                    	mov		bp,cx
   162 000000A2 E83C04                  	call	Plot11
   163                                  
   164 000000A5 BBFE01                  	mov		bx,510
   165 000000A8 BA0100                  	mov		dx,1
   166 000000AB B90100                  	mov		cx,1
   167 000000AE E85F11                  	call	PerspectiveZW
   168 000000B1 89CD                    	mov		bp,cx
   169 000000B3 E82B04                  	call	Plot11
   170                                  
   171 000000B6 BBFE01                  	mov		bx,510
   172 000000B9 BAFE01                  	mov		dx,510
   173 000000BC B9FE01                  	mov		cx,510
   174 000000BF E84E11                  	call	PerspectiveZW
   175 000000C2 89CD                    	mov		bp,cx
   176 000000C4 E81A04                  	call	Plot11
   177                                  
   178 000000C7 BBFE01                  	mov		bx,510
   179 000000CA BA0100                  	mov		dx,1
   180 000000CD B9FE01                  	mov		cx,510
   181 000000D0 E83D11                  	call	PerspectiveZW
   182 000000D3 89CD                    	mov		bp,cx
   183 000000D5 E80904                  	call	Plot11
   184                                  
   185 000000D8 BB0100                  	mov		bx,1
   186 000000DB BAFE01                  	mov		dx,510
   187 000000DE B90100                  	mov		cx,1
   188 000000E1 E82C11                  	call	PerspectiveZW
   189 000000E4 89CD                    	mov		bp,cx
   190 000000E6 E8F803                  	call	Plot11
   191                                  
   192 000000E9 BB0100                  	mov		bx,1
   193 000000EC BA0100                  	mov		dx,1
   194 000000EF B90100                  	mov		cx,1
   195 000000F2 E81B11                  	call	PerspectiveZW
   196 000000F5 89CD                    	mov		bp,cx
   197 000000F7 E8E703                  	call	Plot11
   198                                  
   199 000000FA BB0100                  	mov		bx,1
   200 000000FD BAFE01                  	mov		dx,510
   201 00000100 B9FE01                  	mov		cx,510
   202 00000103 E80A11                  	call	PerspectiveZW
   203 00000106 89CD                    	mov		bp,cx
   204 00000108 E8D603                  	call	Plot11
   205                                  
   206 0000010B BB0100                  	mov		bx,1
   207 0000010E BA0100                  	mov		dx,1
   208 00000111 B9FE01                  	mov		cx,510
   209 00000114 E8F910                  	call	PerspectiveZW
   210 00000117 89CD                    	mov		bp,cx
   211 00000119 E8C503                  	call	Plot11
   212                                  
   213 0000011C A1[2A94]                		mov	ax,[XAngle]
   214 0000011F 83C001                  		add	ax,1
   215 00000122 25FF03                  		and ax,03ffh
   216 00000125 A3[2A94]                		mov	[XAngle],ax
   217 00000128 A1[2C94]                		mov	ax,[YAngle]
   218 0000012B 83E801                  		sub	ax,1
   219 0000012E 25FF03                  		and ax,03ffh
   220 00000131 A3[2C94]                		mov	[YAngle],ax
   221 00000134 A1[2E94]                		mov	ax,[ZAngle]
   222 00000137 83C001                  		add	ax,1
   223 0000013A 25FF03                  		and ax,03ffh
   224 0000013D A3[2E94]                		mov	[ZAngle],ax
   225                                  ;		call	BuildRotateMatrix
   226                                  
   227                                  ;		mov word	[XOffset],0
   228                                  ;		mov word	[YOffset],0
   229                                  ;		mov word	[ZOffset],250
   230 00000140 BE[FC1B]                		mov	si,ObjectPoints00 ; points
   231 00000143 BF[8C1C]                		mov	di,ObjectLines00 ; lines
   232 00000146 B108                    		mov	cl,8 ; 8 		; points
   233 00000148 B50C                    		mov	ch,12 ; 12	; lines
   234                                  ;		call 		DrawObject
   235                                  
   236                                  ;		mov word	[XOffset],200
   237                                  ;		mov word	[YOffset],200
   238                                  ;		mov word	[ZOffset],200
   239 0000014A BE[FC1B]                		mov	si,ObjectPoints00 ; points
   240 0000014D BF[8C1C]                		mov	di,ObjectLines00 ; lines
   241 00000150 B108                    		mov	cl,8 ; 8 		; points
   242 00000152 B50C                    		mov	ch,12 ; 12	; lines
   243 00000154 E87B0E                  		call 		DrawObjectZW
   244                                  
   245                                  
   246 00000157 B90300                  	mov	cx,3
   247 0000015A E82603                  	call	Move
   248                                  	
   249 0000015D B90300                  	mov	cx,3
   250 00000160 E80A03                  	call	Plots
   251                                  
   252 00000163 B099                    	mov	al,10011001b ;20 ; 100
   253 00000165 B90300                  	mov	cx,3
   254 00000168 E8BC03                  	call	Fill
   255                                  
   256                                  
   257                                  
   258 0000016B B316                    		mov		bl,22
   259 0000016D A1[3D94]                		mov		ax,[Test0]
   260 00000170 E83C0E                  		call	Hex16
   261 00000173 B317                    		mov		bl,23
   262 00000175 A1[3F94]                		mov		ax,[Test1]
   263 00000178 E8340E                  		call	Hex16
   264 0000017B B318                    		mov		bl,24
   265 0000017D A1[4194]                		mov		ax,[Test2]
   266 00000180 E82C0E                  		call	Hex16
   267 00000183 B319                    		mov		bl,25
   268 00000185 A1[4394]                		mov		ax,[Test3]
   269 00000188 E8240E                  		call	Hex16
   270 0000018B B31A                    		mov		bl,26
   271 0000018D A1[4594]                		mov		ax,[Test4]
   272 00000190 E81C0E                  		call	Hex16
   273                                  ;		mov		bl,27
   274                                  ;		mov		ax,[Test5]
   275                                  ;		call	Hex16
   276                                  ;		mov		bl,28
   277                                  ;		mov		ax,[Test6]
   278                                  ;		call	Hex16
   279                                  ;		mov		bl,29
   280                                  ;		mov		ax,[Test7]
   281                                  ;		call	Hex16
   282                                  ;		mov		bl,30
   283                                  ;		mov		ax,[Test8]
   284                                  ;		call	Hex16
   285                                  ;		mov		bl,31
   286                                  ;		mov		ax,[Test9]
   287                                  ;		call	Hex16
   288                                  
   289 00000193 B314                    		mov		bl,20
   290 00000195 B85020                  		mov		ax,8192+80
   291                                  ;		call	Hex16
   292 00000198 B315                    		mov		bl,21
   293 0000019A B850E0                  		mov		ax,-8192+80
   294                                  ;		call	Hex16
   295                                  	
   296                                  		
   297                                  ;		call	Test
   298                                  		
   299 0000019D E8D601                  		call	GetKey
   300                                  		
   301 000001A0 A0[3094]                	mov		al,[Exit]
   302 000001A3 08C0                    	or		al,al
   303 000001A5 0F847EFE                	je		MainLoop
   304                                  
   305 000001A9 B80300                  Done:	mov		ax,3	; reset to text mode
   306 000001AC CD10                    		int		10h
   307 000001AE B44C                    		mov		ah,4ch	; exit to DOS
   308 000001B0 CD21                    		int		21h
   309                                  
   310 000001B2 8D3E[0000]              BuildScreenTable:	lea		di,[BackBufferTable]
   311 000001B6 31ED                    					xor		bp,bp	; even lines
   312 000001B8 B96400                  					mov		cx,100
   313 000001BB 892D                    .loop:					mov		[di],bp
   314 000001BD 81C50020                						add		bp,8192
   315 000001C1 896D02                  						mov		[di+2],bp
   316 000001C4 81EDB01F                						sub		bp,8192-80
   317 000001C8 83C704                  						add		di,4
   318 000001CB E2EE                    						loop	.loop
   319 000001CD C3                      					ret
   320                                  
   321 000001CE 39F2                    Line11:		cmp		dx,si 	; vs le ve?
   322 000001D0 7306                    			jnc		.noswap	; yes
   323 000001D2 87F2                    				xchg	si,dx	; swap vs,ve
   324 000001D4 87E9                    				xchg	bp,cx	; swap hs,he
   325 000001D6 EB06                    				jmp	.vdiff
   326                                  
   327 000001D8 7504                    .noswap:	jne		.vdiff			; v not same
   328 000001DA 39E9                    			cmp		cx,bp		; v is same 
   329 000001DC 7436                    			je 		.quit		; h is same
   330                                  
   331 000001DE 29F2                    .vdiff:		sub		dx,si	; ver diff = ve-vs
   332 000001E0 29E9                    			sub		cx,bp	; hs le he? - replace with sub below? todo
   333 000001E2 7360                    			jnc		.hforward	; yes
   334                                  
   335 000001E4 F7D9                    .hbackward:	neg 	cx	 		; decrement line across everytime and line down every few times
   336 000001E6 39D1                     			cmp		cx,dx
   337 000001E8 7501                    			jne		.hbnodiag ; .quit ; .vbackward ; .quit ;	.vbackward
   338 000001EA 41                      					inc		cx	; diagonal
   339 000001EB 7228                    .hbnodiag:	jc		.vbackward
   340                                  
   341 000001ED F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   342 000001EF 01F6                    			add		si,si	; start ver *2
   343 000001F1 01ED                    			add		bp,bp	; start hor *2
   344 000001F3 81C6[0000]              			add		si,BackBufferTable
   345 000001F7 3E8B3C                  			mov		di,[ds:si]	; lookup start ver		
   346                                  	
   347 000001FA 00E0                    .hbloop:		add 	al,ah	; fraction to current
   348 000001FC 7306                    				jnc		.hbplot	;
   349 000001FE 83C602                  					add		si,2
   350 00000201 3E8B3C                  					mov		di,[ds:si]	; lookup start ver
   351                                  
   352 00000204 8B9E[000A]              .hbplot:		mov		bx,[HorPosTable+bp]
   353 00000208 8AB6[0000]              				mov		dh,[OrTable+bp]
   354 0000020C 260831                  				or byte [es:di+bx],dh
   355                                  
   356 0000020F 83ED02                  				sub		bp,2		; next hor
   357 00000212 E2E6                    				loop	.hbloop		; dec cx jnz
   358 00000214 C3                      .quit:		ret
   359                                  
   360 00000215 87D1                    .vbackward: xchg 	dx,cx			; decrement line down everytime and line across every few times
   361 00000217 F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   362                                  
   363 00000219 01F6                    			add		si,si	; start ver *2
   364 0000021B 01ED                    			add		bp,bp	; start hor *2
   365 0000021D 81C6[0000]              			add		si,BackBufferTable
   366                                  	
   367 00000221 8AB6[0000]              			mov		dh,[OrTable+bp]
   368 00000225 8B9E[000A]              			mov		bx,[HorPosTable+bp]
   369                                  	
   370 00000229 00E0                    .vbloop:		add 	al,ah	; fraction to current
   371 0000022B 730B                    				jnc		.vbplot	;
   372 0000022D 83ED02                  					sub		bp,2
   373 00000230 8AB6[0000]              					mov		dh,[OrTable+bp]
   374 00000234 8B9E[000A]              					mov		bx,[HorPosTable+bp]
   375                                  		
   376 00000238 3E8B3C                  .vbplot:		mov		di,[ds:si]	; lookup start ver
   377 0000023B 260831                  				or byte [es:di+bx],dh
   378                                  
   379 0000023E 83C602                  				add		si,2		; next ver
   380 00000241 E2E6                    				loop	.vbloop		; dec cl jnz
   381 00000243 C3                      			ret
   382                                  
   383 00000244 39D1                    .hforward: 	cmp		cx,dx			; increment line across everytime and line down every few times
   384 00000246 7501                    			jne		.hfnodiag
   385 00000248 41                      				inc 	cx	; diagonal
   386 00000249 7228                    .hfnodiag:	jc		.vforward
   387                                  
   388 0000024B F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   389 0000024D 01F6                    			add		si,si	; start ver *2
   390 0000024F 01ED                    			add		bp,bp	; start hor *2
   391 00000251 81C6[0000]              			add		si,BackBufferTable
   392 00000255 3E8B3C                  			mov		di,[ds:si]	; lookup start ver
   393                                  
   394 00000258 00E0                    .hfloop:		add 	al,ah	; fraction to current
   395 0000025A 7306                    				jnc		.hfplot	;
   396 0000025C 83C602                  					add		si,2
   397 0000025F 3E8B3C                  					mov		di,[ds:si]	; lookup start ver		
   398                                  
   399 00000262 8B9E[000A]              .hfplot:		mov		bx,[HorPosTable+bp]
   400 00000266 8AB6[0000]              				mov		dh,[OrTable+bp]
   401 0000026A 260831                  				or byte [es:di+bx],dh
   402                                  
   403 0000026D 83C502                  				add		bp,2		; next hor
   404 00000270 E2E6                    				loop	.hfloop		; dec cx jnz
   405 00000272 C3                      			ret
   406                                  
   407                                  ;	mov		di,[ds:si]
   408                                  
   409 00000273 87D1                    .vforward:	xchg 	dx,cx			; increment line down everytime and line across every few times
   410 00000275 F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   411                                  
   412 00000277 01F6                    			add		si,si	; start ver *2
   413 00000279 01ED                    			add		bp,bp	; start hor *2
   414 0000027B 81C6[0000]              			add		si,BackBufferTable
   415                                  
   416 0000027F 8AB6[0000]              			mov		dh,[OrTable+bp]
   417 00000283 8B9E[000A]              			mov		bx,[HorPosTable+bp]
   418                                  	
   419 00000287 00E0                    .vfloop:		add 	al,ah	; fraction to current
   420 00000289 730B                    				jnc		.vfplot	;
   421 0000028B 83C502                  					add		bp,2
   422 0000028E 8AB6[0000]              					mov		dh,[OrTable+bp]
   423 00000292 8B9E[000A]              					mov		bx,[HorPosTable+bp]
   424                                  		
   425 00000296 3E8B3C                  .vfplot:		mov		di,[ds:si]	; lookup start ver
   426 00000299 260831                  				or byte [es:di+bx],dh
   427                                  
   428 0000029C 83C602                  				add		si,2		; next ver
   429 0000029F E2E6                    				loop	.vfloop		; dec cl jnz
   430 000002A1 C3                      			ret
   431                                  
   432 000002A2 39F2                    Line00:		cmp		dx,si 	; vs le ve?
   433 000002A4 7306                    			jnc		.noswap	; yes
   434 000002A6 87F2                    				xchg	si,dx	; swap vs,ve
   435 000002A8 87E9                    				xchg	bp,cx	; swap hs,he
   436 000002AA EB06                    				jmp	.vdiff
   437                                  
   438 000002AC 7504                    .noswap:	jne		.vdiff			; v not same
   439 000002AE 39E9                    				cmp		cx,bp		; v is same 
   440 000002B0 7436                    				je 		.quit		; h is same
   441                                  
   442 000002B2 29F2                    .vdiff:		sub		dx,si	; ver diff = ve-vs
   443 000002B4 29E9                    			sub		cx,bp	; hs le he? - replace with sub below? todo
   444 000002B6 7360                    			jnc		.hforward	; yes
   445                                  
   446 000002B8 F7D9                    .hbackward:	neg 	cx		; decrement line across everytime and line down every few times
   447                                   
   448 000002BA 39D1                    			cmp		cx,dx
   449 000002BC 7501                    			jne		.hbnodiag ; .quit ; .vbackward ; .quit ;	.vbackward
   450 000002BE 41                      				inc	cx	; diagonal
   451 000002BF 7228                    .hbnodiag:	jc		.vbackward
   452                                  
   453 000002C1 F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   454 000002C3 01F6                    			add		si,si	; start ver *2
   455 000002C5 01ED                    			add		bp,bp	; start hor *2
   456 000002C7 81C6[0000]              			add		si,BackBufferTable
   457 000002CB 3E8B3C                  			mov		di,[ds:si]	; lookup start ver
   458                                  	
   459 000002CE 00E0                    .hbloop:		add 	al,ah	; fraction to current
   460 000002D0 7306                    				jnc		.hbplot	;
   461 000002D2 83C602                  					add		si,2
   462 000002D5 3E8B3C                  					mov		di,[ds:si]	; lookup start ver
   463                                  
   464 000002D8 8B9E[000A]              .hbplot:		mov		bx,[HorPosTable+bp]
   465 000002DC 8AB6[0005]              				mov		dh,[AndTable+bp]
   466 000002E0 262031                  				and byte [es:di+bx],dh
   467                                  
   468 000002E3 83ED02                  				sub		bp,2		; next hor
   469 000002E6 E2E6                    				loop	.hbloop		; dec cx jnz
   470 000002E8 C3                      .quit:		ret
   471                                  
   472 000002E9 87D1                    .vbackward:	xchg 	dx,cx		; decrement line down everytime and line across every few times
   473 000002EB F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   474                                  
   475 000002ED 01F6                    			add		si,si	; start ver *2
   476 000002EF 01ED                    			add		bp,bp	; start hor *2
   477 000002F1 81C6[0000]              			add		si,BackBufferTable
   478 000002F5 8AB6[0005]              			mov		dh,[AndTable+bp]
   479 000002F9 8B9E[000A]              			mov		bx,[HorPosTable+bp]
   480                                  	
   481 000002FD 00E0                    .vbloop:		add 	al,ah	; fraction to current
   482 000002FF 730B                    				jnc		.vbplot	;
   483 00000301 83ED02                  					sub		bp,2
   484 00000304 8AB6[0005]              					mov		dh,[AndTable+bp]
   485 00000308 8B9E[000A]              					mov		bx,[HorPosTable+bp]
   486                                  		
   487 0000030C 3E8B3C                  .vbplot:		mov		di,[ds:si]	; lookup start ver
   488 0000030F 262031                  				and byte [es:di+bx],dh
   489                                  
   490 00000312 83C602                  				add		si,2		; next ver
   491 00000315 E2E6                    				loop	.vbloop		; dec cl jnz
   492 00000317 C3                      			ret
   493                                  
   494 00000318 39D1                    .hforward: 	cmp		cx,dx		; increment line across everytime and line down every few times
   495 0000031A 7501                    			jne		.hfnodiag
   496 0000031C 41                      				inc 	cx	; diagonal
   497 0000031D 7228                    .hfnodiag:	jc		.vforward
   498                                  
   499 0000031F F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   500 00000321 01F6                    			add		si,si	; start ver *2
   501 00000323 01ED                    			add		bp,bp	; start hor *2
   502 00000325 81C6[0000]              			add		si,BackBufferTable
   503 00000329 3E8B3C                  			mov		di,[ds:si]	; lookup start ver
   504                                  	
   505 0000032C 00E0                    .hfloop:		add 	al,ah	; fraction to current
   506 0000032E 7306                    				jnc		.hfplot	;
   507 00000330 83C602                  					add		si,2
   508 00000333 3E8B3C                  					mov		di,[ds:si]	; lookup start ver		
   509                                  
   510 00000336 8B9E[000A]              .hfplot:		mov		bx,[HorPosTable+bp]
   511 0000033A 8AB6[0005]              				mov		dh,[AndTable+bp]
   512 0000033E 262031                  				and byte [es:di+bx],dh
   513                                  	
   514 00000341 83C502                  				add		bp,2		; next hor
   515 00000344 E2E6                    				loop	.hfloop		; dec cx jnz
   516 00000346 C3                      			ret
   517                                  
   518 00000347 87D1                    .vforward: 	xchg 	dx,cx			; increment line down everytime and line across every few times
   519 00000349 F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   520                                  
   521 0000034B 01F6                    			add		si,si	; start ver *2
   522 0000034D 01ED                    			add		bp,bp	; start hor *2
   523 0000034F 81C6[0000]              			add		si,BackBufferTable
   524 00000353 8AB6[0005]              			mov		dh,[AndTable+bp]
   525 00000357 8B9E[000A]              			mov		bx,[HorPosTable+bp]
   526                                  	
   527 0000035B 00E0                    .vfloop:		add 	al,ah	; fraction to current
   528 0000035D 730B                    				jnc		.vfplot	;
   529 0000035F 83C502                  					add		bp,2
   530 00000362 8AB6[0005]              					mov		dh,[AndTable+bp]
   531 00000366 8B9E[000A]              					mov		bx,[HorPosTable+bp]
   532                                  		
   533 0000036A 3E8B3C                  .vfplot:		mov		di,[ds:si]	; lookup start ver
   534 0000036D 262031                  				and byte [es:di+bx],dh
   535                                  
   536 00000370 83C602                  				add		si,2		; next ver
   537 00000373 E2E6                    				loop	.vfloop		; dec cl jnz
   538 00000375 C3                      			ret
   539                                  
   540                                  GetKey:
   541 00000376 B411                    	mov	ah,11h
   542 00000378 CD16                    	int	16h         	; has a key been pressed
   543 0000037A 7426                    	jz	.key_none ; no
   544 0000037C B410                    	mov	ah,10h      ; yes 
   545 0000037E CD16                    	int	16h         	; get it in AX (al= ascii, ah=scan code)
   546 00000380 3C1B                    	cmp	al,KEY_ESC
   547 00000382 741F                    	je	.key_esc
   548 00000384 3D3102                  	cmp 	ax,KEY_1
   549 00000387 7420                    	je 	.key_1
   550 00000389 3D3203                  	cmp 	ax,KEY_2
   551 0000038C 742F                    	je 	.key_2
   552 0000038E 3D3304                  	cmp 	ax,KEY_3
   553 00000391 743E                    	je 	.key_3
   554 00000393 3D3405                  	cmp 	ax,KEY_4
   555 00000396 744D                    	je 	.key_4
   556 00000398 3D3506                  	cmp 	ax,KEY_5
   557 0000039B 745C                    	je 	.key_5
   558 0000039D 3D3607                  	cmp 	ax,KEY_6
   559 000003A0 746B                    	je 	.key_6
   560                                  .key_none:
   561 000003A2 C3                      	ret
   562                                  .key_esc:
   563 000003A3 B001                    	mov	al,1
   564 000003A5 A2[3094]                	mov	[Exit],al
   565 000003A8 C3                      	ret
   566                                  .key_1:
   567 000003A9 A1[A41C]                	mov ax,[HOffset]
   568 000003AC 83E801                  	sub ax,1
   569 000003AF A3[A41C]                	mov [HOffset],ax
   570 000003B2 A1[AE1E]                	mov ax,[testx]
   571 000003B5 48                      	dec ax
   572 000003B6 25FF01                  	and ax,511
   573 000003B9 A3[AE1E]                	mov [testx],ax
   574 000003BC C3                      	ret
   575                                  .key_2:
   576 000003BD A1[A41C]                	mov ax,[HOffset]
   577 000003C0 83C001                  	add ax,1
   578 000003C3 A3[A41C]                	mov [HOffset],ax
   579 000003C6 A1[AE1E]                	mov ax,[testx]
   580 000003C9 40                      	inc ax
   581 000003CA 25FF01                  	and ax,511
   582 000003CD A3[AE1E]                	mov [testx],ax
   583 000003D0 C3                      	ret
   584                                  .key_3:
   585 000003D1 A1[A61C]                	mov ax,[VOffset]
   586 000003D4 83E801                  	sub ax,1
   587 000003D7 A3[A61C]                	mov [VOffset],ax
   588 000003DA A1[B01E]                	mov ax,[testy]
   589 000003DD 48                      	dec ax
   590 000003DE 25FF01                  	and ax,511
   591 000003E1 A3[B01E]                	mov [testy],ax
   592 000003E4 C3                      	ret
   593                                  .key_4:
   594 000003E5 A1[A61C]                	mov ax,[VOffset]
   595 000003E8 83C001                  	add ax,1
   596 000003EB A3[A61C]                	mov [VOffset],ax
   597 000003EE A1[B01E]                	mov ax,[testy]
   598 000003F1 40                      	inc ax
   599 000003F2 25FF01                  	and ax,511
   600 000003F5 A3[B01E]                	mov [testy],ax
   601 000003F8 C3                      	ret
   602                                  .key_5:
   603 000003F9 A1[AC1C]                	mov ax,[ZOffset]
   604 000003FC 83E801                  	sub ax,1
   605 000003FF A3[AC1C]                	mov [ZOffset],ax
   606 00000402 A1[B21E]                	mov ax,[testz]
   607 00000405 48                      	dec ax
   608 00000406 25FF01                  	and ax,511
   609 00000409 A3[B21E]                	mov [testz],ax
   610 0000040C C3                      	ret
   611                                  .key_6:
   612 0000040D A1[AC1C]                	mov ax,[ZOffset]
   613 00000410 83C001                  	add ax,1
   614 00000413 A3[AC1C]                	mov [ZOffset],ax
   615 00000416 A1[B21E]                	mov ax,[testz]
   616 00000419 40                      	inc ax
   617 0000041A 25FF01                  	and ax,511
   618 0000041D A3[B21E]                	mov [testz],ax
   619 00000420 C3                      	ret
   620                                  
   621 00000421 BADA03                  WaitVSync: 			mov		dx,INPUT_STATUS_1	; Wait for the leading edge of vertical sync pulse.
   622 00000424 EC                      WaitNotVSyncLoop:		in		al,dx
   623 00000425 2408                    						and		al,VSYNC_MASK
   624 00000427 75FB                    						jnz		WaitNotVSyncLoop
   625 00000429 EC                      WaitVSyncLoop:			in		al,dx
   626 0000042A 2408                    						and		al,VSYNC_MASK
   627 0000042C 74FB                    						jz		WaitVSyncLoop
   628 0000042E C3                      					ret
   629                                  		
   630                                  CopyClearBackBuffer:
   631 0000042F FC                      	cld
   632                                  
   633 00000430 8CDD                    	mov		bp,ds			; backup ds
   634                                  
   635 00000432 8B16[5194]              	mov		dx,[BackBufferSeg]
   636 00000436 8EDA                    	mov		ds,dx
   637                                  
   638 00000438 B800B8                  	mov		ax,VIDEO_SEGMENT
   639 0000043B 8EC0                    	mov		es,ax
   640                                  
   641 0000043D 31F6                    	xor		si,si		; DS:SI points to even back buffer
   642 0000043F 89F7                    	mov		di,si		; ES:DI points to CGA memory.
   643                                  
   644 00000441 B9D007                  	mov		cx,2000
   645 00000444 F366A5                  	rep	movsd			; copy from ds:si to es:di
   646                                  
   647 00000447 BE0020                  	mov		si,8192		; DS:SI points to odd back buffer
   648 0000044A 89F7                    	mov		di,si		; ES:DI points to CGA memory.
   649                                  
   650 0000044C B9D007                  	mov		cx,2000
   651 0000044F F366A5                  	rep	movsd			; copy from ds:si to es:di
   652                                  
   653 00000452 8CD8                    	mov		ax,ds		; es points to ds
   654 00000454 8EC0                    	mov		es,ax
   655                                  
   656 00000456 6631C0                  	xor eax,eax ; mov		ax,00101101001011010b ;
   657                                  	
   658 00000459 31FF                    	xor		di,di		; DS:SI points to even back buffer	
   659 0000045B B9D007                  	mov		cx,2000
   660 0000045E F366AB                  	rep	stosd			; clear odd back buffer
   661                                  
   662 00000461 BF0020                  	mov		di,8192		; DS:SI points to odd back buffer	
   663 00000464 B9D007                  	mov		cx,2000
   664 00000467 F366AB                  	rep	stosd			; clear odd back buffer
   665                                  
   666 0000046A 8EDD                    	mov		ds,bp			; restore ds
   667                                  
   668 0000046C C3                      	ret
   669                                  
   670 0000046D 8D36[B422]              Plots:	lea 	si,[PointList]
   671                                   
   672 00000471 51                      .loop		push	cx
   673 00000472 8B1C                    			mov		bx,[si]
   674 00000474 8B6C02                  			mov		bp,[si+2]
   675 00000477 E86700                  			call 	Plot11
   676 0000047A 59                      			pop		cx
   677                                   
   678 0000047B 83C604                  			add	si,4
   679 0000047E FEC9                    			dec	cl
   680 00000480 75EF                    			jne	.loop
   681 00000482 C3                      		ret
   682                                  
   683 00000483 8D36[B422]              Move:	lea 	si,[PointList]
   684 00000487 8D3E[D422]              		lea		di,[DirList]
   685                                   
   686 0000048B 8B04                    .loop		mov		ax,[si]
   687 0000048D 8B5C02                  			mov		bx,[si+2]
   688 00000490 8B15                    			mov		dx,[di]
   689 00000492 8B6D02                  			mov		bp,[di+2]
   690 00000495 01D0                    			add		ax,dx
   691 00000497 01EB                    			add		bx,bp
   692 00000499 8904                    			mov		[si],ax
   693 0000049B 895C02                  			mov		[si+2],bx
   694                                  	
   695 0000049E 83F800                  			cmp 	ax,0
   696 000004A1 7502                    			jne 	.testxl
   697 000004A3 F7DA                    				neg 	dx
   698 000004A5 83FB00                  .testxl		cmp 	bx,0
   699 000004A8 7502                    			jne 	.testyl
   700 000004AA F7DD                    				neg 	bp
   701 000004AC 3DC700                  .testyl		cmp 	ax,199
   702 000004AF 7502                    			jne 	.testxr
   703 000004B1 F7DA                    				neg 	dx
   704 000004B3 81FB3F01                .testxr		cmp 	bx,319
   705 000004B7 7502                    			jne 	.testyr
   706 000004B9 F7DD                    				neg 	bp
   707 000004BB 8915                    .testyr		mov 	[di],dx
   708 000004BD 896D02                  			mov	[di+2],bp
   709                                   
   710 000004C0 83C604                  			add		si,4
   711 000004C3 83C704                  			add		di,4
   712 000004C6 49                      			dec		cx
   713 000004C7 75C2                    			jne		.loop
   714 000004C9 C3                      		ret
   715                                  
   716                                  Plot00:
   717 000004CA 01DB                    	add		bx,bx 			; start ver *2
   718 000004CC 8BBF[0000]              	mov		di,[BackBufferTable+bx]	; lookup start ver
   719 000004D0 01ED                    	add		bp,bp			; start hor *2
   720 000004D2 03BE[000A]              	add		di,[HorPosTable+bp]	; add start hor
   721 000004D6 268A0D                  	mov		cl,[es:di]
   722 000004D9 228E[0005]              	and		cl,[AndTable+bp]
   723 000004DD 26880D                  	mov		[es:di],cl
   724 000004E0 C3                      	ret
   725                                  
   726                                  Plot11:
   727 000004E1 01DB                    	add		bx,bx 			; start ver *2
   728 000004E3 8BBF[0000]              	mov		di,[BackBufferTable+bx]	; lookup start ver
   729 000004E7 01ED                    	add		bp,bp			; start hor *2
   730 000004E9 03BE[000A]              	add		di,[HorPosTable+bp]	; add start hor
   731 000004ED 268A0D                  	mov		cl,[es:di]
   732 000004F0 0A8E[0000]              	or		cl,[OrTable+bp] 
   733 000004F4 26880D                  	mov		[es:di],cl
   734 000004F7 C3                      	ret
   735                                  
   736                                  Plot32:
   737                                  ; jmp Plot11
   738 000004F8 01DB                    	add		bx,bx 			; start ver *4
   739 000004FA 8BBF[0000]              	mov		di,[BackBufferTable+bx]	; lookup start ver
   740 000004FE C1E502                  	shl		bp,2			; start hor *4
   741 00000501 6603BE[800C]            	add		edi,[HorPosTab32+bp]	; add start hor
   742 00000506 26668B0D                	mov		ecx,[es:di]
   743 0000050A 660B8E[8011]            	or		ecx,[FillLeftTab32+bp] 
   744 0000050F 2666890D                	mov		[es:di],ecx
   745 00000513 C3                      	ret
   746                                  
   747                                  PlotFill:
   748 00000514 89F7                    	mov		di,si
   749 00000516 01ED                    	add		bp,bp			; start hor *2
   750 00000518 03BE[000A]              	add		di,[HorPosTable+bp]	; add start hor
   751 0000051C 268A0D                  	mov		cl,[es:di]
   752 0000051F 0A8E[0000]              	or		cl,[OrTable+bp] 
   753 00000523 26880D                  	mov		[es:di],cl
   754 00000526 C3                      	ret
   755                                  
   756                                  Fill:	
   757                                  ;	ret
   758 00000527 A2[5394]                	mov		[Colour],al		; backup colour
   759                                  	
   760 0000052A 8D36[B422]              		lea		si,[PointList]		; point list
   761 0000052E 89CB                    		mov		bx,cx			; points
   762 00000530 C1E302                  		shl		bx,2			; copy first point to last point
   763 00000533 668B2C                  		mov		ebp,[si]			; get start xy words
   764 00000536 668928                  		mov		[si+bx],ebp		; put xy words to end
   765                                  
   766 00000539 BBFF00                  		mov		bx,000ffh		; set lowest and highest
   767                                  
   768 0000053C 51                      .point_loop		push	cx
   769                                  
   770 0000053D 8B04                    				mov		ax,[si]		; vstart
   771 0000053F 8B6C02                  				mov		bp,[si+2]	; hstart
   772 00000542 8B4C04                  				mov		cx,[si+4]	; vend
   773 00000545 8B5406                  				mov		dx,[si+6]	; hend
   774                                  
   775 00000548 8D3E[9481]              				lea		di,[EdgeTable]	; get edge table start - default left edge
   776 0000054C 39C8                    				cmp 	ax,cx 		; compare vstart vend
   777 0000054E 7443                    				jz 		.next 		; if same ignore
   778 00000550 7206                    				jc		.noswap
   779 00000552 91                      					xchg 	ax,cx 		; swap vstart vend
   780 00000553 87EA                    					xchg 	bp,dx 		; swap hstart hend
   781 00000555 83C704                  					add		di,4		; add 4 for right edge
   782                                  
   783 00000558 38C3                    .noswap:		cmp 	bl,al 	; smallest xpos
   784 0000055A 7202                    				jc 	.low
   785 0000055C 88C3                    					mov 	bl,al 	; yes
   786                                  
   787 0000055E 38CF                    .low:			cmp 	bh,cl	; biggest xpos
   788 00000560 7302                    				jnc 	.high
   789 00000562 88CF                    					mov		bh,cl 	; yes
   790                                  
   791 00000564 29C1                    .high			sub		cx,ax		; vdiff
   792                                  
   793 00000566 C1E003                  				shl		ax,3		; *8
   794 00000569 01C7                    				add		di,ax		; added to di
   795                                  	
   796                                  ;				mov		gs,dx		; negate set to positive
   797 0000056B 29EA                    				sub		dx,bp		; hdiff
   798                                  
   799 0000056D 66C1E510                .positive		shl		ebp,16		; hstart *65536
   800                                  
   801 00000571 660FBFC2                				movsx	eax,dx		; hdiff
   802 00000575 660FBFC9                				movsx	ecx,cx
   803 00000579 6699                    				CDQ
   804 0000057B 66C1E009                				shl		eax,9		; shift left ax 9 times
   805 0000057F 66F7F9                  				idiv	ecx			; divide dx:ax by cx
   806 00000582 66C1E007                				shl		eax,7		; shift result left 7 times so becomes 16:16
   807                                  
   808 00000586 66892D                  .edge_loop		mov		[di],ebp		; store hstart = temp
   809 00000589 6601C5                  				add		ebp,eax
   810 0000058C 83C708                  				add		di,8
   811 0000058F FEC9                    				dec		cl
   812 00000591 75F3                    				jnz		.edge_loop
   813                                  
   814 00000593 83C604                  .next			add		si,4
   815 00000596 59                      				pop		cx
   816 00000597 FEC9                    				dec		cl
   817 00000599 75A1                    				jnz		.point_loop
   818                                   
   819 0000059B 28DF                    				sub		bh,bl			; end - start
   820 0000059D 7262                    				jc		.exit			; all on same line?
   821 0000059F 88FA                    	mov	dl,bh
   822 000005A1 30FF                    	xor	bh,bh
   823                                  
   824 000005A3 A0[5394]                				mov		al,[Colour]
   825 000005A6 88C4                    				mov 	ah,al
   826 000005A8 66C1E008                				shl 	eax,8
   827 000005AC 88E0                    				mov 	al,ah
   828 000005AE 66C1E008                				shl 	eax,8
   829 000005B2 88E0                    				mov 	al,ah
   830                                  
   831                                  ;;;; mov si,bx
   832                                  
   833 000005B4 01DB                    	add	bx,bx 			; start ver *2
   834 000005B6 89DF                    	mov	di,bx			; screen line
   835 000005B8 C1E302                  	shl	bx,2			; start ver *4*8
   836 000005BB 8DAF[9681]              	lea	bp,[EdgeTable+bx+2]	; point to first 
   837 000005BF 8DBD[0000]              	lea	di,[BackBufferTable+di]
   838                                  
   839 000005C3 55                      .plotloop	push	bp
   840 000005C4 57                      			push 	di
   841                                  
   842 000005C5 8B5E04                  			mov		bx,[bp+4]
   843 000005C8 8B6E00                  			mov		bp,[bp]
   844 000005CB 8B3D                    			mov		di,[di]	; lookup start ver
   845                                  
   846 000005CD 39DD                    			cmp		bp,bx
   847 000005CF 7302                    			jnc		.no_swap
   848 000005D1 87EB                    				xchg 	bp, bx
   849                                  
   850 000005D3 89D9                    .no_swap:	mov 	cx,bx
   851 000005D5 C1E904                  			shr 	cx,4
   852 000005D8 C1E102                  			shl 	cx,2
   853 000005DB 01CF                    			add 	di,cx
   854                                  
   855 000005DD 89D9                    			mov		cx,bx
   856 000005DF 89EE                    			mov		si,bp
   857                                  			
   858 000005E1 C1EE04                  			shr		si,4
   859 000005E4 C1E904                  			shr		cx,4
   860                                  
   861 000005E7 29CE                    			sub		si,cx
   862 000005E9 01F6                    			add		si,si
   863 000005EB 8BB4[801B]              			mov		si,[FillTable+si]
   864 000005EF FFE6                    			JMP		(si)
   865                                  
   866                                  .fill_cont:
   867 000005F1 5F                      		pop	di
   868 000005F2 5D                      		pop bp
   869 000005F3 66C1C802                	ror eax,2
   870 000005F7 83C508                  		add	bp,8
   871 000005FA 83C702                  		add di,2
   872 000005FD FECA                    		dec	dl
   873 000005FF 75C2                    		jnz	.plotloop
   874                                  
   875 00000601 C3                      .exit	ret
   876                                  
   877 00000602 EBED                    Fill000:	jmp	Fill.fill_cont
   878                                  
   879                                  Fill004:	left_edge
   879                              <1> Fill004: 
    47 00000604 C1E302              <1>  shl bx,2
    48 00000607 26668B0D            <1>  mov ecx,[es:di]
    49 0000060B 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000610 2666890D            <1>  mov [es:di],ecx
   880 00000614 83C704                  			add		di,4
   881                                  			right_edge
    54 00000617 C1E502              <1>  shl bp,2
    55 0000061A 26668B0D            <1>  mov ecx,[es:di]
    56 0000061E 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 00000623 2666890D            <1>  mov [es:di],ecx
   882 00000627 EBC8                    			jmp	Fill.fill_cont
   883                                  
   884                                  Fill008:	left_edge
   884                              <1> Fill008: 
    47 00000629 C1E302              <1>  shl bx,2
    48 0000062C 26668B0D            <1>  mov ecx,[es:di]
    49 00000630 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000635 2666890D            <1>  mov [es:di],ecx
   885 00000639 83C704                  			add		di,4
   886 0000063C 66AB                    			stosd
   887                                  			right_edge
    54 0000063E C1E502              <1>  shl bp,2
    55 00000641 26668B0D            <1>  mov ecx,[es:di]
    56 00000645 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 0000064A 2666890D            <1>  mov [es:di],ecx
   888 0000064E EBA1                    			jmp	Fill.fill_cont
   889                                  Fill012:	left_edge
   889                              <1> Fill012: 
    47 00000650 C1E302              <1>  shl bx,2
    48 00000653 26668B0D            <1>  mov ecx,[es:di]
    49 00000657 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 0000065C 2666890D            <1>  mov [es:di],ecx
   890 00000660 83C704                  			add		di,4
   891 00000663 B90200                  			mov		cx,2
   892 00000666 F366AB                  			rep		stosd
   893                                  			right_edge
    54 00000669 C1E502              <1>  shl bp,2
    55 0000066C 26668B0D            <1>  mov ecx,[es:di]
    56 00000670 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 00000675 2666890D            <1>  mov [es:di],ecx
   894 00000679 E975FF                  			jmp	Fill.fill_cont
   895                                  Fill016:	left_edge
   895                              <1> Fill016: 
    47 0000067C C1E302              <1>  shl bx,2
    48 0000067F 26668B0D            <1>  mov ecx,[es:di]
    49 00000683 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000688 2666890D            <1>  mov [es:di],ecx
   896 0000068C 83C704                  			add		di,4
   897 0000068F B90300                  			mov		cx,3
   898 00000692 F366AB                  			rep		stosd
   899                                  			right_edge
    54 00000695 C1E502              <1>  shl bp,2
    55 00000698 26668B0D            <1>  mov ecx,[es:di]
    56 0000069C 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 000006A1 2666890D            <1>  mov [es:di],ecx
   900 000006A5 E949FF                  			jmp	Fill.fill_cont
   901                                  Fill020:left_edge
   901                              <1> Fill020:
    47 000006A8 C1E302              <1>  shl bx,2
    48 000006AB 26668B0D            <1>  mov ecx,[es:di]
    49 000006AF 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 000006B4 2666890D            <1>  mov [es:di],ecx
   902 000006B8 83C704                  			add		di,4
   903 000006BB B90400                  			mov		cx,4
   904 000006BE F366AB                  			rep		stosd
   905                                  			right_edge
    54 000006C1 C1E502              <1>  shl bp,2
    55 000006C4 26668B0D            <1>  mov ecx,[es:di]
    56 000006C8 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 000006CD 2666890D            <1>  mov [es:di],ecx
   906 000006D1 E91DFF                  			jmp	Fill.fill_cont
   907                                  Fill024:left_edge
   907                              <1> Fill024:
    47 000006D4 C1E302              <1>  shl bx,2
    48 000006D7 26668B0D            <1>  mov ecx,[es:di]
    49 000006DB 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 000006E0 2666890D            <1>  mov [es:di],ecx
   908 000006E4 83C704                  			add		di,4
   909 000006E7 B90500                  			mov		cx,5
   910 000006EA F366AB                  			rep		stosd
   911                                  			right_edge
    54 000006ED C1E502              <1>  shl bp,2
    55 000006F0 26668B0D            <1>  mov ecx,[es:di]
    56 000006F4 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 000006F9 2666890D            <1>  mov [es:di],ecx
   912 000006FD E9F1FE                  			jmp	Fill.fill_cont
   913                                  Fill028:left_edge
   913                              <1> Fill028:
    47 00000700 C1E302              <1>  shl bx,2
    48 00000703 26668B0D            <1>  mov ecx,[es:di]
    49 00000707 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 0000070C 2666890D            <1>  mov [es:di],ecx
   914 00000710 83C704                  			add		di,4
   915 00000713 B90600                  			mov		cx,6
   916 00000716 F366AB                  			rep		stosd
   917                                  			right_edge
    54 00000719 C1E502              <1>  shl bp,2
    55 0000071C 26668B0D            <1>  mov ecx,[es:di]
    56 00000720 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 00000725 2666890D            <1>  mov [es:di],ecx
   918 00000729 E9C5FE                  			jmp	Fill.fill_cont
   919                                  Fill032:	left_edge
   919                              <1> Fill032: 
    47 0000072C C1E302              <1>  shl bx,2
    48 0000072F 26668B0D            <1>  mov ecx,[es:di]
    49 00000733 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000738 2666890D            <1>  mov [es:di],ecx
   920 0000073C 83C704                  			add		di,4
   921 0000073F B90700                  			mov		cx,7
   922 00000742 F366AB                  			rep		stosd
   923                                  			right_edge
    54 00000745 C1E502              <1>  shl bp,2
    55 00000748 26668B0D            <1>  mov ecx,[es:di]
    56 0000074C 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 00000751 2666890D            <1>  mov [es:di],ecx
   924 00000755 E999FE                  			jmp	Fill.fill_cont
   925                                  Fill036:	left_edge
   925                              <1> Fill036: 
    47 00000758 C1E302              <1>  shl bx,2
    48 0000075B 26668B0D            <1>  mov ecx,[es:di]
    49 0000075F 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000764 2666890D            <1>  mov [es:di],ecx
   926 00000768 83C704                  			add		di,4
   927 0000076B B90800                  			mov		cx,8
   928 0000076E F366AB                  			rep		stosd
   929                                  			right_edge
    54 00000771 C1E502              <1>  shl bp,2
    55 00000774 26668B0D            <1>  mov ecx,[es:di]
    56 00000778 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 0000077D 2666890D            <1>  mov [es:di],ecx
   930 00000781 E96DFE                  			jmp	Fill.fill_cont
   931                                  Fill040:	left_edge
   931                              <1> Fill040: 
    47 00000784 C1E302              <1>  shl bx,2
    48 00000787 26668B0D            <1>  mov ecx,[es:di]
    49 0000078B 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000790 2666890D            <1>  mov [es:di],ecx
   932 00000794 83C704                  			add		di,4
   933 00000797 B90900                  			mov		cx,9
   934 0000079A F366AB                  			rep		stosd
   935                                  			right_edge
    54 0000079D C1E502              <1>  shl bp,2
    55 000007A0 26668B0D            <1>  mov ecx,[es:di]
    56 000007A4 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 000007A9 2666890D            <1>  mov [es:di],ecx
   936 000007AD E941FE                  			jmp	Fill.fill_cont
   937                                  Fill044:	left_edge
   937                              <1> Fill044: 
    47 000007B0 C1E302              <1>  shl bx,2
    48 000007B3 26668B0D            <1>  mov ecx,[es:di]
    49 000007B7 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 000007BC 2666890D            <1>  mov [es:di],ecx
   938 000007C0 83C704                  			add		di,4
   939 000007C3 B90A00                  			mov		cx,10
   940 000007C6 F366AB                  			rep		stosd
   941                                  			right_edge
    54 000007C9 C1E502              <1>  shl bp,2
    55 000007CC 26668B0D            <1>  mov ecx,[es:di]
    56 000007D0 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 000007D5 2666890D            <1>  mov [es:di],ecx
   942 000007D9 E915FE                  			jmp	Fill.fill_cont
   943                                  Fill048:	left_edge
   943                              <1> Fill048: 
    47 000007DC C1E302              <1>  shl bx,2
    48 000007DF 26668B0D            <1>  mov ecx,[es:di]
    49 000007E3 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 000007E8 2666890D            <1>  mov [es:di],ecx
   944 000007EC 83C704                  			add		di,4
   945 000007EF B90B00                  			mov		cx,11
   946 000007F2 F366AB                  			rep		stosd
   947                                  			right_edge
    54 000007F5 C1E502              <1>  shl bp,2
    55 000007F8 26668B0D            <1>  mov ecx,[es:di]
    56 000007FC 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 00000801 2666890D            <1>  mov [es:di],ecx
   948 00000805 E9E9FD                  			jmp	Fill.fill_cont
   949                                  Fill052:	left_edge
   949                              <1> Fill052: 
    47 00000808 C1E302              <1>  shl bx,2
    48 0000080B 26668B0D            <1>  mov ecx,[es:di]
    49 0000080F 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000814 2666890D            <1>  mov [es:di],ecx
   950 00000818 83C704                  			add		di,4
   951 0000081B B90C00                  			mov		cx,12
   952 0000081E F366AB                  			rep		stosd
   953                                  			right_edge
    54 00000821 C1E502              <1>  shl bp,2
    55 00000824 26668B0D            <1>  mov ecx,[es:di]
    56 00000828 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 0000082D 2666890D            <1>  mov [es:di],ecx
   954 00000831 E9BDFD                  			jmp	Fill.fill_cont
   955                                  Fill056:	left_edge
   955                              <1> Fill056: 
    47 00000834 C1E302              <1>  shl bx,2
    48 00000837 26668B0D            <1>  mov ecx,[es:di]
    49 0000083B 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000840 2666890D            <1>  mov [es:di],ecx
   956 00000844 83C704                  			add		di,4
   957 00000847 B90D00                  			mov		cx,13
   958 0000084A F366AB                  			rep		stosd
   959                                  			right_edge
    54 0000084D C1E502              <1>  shl bp,2
    55 00000850 26668B0D            <1>  mov ecx,[es:di]
    56 00000854 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 00000859 2666890D            <1>  mov [es:di],ecx
   960 0000085D E991FD                  			jmp	Fill.fill_cont
   961                                  Fill060:	left_edge
   961                              <1> Fill060: 
    47 00000860 C1E302              <1>  shl bx,2
    48 00000863 26668B0D            <1>  mov ecx,[es:di]
    49 00000867 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 0000086C 2666890D            <1>  mov [es:di],ecx
   962 00000870 83C704                  			add		di,4
   963 00000873 B90E00                  			mov		cx,14
   964 00000876 F366AB                  			rep		stosd
   965                                  			right_edge
    54 00000879 C1E502              <1>  shl bp,2
    55 0000087C 26668B0D            <1>  mov ecx,[es:di]
    56 00000880 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 00000885 2666890D            <1>  mov [es:di],ecx
   966 00000889 E965FD                  			jmp	Fill.fill_cont
   967                                  Fill064:	left_edge
   967                              <1> Fill064: 
    47 0000088C C1E302              <1>  shl bx,2
    48 0000088F 26668B0D            <1>  mov ecx,[es:di]
    49 00000893 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000898 2666890D            <1>  mov [es:di],ecx
   968 0000089C 83C704                  			add		di,4
   969 0000089F B90F00                  			mov		cx,15
   970 000008A2 F366AB                  			rep		stosd
   971                                  			right_edge
    54 000008A5 C1E502              <1>  shl bp,2
    55 000008A8 26668B0D            <1>  mov ecx,[es:di]
    56 000008AC 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 000008B1 2666890D            <1>  mov [es:di],ecx
   972 000008B5 E939FD                  			jmp	Fill.fill_cont
   973                                  Fill068:	left_edge
   973                              <1> Fill068: 
    47 000008B8 C1E302              <1>  shl bx,2
    48 000008BB 26668B0D            <1>  mov ecx,[es:di]
    49 000008BF 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 000008C4 2666890D            <1>  mov [es:di],ecx
   974 000008C8 83C704                  			add		di,4
   975 000008CB B91000                  			mov		cx,16
   976 000008CE F366AB                  			rep		stosd
   977                                  			right_edge
    54 000008D1 C1E502              <1>  shl bp,2
    55 000008D4 26668B0D            <1>  mov ecx,[es:di]
    56 000008D8 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 000008DD 2666890D            <1>  mov [es:di],ecx
   978 000008E1 E90DFD                  			jmp	Fill.fill_cont
   979                                  Fill072:	left_edge
   979                              <1> Fill072: 
    47 000008E4 C1E302              <1>  shl bx,2
    48 000008E7 26668B0D            <1>  mov ecx,[es:di]
    49 000008EB 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 000008F0 2666890D            <1>  mov [es:di],ecx
   980 000008F4 83C704                  			add		di,4
   981 000008F7 B91100                  			mov		cx,17
   982 000008FA F366AB                  			rep		stosd
   983                                  			right_edge
    54 000008FD C1E502              <1>  shl bp,2
    55 00000900 26668B0D            <1>  mov ecx,[es:di]
    56 00000904 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 00000909 2666890D            <1>  mov [es:di],ecx
   984 0000090D E9E1FC                  			jmp	Fill.fill_cont
   985                                  Fill076:	left_edge
   985                              <1> Fill076: 
    47 00000910 C1E302              <1>  shl bx,2
    48 00000913 26668B0D            <1>  mov ecx,[es:di]
    49 00000917 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 0000091C 2666890D            <1>  mov [es:di],ecx
   986 00000920 83C704                  			add		di,4
   987 00000923 B91200                  			mov		cx,18
   988 00000926 F366AB                  			rep		stosd
   989                                  			right_edge
    54 00000929 C1E502              <1>  shl bp,2
    55 0000092C 26668B0D            <1>  mov ecx,[es:di]
    56 00000930 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 00000935 2666890D            <1>  mov [es:di],ecx
   990 00000939 E9B5FC                  			jmp	Fill.fill_cont
   991                                  Fill080:	left_edge
   991                              <1> Fill080: 
    47 0000093C C1E302              <1>  shl bx,2
    48 0000093F 26668B0D            <1>  mov ecx,[es:di]
    49 00000943 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000948 2666890D            <1>  mov [es:di],ecx
   992 0000094C 83C704                  			add		di,4
   993 0000094F B91300                  			mov		cx,19
   994 00000952 F366AB                  			rep		stosd
   995                                  			right_edge
    54 00000955 C1E502              <1>  shl bp,2
    55 00000958 26668B0D            <1>  mov ecx,[es:di]
    56 0000095C 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 00000961 2666890D            <1>  mov [es:di],ecx
   996 00000965 E989FC                  			jmp	Fill.fill_cont
   997                                  Fill084:	left_edge
   997                              <1> Fill084: 
    47 00000968 C1E302              <1>  shl bx,2
    48 0000096B 26668B0D            <1>  mov ecx,[es:di]
    49 0000096F 660B8F[8011]        <1>  or ecx,[FillLeftTab32+bx]
    50 00000974 2666890D            <1>  mov [es:di],ecx
   998 00000978 83C704                  			add		di,4
   999 0000097B B91400                  			mov		cx,20
  1000 0000097E F366AB                  			rep		stosd
  1001                                  			right_edge
    54 00000981 C1E502              <1>  shl bp,2
    55 00000984 26668B0D            <1>  mov ecx,[es:di]
    56 00000988 660B8E[8016]        <1>  or ecx,[FillRightTab32+bp]
    57 0000098D 2666890D            <1>  mov [es:di],ecx
  1002 00000991 E95DFC                  			jmp	Fill.fill_cont
  1003                                  
  1004                                  ; eax = colour
  1005                                  ; dl = ver count ?
  1006                                  ; di = screen pos
  1007                                  ; cx = temp var
  1008                                  ; si = temp var
  1009                                  ; bp = 
  1010                                  ; bx
  1011                                  
  1012                                  
  1013                                  
  1014                                  
  1015                                  
  1016                                  ;				mov		cl,bh
  1017                                  ;				xor		bh,bh
  1018                                  ;				add		bx,bx 			; start ver *2
  1019                                  ;				mov		si,[BackBufferTable+bx]	; start of ver line
  1020                                  ;				shl		bx,2			; start ver *4*8
  1021                                  ;				lea		bp,[EdgeTable+bx+2]	; point to first 
  1022                                  ;
  1023                                  ;.fillloop:			push bp
  1024                                  ; 					mov		di,[bp+4]
  1025                                  ;					mov		bp,[bp]
  1026                                  ;
  1027                                  ;					cmp		bp,di
  1028                                  ;					jnc		.no_swap
  1029                                  ;						xchg 	bp, di
  1030                                  ;
  1031                                  ;.no_swap:			mov		ax,di
  1032                                  ;					mov		bx,bp
  1033                                  ;
  1034                                  ;					shr		ax,2
  1035                                  ;					shr		bx,2
  1036                                  ;					sub		bx,ax
  1037                                  ;					add		bx,bx
  1038                                  ;					mov		ax,[FillJumpTable+bx]
  1039                                  ;	mov	ebx,ecx		; backup count/colour
  1040                                  ;					JMP		(ax)
  1041                                  ;
  1042                                  ;					fill_cont
  1043                                  ;		ret
  1044                                  
  1045                                  
  1046                                  ; mov eax to ecx
  1047                                  ; and left mask
  1048                                  ; or screen
  1049                                  ; store screen
  1050                                  
  1051                                  ; get dword from screen
  1052                                  ; and it with left mask
  1053                                  ; or it with eax
  1054                                  ; mov [es:di],e??0
  1055                                  ; add di,4
  1056                                  
  1057                                  ; leftmask
  1058                                  ; dd 00000000000000000000000000000011b
  1059                                  ; dd 00000000000000000000000000001111b
  1060                                  ; dd 00000000000000000000000000111111b
  1061                                  ; dd 00000000000000000000000011111111b
  1062                                  ; dd 00000000000000000000001111111111b
  1063                                  ; dd 00000000000000000000111111111111b
  1064                                  ; dd 00000000000000000011111111111111b
  1065                                  ; dd 00000000000000001111111111111111b
  1066                                  ; dd 00000000000000111111111111111111b
  1067                                  ; dd 00000000000011111111111111111111b
  1068                                  ; dd 00000000001111111111111111111111b
  1069                                  ; dd 00000000111111111111111111111111b
  1070                                  ; dd 00000011111111111111111111111111b
  1071                                  ; dd 00001111111111111111111111111111b
  1072                                  ; dd 00111111111111111111111111111111b
  1073                                  ; dd 11111111111111111111111111111111b
  1074                                  
  1075                                  rightmask
  1075          ******************       warning: label alone on a line without a colon might be in error [-w+label-orphan]
  1076                                  ; dd 11000000000000000000000000000000b
  1077                                  ; dd 11110000000000000000000000000000b
  1078                                  ; dd 11111100000000000000000000000000b
  1079                                  ; dd 11111111000000000000000000000000b
  1080                                  ; dd 11111111110000000000000000000000b
  1081                                  ; dd 11111111111100000000000000000000b
  1082                                  ; dd 11111111111111000000000000000000b
  1083                                  ; dd 11111111111111110000000000000000b
  1084                                  ; dd 11111111111111111100000000000000b
  1085                                  ; dd 11111111111111111111000000000000b
  1086                                  ; dd 11111111111111111111110000000000b
  1087                                  ; dd 11111111111111111111111100000000b
  1088                                  ; dd 11111111111111111111111111000000b
  1089                                  ; dd 11111111111111111111111111110000b
  1090                                  ; dd 11111111111111111111111111111100b
  1091                                  ; dd 11111111111111111111111111111111b
  1092                                  
  1093                                  ;fill_left_right	MACRO
  1094                                  ;		lsl.w 	#3,d0 		; *16 *2
  1095                                  ;		lea 	(a7,d0.w),a2 	; colour left table
  1096                                  ;		movem.l 	(a2),d3/d6 	; get and into d3/d4 - 8 bytes
  1097                                  ;		lea 	(a5,d0.w),a2 	; colour left table
  1098                                  ;		movem.l 	(a3),d0/d2 	; get screen in d0-d1
  1099                                  ;		and.l 	d3,d0
  1100                                  ;		and.l 	d6,d2
  1101                                  ;		movem.l 	(a2),d3/d6 	; get or into d3/d4 - 8 bytes
  1102                                  ;		or.l 	d3,d0
  1103                                  ;		or.l 	d6,d2
  1104                                  ;		movem.l 	d0/d2,(a3)  	; put screen
  1105                                  
  1106                                  ;		move.w 	(a6,d1.w),d3 	; right hor pos
  1107                                  ;		lea 	(a1,d3.w),a3 	; left screen = ver pos + 2 right byte hor pos
  1108                                  ;		lsl.w 	#3,d1 		; *16 *2
  1109                                  ;		lea 	8(a7,d1.w),a2 	; colour right table
  1110                                  ;		movem.l 	(a2),d3/d6 	; get and into d3/d4 - 8 bytes
  1111                                  ;		lea 	8(a5,d1.w),a2 	; colour right table
  1112                                  ;		movem.l 	(a3),d0/d2 	; get screen in d0-d1
  1113                                  ;		and.l 	d3,d0
  1114                                  ;		and.l 	d6,d2
  1115                                  ;		movem.l 	(a2),d3/d6 	; get or into d3/d4 - 8 bytes
  1116                                  ;		or.l 	d3,d0
  1117                                  ;		or.l 	d6,d2
  1118                                  ;		movem.l 	d0/d2,(a3) 	; put screen
  1119                                  ;		ENDM
  1120                                  
  1121                                  ; get screen
  1122                                  ; and screen, leftscreentable[x]
  1123                                  ; get colour (eax)
  1124                                  ; and colour, leftcolourtable[x]
  1125                                  ; or screen,colour
  1126                                  ; sta screen
  1127                                  
  1128                                  ; get andtable,x into reg
  1129                                  ; get screen into reg
  1130                                  ; and screen with andtable,x to create gap
  1131                                  
  1132                                  ; get pattern (eax)
  1133                                  ; 
  1134                                  
  1135                                  
  1136                                  
  1137                                  ; classify3d
  1138                                  ;  get z
  1139                                  ;  if minus
  1140                                  ;   classify eq 16
  1141                                  ;  else
  1142                                  ;   do perspective
  1143                                  ;    classify eq 0
  1144                                  ;    if x lt 32767-100
  1145                                  ;     classify eq 1
  1146                                  ;    if x gt 32767+100
  1147                                  ;    classify eq 2
  1148                                  ;   if y lt 32767-160
  1149                                  ;    classify +=4
  1150                                  ;   if y gt 32767+160
  1151                                  ;    classify +=8
  1152                                  	
  1153 00000994 57                      DrawObject2:		push	di ; object lines
  1154 00000995 51                      				push	cx ; number of lines
  1155                                  
  1156                                  ;				mov		di,ObjectPointsResults
  1157                                  
  1158 00000996 30ED                    				xor		ch,ch
  1159 00000998 FEC9                    				dec		cl
  1160 0000099A 00C9                    				add		cl,cl
  1161 0000099C 89CF                    				mov		di,cx	; point count
  1162                                  		
  1163 0000099E BBFF00                  				mov		bx,255 ; high = or clip codes / low = and clip codes
  1164                                  	
  1165 000009A1 53                      .rotate_point_loop:	push	bx
  1166 000009A2 3E8B0C                  					mov		cx,[ds:si]	; xpos
  1167 000009A5 3E8B4402                					mov		ax,[ds:si+2]	; ypos
  1168 000009A9 3E8B6C04                					mov		bp,[ds:si+4]	; zpos
  1169                                  		
  1170 000009AD E89B04                  					call	Rotate
  1171                                  
  1172 000009B0 89C8                    					mov		ax,cx
  1173 000009B2 89E9                    					mov		cx,bp
  1174 000009B4 89DD                    					mov		bp,bx
  1175                                  		
  1176 000009B6 0306[AA1C]              					add		ax,[YOffset]
  1177 000009BA 8985[1492]              					mov		[ObjectYRot+di],ax 		; yrot
  1178                                  
  1179 000009BE 032E[A81C]              					add		bp,[XOffset]
  1180 000009C2 89AD[1491]              					mov		[ObjectXRot+di],bp 			; xrot
  1181                                  
  1182 000009C6 030E[AC1C]              					add		cx,[ZOffset]
  1183 000009CA 898D[1493]              					mov		[ObjectZRot+di],cx 	; zrot
  1184                                  
  1185 000009CE 7904                    					jns		.point_in_front
  1186 000009D0 B210                    						mov		dl,BEHIND_CC
  1187 000009D2 EB0E                    						jmp		.point_behind	
  1188                                  
  1189 000009D4 E82805                  .point_in_front:	call	Perspective
  1190 000009D7 8985[148E]              					mov		[ObjectYPos+di],ax 		; xpos
  1191 000009DB 89AD[148F]              					mov		[ObjectXPos+di],bp 		; ypos
  1192 000009DF E8F804                  					call	ClassifyPoint
  1193                                  
  1194 000009E2 8895[1490]              .point_behind:		mov		[ObjectClipCode+di],dl 	; clip code
  1195                                  
  1196 000009E6 5B                      					pop		bx
  1197 000009E7 20D3                    					and		bl,dl	; object and clip code
  1198 000009E9 08D7                    					or		bh,dl	; object or clip code
  1199                                  		
  1200 000009EB 83C606                  					add		si,6				
  1201 000009EE 83EF02                  					sub		di,2
  1202 000009F1 79AE                    					jns		.rotate_point_loop
  1203                                  
  1204 000009F3 59                      				pop		cx 	; number of lines
  1205 000009F4 5E                      				pop 	si 	; object lines
  1206                                  
  1207 000009F5 80FB00                  				cmp		bl,0				; if and_object_clip_code ne 0 all off one side so exit
  1208 000009F8 7530                    				jnz		.off_screen
  1209                                   
  1210 000009FA 80FF00                  				cmp		bh,0				; if or_object_clip_code eq 0 all on screen so no clip needed
  1211 000009FD 752C                    				jnz		.draw_clipped_object
  1212                                  
  1213                                  .draw_whole_object:
  1214 000009FF 51                      .draw_whole_object_line_loop:	push	cx
  1215 00000A00 56                      								push	si
  1216                                  
  1217 00000A01 30FF                    								xor		bh,bh
  1218 00000A03 3E8A1C                  								mov		bl,[ds:si]
  1219 00000A06 00DB                    								add		bl,bl	
  1220 00000A08 8B8F[148E]              								mov		cx,[ObjectYPos+bx] ; endy
  1221 00000A0C 8B97[148F]              								mov		dx,[ObjectXPos+bx] ; endx
  1222                                   
  1223 00000A10 3E8A5C01                								mov		bl,[ds:si+1]
  1224 00000A14 00DB                    								add		bl,bl
  1225 00000A16 8BAF[148E]              								mov		bp,[ObjectYPos+bx] ; starty
  1226 00000A1A 8BB7[148F]              								mov		si,[ObjectXPos+bx] ; startx
  1227 00000A1E E881F8                  								call	Line00
  1228                                  	 
  1229 00000A21 5E                      								pop		si
  1230 00000A22 59                      								pop		cx
  1231 00000A23 83C602                  								add		si,2
  1232                                  
  1233 00000A26 FECD                    								dec		ch
  1234 00000A28 75D5                    								jnz		.draw_whole_object_line_loop
  1235                                  
  1236 00000A2A C3                      .off_screen:				ret
  1237                                  	
  1238                                  .draw_clipped_object:	
  1239 00000A2B 30FF                    .draw_clipped_object_line_loop:	xor		bh,bh
  1240 00000A2D 51                      								push	cx
  1241 00000A2E 56                      								push	si
  1242                                  		
  1243 00000A2F 3E8A1C                  								mov		bl,[ds:si]
  1244 00000A32 00DB                    								add		bl,bl
  1245 00000A34 8A87[1490]              								mov		al,[ObjectClipCode+bx] 	; start clip code
  1246 00000A38 3E8A5C01                								mov		bl,[ds:si+1]
  1247 00000A3C 00DB                    								add		bl,bl
  1248 00000A3E 8AA7[1490]              								mov		ah,[ObjectClipCode+bx] 	; end clip code
  1249                                  
  1250 00000A42 88C3                    								mov		bl,al		; backup start clip code
  1251 00000A44 20E3                    								and		bl,ah	; both points are off 
  1252 00000A46 7522                    								jnz		.line_off_screen	; then line is off screen
  1253                                  
  1254 00000A48 08E0                    								or		al,ah 	; if any point is off
  1255 00000A4A 7528                    								jnz		.line_clip	; then line needs clipped
  1256                                  		
  1257 00000A4C 3E8A1C                  								mov		bl,[ds:si]
  1258 00000A4F 00DB                    								add		bl,bl	
  1259 00000A51 8B8F[148E]              								mov		cx,[ObjectYPos+bx] ; starty
  1260 00000A55 8B97[148F]              								mov		dx,[ObjectXPos+bx] ; startx
  1261                                  
  1262 00000A59 3E8A5C01                								mov		bl,[ds:si+1]
  1263 00000A5D 00DB                    								add		bl,bl
  1264 00000A5F 8BAF[148E]              								mov		bp,[ObjectYPos+bx] ; endy 
  1265 00000A63 8BB7[148F]              								mov		si,[ObjectXPos+bx] ; endx - todo - si is the problem?
  1266                                  
  1267 00000A67 E864F7                  .draw_clipped_line:				call	Line11
  1268                                  
  1269 00000A6A 5E                      .line_off_screen:				pop		si
  1270 00000A6B 59                      								pop		cx
  1271 00000A6C 83C602                  								add		si,2
  1272                                  		
  1273 00000A6F FECD                    								dec		ch
  1274 00000A71 75B8                    								jnz		.draw_clipped_object_line_loop
  1275 00000A73 C3                      							ret
  1276                                  
  1277                                  .line_clip:	; al = point 1 clip ; ah = point 2 clip
  1278                                  
  1279                                  ; copy point details to 2 sets of coords temp coords zyx and temp perspective xy
  1280                                  ; if either point is behind
  1281                                  ;  do z clip on required point
  1282                                  ;  do perspective
  1283                                  ;  do rest of tests
  1284                                  
  1285 00000A74 30FF                    					xor		bh,bh
  1286 00000A76 3E8A1C                  					mov		bl,[ds:si]
  1287 00000A79 00DB                    					add		bl,bl	
  1288 00000A7B 8B97[1491]              					mov		dx,[ObjectXRot+bx]
  1289 00000A7F 8916[3194]              					mov		[STX],dx
  1290 00000A83 8B97[1492]              					mov		dx,[ObjectYRot+bx]
  1291 00000A87 8916[3394]              					mov		[STY],dx
  1292 00000A8B 8B97[1493]              					mov		dx,[ObjectZRot+bx]
  1293 00000A8F 8916[3594]              					mov		[STZ],dx
  1294 00000A93 8B97[148F]              					mov		dx,[ObjectXPos+bx]
  1295 00000A97 8916[2094]              					mov		[XST],dx
  1296 00000A9B 8B97[148E]              					mov		dx,[ObjectYPos+bx]	
  1297 00000A9F 8916[2294]              					mov		[YST],dx	
  1298 00000AA3 8A87[1490]              					mov		al,[ObjectClipCode+bx]
  1299                                  	
  1300 00000AA7 3E8A5C01                					mov		bl,[ds:si+1]
  1301 00000AAB 00DB                    					add		bl,bl
  1302 00000AAD 8B97[1491]              					mov		dx,[ObjectXRot+bx]
  1303 00000AB1 8916[3794]              					mov		[ENX],dx
  1304 00000AB5 8B97[1492]              					mov		dx,[ObjectYRot+bx]
  1305 00000AB9 8916[3994]              					mov		[ENY],dx
  1306 00000ABD 8B97[1493]              					mov		dx,[ObjectZRot+bx]
  1307 00000AC1 8916[3B94]              					mov		[ENZ],dx	
  1308 00000AC5 8B97[148F]              					mov		dx,[ObjectXPos+bx]
  1309 00000AC9 8916[2494]              					mov		[XEN],dx
  1310 00000ACD 8B97[148E]              					mov		dx,[ObjectYPos+bx]
  1311 00000AD1 8916[2694]              					mov		[YEN],dx
  1312 00000AD5 8AA7[1490]              					mov		ah,[ObjectClipCode+bx]
  1313                                  
  1314 00000AD9 A3[2894]                					mov		[CCST],ax
  1315                                  	
  1316 00000ADC A1[2894]                .line_clip_loop:	mov		ax,[CCST]
  1317 00000ADF 88C3                    					mov		bl,al			; start cc
  1318 00000AE1 20E0                    					and		al,ah			; and with end cc
  1319 00000AE3 7585                    					jnz		.line_off_screen		; both off same side
  1320                                  	
  1321 00000AE5 08E3                    					or		bl,ah			; or with end cc
  1322 00000AE7 746F                    					jz		.clip_draw_test		; all on so draw line
  1323                                  
  1324 00000AE9 F6C310                  .clip_behind_test:	test	bl,BEHIND_CC	; test if either point is off (al=al or ah)
  1325 00000AEC 7412                    					jz		.clip_left_test
  1326 00000AEE E87A00                  					call	LineClipBehind
  1327                                  
  1328 00000AF1 A1[2894]                					mov		ax,[CCST]
  1329 00000AF4 88C3                    					mov		bl,al			; start cc
  1330 00000AF6 20E0                    					and		al,ah			; and with end cc
  1331 00000AF8 0F856EFF                					jnz		.line_off_screen		; both off same side
  1332                                  
  1333 00000AFC 08E3                    					or		bl,ah			; or with end cc
  1334 00000AFE 7458                    					jz		.clip_draw_test		; all on so draw line
  1335                                  	
  1336 00000B00 F6C304                  .clip_left_test:	test	bl,LEFT_CC
  1337 00000B03 7412                    					jz		.clip_right_test
  1338 00000B05 E83D01                  					call	LineClipLeft
  1339 00000B08 A1[2894]                					mov		ax,[CCST]
  1340 00000B0B 88C3                    					mov		bl,al			; start cc
  1341 00000B0D 20E0                    					and		al,ah			; and with end cc
  1342 00000B0F 0F8557FF                					jnz		.line_off_screen		; both off same side
  1343                                  
  1344 00000B13 08E3                    					or		bl,ah			; or with end cc
  1345 00000B15 7441                    					jz		.clip_draw_test		; all on so draw line
  1346                                  		
  1347 00000B17 F6C308                  .clip_right_test:	test	bl,RIGHT_CC
  1348 00000B1A 7412                    					jz		.clip_top_test
  1349 00000B1C E88301                  					call	LineClipRight
  1350 00000B1F A1[2894]                					mov		ax,[CCST]
  1351 00000B22 88C3                    					mov		bl,al			; start cc
  1352 00000B24 20E0                    					and		al,ah			; and with end cc
  1353 00000B26 0F8540FF                					jnz		.line_off_screen		; both off same side
  1354                                  	
  1355 00000B2A 08E3                    					or		bl,ah			; or with end cc
  1356 00000B2C 742A                    					jz		.clip_draw_test		; all on so draw line
  1357                                  		
  1358                                  
  1359 00000B2E F6C301                  .clip_top_test:		test	bl,TOP_CC
  1360 00000B31 7412                    					jz		.clip_bottom_test
  1361 00000B33 E8B200                  					call	LineClipTop
  1362 00000B36 A1[2894]                					mov		ax,[CCST]
  1363 00000B39 88C3                    					mov		bl,al			; start cc
  1364 00000B3B 20E0                    					and		al,ah			; and with end cc
  1365 00000B3D 0F8529FF                					jnz		.line_off_screen		; both off same side
  1366                                  
  1367 00000B41 08E3                    					or		bl,ah			; or with end cc
  1368 00000B43 7413                    					jz		.clip_draw_test		; all on so draw line
  1369                                  
  1370 00000B45 F6C302                  .clip_bottom_test:	test	bl,BOTTOM_CC
  1371 00000B48 7492                    					jz		.line_clip_loop
  1372 00000B4A E8B401                  					call	LineClipBottom
  1373 00000B4D A1[2894]                					mov		ax,[CCST]
  1374 00000B50 88C3                    					mov		bl,al			; start cc
  1375 00000B52 20E0                    					and		al,ah			; and with end cc
  1376 00000B54 0F8512FF                					jnz		.line_off_screen		; both off same side
  1377                                  
  1378 00000B58 8B0E[2294]              .clip_draw_test:	mov		cx,[YST]
  1379 00000B5C 8B16[2094]              					mov		dx,[XST]
  1380 00000B60 8B2E[2694]              					mov		bp,[YEN]
  1381 00000B64 8B36[2494]              					mov		si,[XEN]
  1382 00000B68 E9FCFE                  					jmp		.draw_clipped_line
  1383                                  	
  1384 00000B6B F6C410                  LineClipBehind:	test	ah,BEHIND_CC
  1385 00000B6E 743C                    				jz		.behind_sback_efront
  1386 00000B70 A1[3194]                .behind_sfront_eback:	mov		ax,[STX]
  1387 00000B73 8B0E[3594]              						mov		cx,[STZ]
  1388 00000B77 8B3E[3B94]              						mov		di,[ENZ]
  1389 00000B7B 8B1E[3794]              						mov		bx,[ENX]
  1390 00000B7F E8DC01                  						call	ClipBehind
  1391 00000B82 57                      						push	di
  1392                                  	
  1393 00000B83 A1[3394]                						mov		ax,[STY]
  1394 00000B86 8B0E[3594]              						mov		cx,[STZ]
  1395 00000B8A 8B3E[3B94]              						mov		di,[ENZ]
  1396 00000B8E 8B1E[3994]              						mov		bx,[ENY]
  1397 00000B92 E8C901                  						call	ClipBehind
  1398                                  
  1399 00000B95 89F8                    						mov		ax,di
  1400 00000B97 5D                      						pop		bp
  1401                                  
  1402 00000B98 31C9                    						xor		cx,cx
  1403 00000B9A E86203                  						call	Perspective
  1404 00000B9D A3[2694]                						mov		[YEN],ax 
  1405 00000BA0 892E[2494]              						mov		[XEN],bp
  1406 00000BA4 E83303                  						call	ClassifyPoint
  1407 00000BA7 8816[2994]              						mov		[CCEN],dl
  1408 00000BAB C3                      						ret
  1409 00000BAC A1[3794]                .behind_sback_efront:	mov		ax,[ENX]
  1410 00000BAF 8B0E[3B94]              						mov		cx,[ENZ]
  1411 00000BB3 8B3E[3594]              						mov		di,[STZ]
  1412 00000BB7 8B1E[3194]              						mov		bx,[STX]
  1413 00000BBB E8A001                  						call	ClipBehind
  1414 00000BBE 57                      						push	di
  1415                                  	
  1416 00000BBF A1[3994]                						mov		ax,[ENY]
  1417 00000BC2 8B0E[3B94]              						mov		cx,[ENZ]
  1418 00000BC6 8B3E[3594]              						mov		di,[STZ]
  1419 00000BCA 8B1E[3394]              						mov		bx,[STY]
  1420 00000BCE E88D01                  						call	ClipBehind
  1421                                  
  1422 00000BD1 89F8                    						mov		ax,di
  1423 00000BD3 5D                      						pop		bp
  1424                                  		
  1425 00000BD4 31C9                    						xor		cx,cx
  1426 00000BD6 E82603                  						call	Perspective
  1427 00000BD9 A3[2294]                						mov		[YST],ax 
  1428 00000BDC 892E[2094]              						mov		[XST],bp 
  1429 00000BE0 E8F702                  						call	ClassifyPoint
  1430 00000BE3 8816[2894]              						mov		[CCST],dl
  1431 00000BE7 C3                      						ret
  1432                                  	
  1433 00000BE8 F6C401                  LineClipTop:	test	ah,TOP_CC
  1434 00000BEB 742C                    				jz		.top_p1on_p2off
  1435 00000BED A1[2294]                .top_p1off_p2on:	mov		ax,[YST]
  1436 00000BF0 8B0E[2094]              					mov		cx,[XST]
  1437 00000BF4 8B3E[2494]              					mov		di,[XEN]
  1438 00000BF8 8B1E[2694]              					mov		bx,[YEN]
  1439 00000BFC E86E01                  					call	ClipTop
  1440                                  
  1441 00000BFF 893E[2694]              					mov		[YEN],di
  1442 00000C03 BB0000                  					mov		bx,TOP_EDGE
  1443 00000C06 891E[2494]              					mov		[XEN],bx
  1444                                  
  1445 00000C0A A1[2694]                					mov		ax,[YEN]
  1446 00000C0D 8B2E[2494]              					mov		bp,[XEN]
  1447 00000C11 E8C602                  					call	ClassifyPoint
  1448 00000C14 8816[2994]              					mov		[CCEN],dl
  1449 00000C18 C3                      					ret
  1450 00000C19 A1[2694]                .top_p1on_p2off:	mov		ax,[YEN]
  1451 00000C1C 8B0E[2494]              					mov		cx,[XEN]
  1452 00000C20 8B3E[2094]              					mov		di,[XST]
  1453 00000C24 8B1E[2294]              					mov		bx,[YST]
  1454 00000C28 E84201                  					call	ClipTop
  1455                                  
  1456 00000C2B 893E[2294]              					mov		[YST],di
  1457 00000C2F BB0000                  					mov		bx,TOP_EDGE
  1458 00000C32 891E[2094]              					mov		[XST],bx
  1459                                  
  1460 00000C36 A1[2294]                					mov		ax,[YST]
  1461 00000C39 8B2E[2094]              					mov		bp,[XST]
  1462 00000C3D E89A02                  					call	ClassifyPoint
  1463 00000C40 8816[2894]              					mov		[CCST],dl
  1464 00000C44 C3                      					ret
  1465                                  	
  1466 00000C45 F6C404                  LineClipLeft:	test	ah,LEFT_CC	; end clip code is off left?
  1467 00000C48 742C                    				jz		.left_p1on_p2off
  1468 00000C4A 8B0E[2294]              .left_p1off_p2on:	mov		cx,[YST]
  1469 00000C4E A1[2094]                					mov		ax,[XST]
  1470 00000C51 8B3E[2494]              					mov		di,[XEN]
  1471 00000C55 8B1E[2694]              					mov		bx,[YEN]	
  1472 00000C59 E82001                  					call	ClipLeft 	; ax returned 
  1473                                  	
  1474 00000C5C 891E[2494]              					mov		[XEN],bx
  1475 00000C60 BB0000                  					mov		bx,LEFT_EDGE
  1476 00000C63 891E[2694]              					mov		[YEN],bx
  1477                                  		
  1478 00000C67 A1[2694]                					mov		ax,[YEN]
  1479 00000C6A 8B2E[2494]              					mov		bp,[XEN]
  1480 00000C6E E86902                  					call	ClassifyPoint
  1481 00000C71 8816[2994]              					mov		[CCEN],dl
  1482 00000C75 C3                      					ret
  1483 00000C76 8B0E[2694]              .left_p1on_p2off:	mov		cx,[YEN]
  1484 00000C7A A1[2494]                					mov		ax,[XEN]
  1485 00000C7D 8B3E[2094]              					mov		di,[XST]
  1486 00000C81 8B1E[2294]              					mov		bx,[YST]
  1487 00000C85 E8F400                  					call	ClipLeft
  1488                                  
  1489 00000C88 891E[2094]              					mov		[XST],bx
  1490 00000C8C BB0000                  					mov		bx,LEFT_EDGE
  1491 00000C8F 891E[2294]              					mov		[YST],bx
  1492                                  
  1493 00000C93 A1[2294]                					mov		ax,[YST]
  1494 00000C96 8B2E[2094]              					mov		bp,[XST]
  1495 00000C9A E83D02                  					call	ClassifyPoint
  1496 00000C9D 8816[2894]              					mov		[CCST],dl
  1497 00000CA1 C3                      					ret
  1498                                  
  1499 00000CA2 F6C408                  LineClipRight:	test	ah,RIGHT_CC
  1500 00000CA5 742D                    				jz		.right_p1on_p2off
  1501 00000CA7 8B2E[2294]              .right_p1off_p2on:	mov		bp,[YST]
  1502 00000CAB 8B16[2094]              					mov		dx,[XST]
  1503 00000CAF 8B3E[2494]              					mov		di,[XEN]
  1504 00000CB3 8B1E[2694]              					mov		bx,[YEN]	
  1505 00000CB7 E8E300                  					call	ClipRight
  1506                                  
  1507 00000CBA 892E[2494]              					mov		[XEN],bp
  1508 00000CBE BB3F01                  					mov		bx,RIGHT_EDGE
  1509 00000CC1 891E[2694]              					mov		[YEN],bx
  1510                                  	
  1511 00000CC5 A1[2694]                					mov		ax,[YEN]
  1512 00000CC8 8B2E[2494]              					mov		bp,[XEN]
  1513 00000CCC E80B02                  					call	ClassifyPoint
  1514 00000CCF 8816[2994]              					mov		[CCEN],dl		
  1515 00000CD3 C3                      					ret
  1516                                  
  1517 00000CD4 8B2E[2694]              .right_p1on_p2off:	mov		bp,[YEN]
  1518 00000CD8 8B16[2494]              					mov		dx,[XEN]
  1519 00000CDC 8B3E[2094]              					mov		di,[XST]
  1520 00000CE0 8B1E[2294]              					mov		bx,[YST]	
  1521 00000CE4 E8B600                  					call	ClipRight
  1522                                  
  1523 00000CE7 892E[2094]              					mov		[XST],bp
  1524 00000CEB BB3F01                  					mov		bx,RIGHT_EDGE
  1525 00000CEE 891E[2294]              					mov		[YST],bx
  1526                                  
  1527 00000CF2 A1[2294]                					mov		ax,[YST]
  1528 00000CF5 8B2E[2094]              					mov		bp,[XST]
  1529 00000CF9 E8DE01                  					call	ClassifyPoint
  1530 00000CFC 8816[2894]              					mov		[CCST],dl
  1531 00000D00 C3                      					ret
  1532                                  	
  1533 00000D01 F6C402                  LineClipBottom:	test	ah,BOTTOM_CC
  1534 00000D04 742C                    				jz		.bottom_p1on_p2off
  1535 00000D06 A1[2294]                .bottom_p1off_p2on:	mov		ax,[YST]
  1536 00000D09 8B16[2094]              					mov		dx,[XST]
  1537 00000D0D 8B3E[2494]              					mov		di,[XEN]
  1538 00000D11 8B1E[2694]              					mov		bx,[YEN]	
  1539 00000D15 E87300                  					call	ClipBottom
  1540                                  
  1541 00000D18 890E[2694]              					mov		[YEN],cx
  1542 00000D1C BBC700                  					mov		bx,BOTTOM_EDGE
  1543 00000D1F 891E[2494]              					mov		[XEN],bx
  1544                                  
  1545 00000D23 A1[2694]                					mov		ax,[YEN]
  1546 00000D26 8B2E[2494]              					mov		bp,[XEN]
  1547 00000D2A E8AD01                  					call	ClassifyPoint
  1548 00000D2D 8816[2994]              					mov		[CCEN],dl		
  1549 00000D31 C3                      					ret
  1550 00000D32 A1[2694]                .bottom_p1on_p2off:	mov		ax,[YEN]
  1551 00000D35 8B16[2494]              					mov		dx,[XEN]
  1552 00000D39 8B3E[2094]              					mov		di,[XST]
  1553 00000D3D 8B1E[2294]              					mov		bx,[YST]	
  1554 00000D41 E84700                  					call	ClipBottom
  1555                                  
  1556 00000D44 890E[2294]              					mov		[YST],cx
  1557 00000D48 BBC700                  					mov		bx,BOTTOM_EDGE
  1558 00000D4B 891E[2094]              					mov		[XST],bx
  1559                                  
  1560 00000D4F A1[2294]                					mov		ax,[YST]
  1561 00000D52 8B2E[2094]              					mov		bp,[XST]
  1562 00000D56 E88101                  					call	ClassifyPoint
  1563 00000D59 8816[2894]              					mov		[CCST],dl
  1564 00000D5D C3                      					ret
  1565                                  	
  1566 00000D5E 89CD                    ClipBehind:	mov		bp,cx	; backup pon.z (onh)
  1567 00000D60 29F9                    			sub		cx,di 	; pon.z-poff.z (dh)
  1568                                  
  1569 00000D62 89C7                    			mov		di,ax	; backup pon.x (onv)
  1570 00000D64 29D8                    			sub		ax,bx	; pon.x-poff.x (dv)
  1571                                  
  1572 00000D66 F7ED                    			imul	bp	; pon.x-poff.x (dx) * pon.z (onh) 
  1573 00000D68 F7F9                    			idiv	cx	; 	/ pon.z-poff.z (dh) (pon.z+poff.z)
  1574                                  
  1575 00000D6A 29C7                    			sub	di,ax
  1576 00000D6C C3                      			ret
  1577                                  	
  1578                                  ; input
  1579                                  ; ax = x on screen ; pon.x = +ve
  1580                                  ; bx = x off screen ; poff.x = -ve
  1581                                  ; dx = y on screen ; pon.y
  1582                                  ; di = y off screen ; poff.y
  1583                                  ; output
  1584                                  ; ax = clippedy
  1585                                  
  1586 00000D6D 89CD                    ClipTop:	mov		bp,cx	; backup pon.x (onh)
  1587 00000D6F 29F9                    			sub		cx,di 	; pon.x-poff.x (dh)
  1588                                  
  1589 00000D71 89C7                    			mov		di,ax	; backup pon.y (onv)
  1590 00000D73 29D8                    			sub		ax,bx	; pon.y-poff.y (dv)
  1591                                  
  1592 00000D75 F7ED                    			imul	bp	; pon.y-poff.y (dv) * pon.x (onh) 
  1593 00000D77 F7F9                    			idiv	cx	; 	/ pon.x-poff.x (dh) (pon.x+poff.x)
  1594                                  
  1595 00000D79 29C7                    			sub		di,ax
  1596 00000D7B C3                      			ret
  1597                                  
  1598 00000D7C 89CD                    ClipLeft:	mov		bp,cx	; backup pon.x (onh)
  1599 00000D7E 29D9                    			sub		cx,bx 	; pon.x-poff.x (dh)
  1600                                  
  1601 00000D80 89C3                    			mov		bx,ax	; backup pon.y (onv)
  1602 00000D82 29F8                    			sub		ax,di	; pon.y-poff.y (dv)
  1603                                  
  1604 00000D84 F7ED                    			imul	bp	; pon.y-poff.y (dv) * pon.x (onh) 
  1605 00000D86 F7F9                    			idiv	cx	; 	/ pon.x-poff.x (dh) (pon.x+poff.x)
  1606                                  
  1607 00000D88 29C3                    			sub		bx,ax
  1608 00000D8A C3                      			ret
  1609                                  
  1610 00000D8B BDC700                  ClipBottom:	mov		bp,BOTTOM_EDGE
  1611 00000D8E 29D5                    			sub		bp,dx	; rightedge - pon.x (onh)
  1612 00000D90 29D7                    			sub		di,dx	; poff.x - pon.x (dh)
  1613                                  
  1614 00000D92 89C1                    			mov		cx,ax
  1615 00000D94 29D8                    			sub		ax,bx	; pon.y-poff.y (dv)
  1616                                  
  1617 00000D96 F7ED                    			imul	bp
  1618 00000D98 F7FF                    			idiv	di
  1619                                  	
  1620 00000D9A 29C1                    			sub		cx,ax
  1621 00000D9C C3                      			ret
  1622                                  
  1623 00000D9D B83F01                  ClipRight:	mov		ax,RIGHT_EDGE
  1624 00000DA0 29E8                    			sub		ax,bp	; rightedge - pon.x (onh)
  1625 00000DA2 29EB                    			sub		bx,bp	; poff.x - pon.x (dh)
  1626                                  	
  1627 00000DA4 89D5                    			mov		bp,dx
  1628 00000DA6 29FA                    			sub		dx,di	; pon.y-poff.y (dv)
  1629                                  
  1630 00000DA8 F7EA                    			imul	dx
  1631 00000DAA F7FB                    			idiv	bx
  1632                                  
  1633 00000DAC 29C5                    			sub		bp,ax
  1634 00000DAE C3                      			ret
  1635                                  	
  1636 00000DAF 80FF00                  GetSin256:	cmp		bh,0
  1637 00000DB2 740A                    			je		.s000090
  1638 00000DB4 80FF01                  .s090180:	cmp		bh,1
  1639 00000DB7 750A                    			jne		.s180270
  1640 00000DB9 30FF                    				xor		bh,bh
  1641 00000DBB 80F3FF                  				xor		bl,255
  1642 00000DBE 8A87[B41E]              .s000090		mov		al,[sintab+bx]
  1643 00000DC2 C3                      				ret
  1644 00000DC3 80FF02                  .s180270:	cmp		bh,2
  1645 00000DC6 7509                    			jne		.s270000
  1646 00000DC8 30FF                    				xor		bh,bh
  1647 00000DCA 8A87[B41E]              				mov		al,[sintab+bx]
  1648 00000DCE F6D8                    				neg		al
  1649 00000DD0 C3                      				ret
  1650 00000DD1 30FF                    .s270000:	xor		bh,bh
  1651 00000DD3 80F3FF                  			xor		bl,255
  1652 00000DD6 8A87[B41E]              			mov		al,[sintab+bx]
  1653 00000DDA F6D8                    			neg		al
  1654 00000DDC C3                      			ret
  1655                                  
  1656 00000DDD 89EB                    SinCos:		mov		bx,bp
  1657 00000DDF E8CDFF                  			call	GetSin256
  1658 00000DE2 98                      			cbw
  1659 00000DE3 89EB                    			mov		bx,bp
  1660 00000DE5 01C0                    			add		ax,ax
  1661 00000DE7 89C5                    			mov		bp,ax
  1662 00000DE9 FEC7                    			inc		bh
  1663 00000DEB 80E703                  			and		bh,3
  1664 00000DEE E8BEFF                  			call	GetSin256
  1665 00000DF1 98                      			cbw
  1666 00000DF2 01C0                    			add		ax,ax
  1667 00000DF4 C3                      			ret
  1668                                  
  1669 00000DF5 8B2E[2A94]              RotationMatrix:	mov		bp,[XAngle]
  1670 00000DF9 E8E1FF                  				call	SinCos
  1671 00000DFC 892E[1494]              				mov		[SinX],bp
  1672 00000E00 A3[1694]                				mov		[CosX],ax
  1673                                  
  1674 00000E03 8B2E[2C94]              				mov		bp,[YAngle]
  1675 00000E07 E8D3FF                  				call	SinCos
  1676 00000E0A 892E[1894]              				mov		[SinY],bp
  1677 00000E0E A3[1A94]                				mov		[CosY],ax
  1678                                  	
  1679 00000E11 8B2E[2E94]              				mov		bp,[ZAngle]
  1680 00000E15 E8C5FF                  				call	SinCos
  1681 00000E18 892E[1C94]              				mov		[SinZ],bp
  1682 00000E1C A3[1E94]                				mov		[CosZ],ax
  1683                                  
  1684 00000E1F C3                      				ret
  1685                                  
  1686                                  ; cos(x) * cos(z) 										= mz3 ?
  1687                                  ; sin(x)												= my3 ?
  1688                                  ; cos(x) * -sin(z)										= mx3 ?
  1689                                   
  1690                                  ; (cos(y) * -sin(x) * cos(z)) + (sin(y) * sin(z)),		= mz2 ?
  1691                                  ; cos(y) * cos(x),										= my2 ?
  1692                                  ; (cos(y) * -sin(x) * -sin(z)) + (sin(y) * cos(z))		= mx2 ?
  1693                                  
  1694                                  ; (-sin(y) * -sin(x) * cos(z)) + (cos(y) * sin(z))		= mz1 ?
  1695                                  ; -sin(y) * cos(x) 										= my1 ?
  1696                                  ; (-sin(y) * -sin(x) * -sin(z)) + (cos(y) * cos(z)) 	= mx1 ?
  1697                                  
  1698                                  
  1699                                  ; mx1= (sin(gam)*sin(bet)*sin(alp)) + (cos(gam)*cos(alp))
  1700                                  ; my1= (-cos(bet))*sin(alp)
  1701                                  ; mz1= (sin(gam)*cos(alp)) - (cos(gam)*sin(bet)*sin(alp))
  1702                                  
  1703                                  ; mx2= (cos(gam)*sin(alp)) - (sin(gam)*sin(bet)*cos(alp))
  1704                                  ; my2= (cos(bet)*cos(alp))
  1705                                  ; mz2= ((-cos(gam))*sin(bet)*cos(alp)) - (sin(gam)*sin(alp))
  1706                                  
  1707                                  ; mx3 = cos(bet)*sin(gam)
  1708                                  ; my3 = sin(bet)
  1709                                  ; mz3 = cos(gam)*cos(bet)
  1710                                  
  1711                                  ; x"'=x*mx1 + y*my1 + z*mz1
  1712                                  ; y"'=x*mx2 + y*my2 + z*mz2
  1713                                  ; z"'=x*mx3 + y*my3 + z*mz3.
  1714                                  
  1715                                  ; alp=X
  1716                                  ; bet=Y
  1717                                  ; gam=Z
  1718                                  
  1719                                  ; mx1= (SinZ*SinY*SinX) + (CosZ*CosX)
  1720                                  ; #1 = SinZ * SinY
  1721                                  ; #2 = #1 * SinX
  1722                                  ; #3 = CosZ * CosX
  1723                                  ; #4 = #2 + #3
  1724                                  
  1725                                  ; my1= (-CosY)*SinX
  1726                                  ; #1 = -CosY
  1727                                  ; #2 = #1 * SinX
  1728                                  
  1729                                  ; mz1= (SinZ*CosX) - (CosZ*SinY*SinX)
  1730                                  ; #1 = SinZ * CosX
  1731                                  ; #2 = CosZ * SinY
  1732                                  ; #3 = #2 * SinX
  1733                                  ; #4 = #1 - #3
  1734                                  
  1735                                  ; mx2= (CosZ*SinX) - (SinZ*SinY*CosX)
  1736                                  ; #1 = CosZ * SinX
  1737                                  ; #2 = SinZ * SinY
  1738                                  ; #3 = #2 * CosX
  1739                                  ; #4 = #1 - #2
  1740                                  
  1741                                  ; my2= (CosY*CosX)
  1742                                  ; #1 = CosY * CosX
  1743                                  
  1744                                  ; mz2= ((-CosZ)*SinY*CosX) - (SinZ*SinX)
  1745                                  ; #1 = -CosZ
  1746                                  ; #2 = #1 * SinY
  1747                                  ; #3 = #2 * CosX
  1748                                  ; #4 = Sinz * SinX
  1749                                  ; #5 = #3 - #4
  1750                                  
  1751                                  ; mx3 = CosY*SinZ
  1752                                  ; #1 = CosY * SinZ
  1753                                  
  1754                                  ; my3 = SinY
  1755                                  ; #1 = SinY
  1756                                  
  1757                                  ; mz3 = CosZ*CosY
  1758                                  ; #1 = CosZ * CosY
  1759                                  
  1760 00000E20 8B2E[2A94]              BuildRotateMatrix:	mov		bp,[XAngle]
  1761 00000E24 E8B6FF                  					call	SinCos
  1762 00000E27 892E[1494]              					mov		[SinX],bp
  1763 00000E2B A3[1694]                					mov		[CosX],ax
  1764                                  
  1765 00000E2E 8B2E[2C94]              					mov		bp,[YAngle]
  1766 00000E32 E8A8FF                  					call	SinCos
  1767 00000E35 892E[1894]              					mov		[SinY],bp
  1768 00000E39 A3[1A94]                					mov		[CosY],ax
  1769                                  	
  1770 00000E3C 8B2E[2E94]              					mov		bp,[ZAngle]
  1771 00000E40 E89AFF                  					call	SinCos
  1772 00000E43 892E[1C94]              					mov		[SinZ],bp
  1773 00000E47 A3[1E94]                					mov		[CosZ],ax
  1774 00000E4A C3                      					ret
  1775                                  	
  1776                                  Rotate:
  1777 00000E4B 06                      	push es
  1778                                  ;rotate around x-axis:
  1779                                  ;	y'' = y'*cos(C) + z'*sin(C)
  1780                                  ;	z'' = y'*sin(C) - z'*cos(C)
  1781                                  	
  1782                                  RotateX:
  1783 00000E4C 8EC0                    	mov	es,ax	; y
  1784 00000E4E F72E[1694]              	imul	word [CosX] ; y*cos(x)
  1785 00000E52 88E3                    	mov	bl,ah
  1786 00000E54 88D7                    	mov	bh,dl
  1787                                  
  1788 00000E56 89E8                    	mov	ax,bp	; z
  1789 00000E58 F72E[1494]              	imul	word [SinX]	; z*sin(x)
  1790 00000E5C 88E0                    	mov	al,ah
  1791 00000E5E 88D4                    	mov	ah,dl
  1792 00000E60 01C3                    	add		bx,ax
  1793                                  
  1794 00000E62 8CC0                    	mov	ax,es	; y
  1795 00000E64 8EC3                    	mov	es,bx
  1796 00000E66 F72E[1494]              	imul	word [SinX]	 ; y*sin(x)
  1797 00000E6A 88E3                    	mov	bl,ah
  1798 00000E6C 88D7                    	mov	bh,dl
  1799                                  
  1800 00000E6E 89E8                    	mov	ax,bp	; z
  1801 00000E70 F72E[1694]              	imul	word [CosX]	; z*cos(x)
  1802 00000E74 88E0                    	mov	al,ah
  1803 00000E76 88D4                    	mov	ah,dl
  1804                                  
  1805 00000E78 29C3                    	sub	bx,ax
  1806 00000E7A 89DD                    	mov	bp,bx
  1807                                  
  1808                                  ; rotate around y-axis:
  1809                                  ;	x'' = x'*cos(B) + z*sin(B)
  1810                                  ;	z'  = x'*sin(B) - z*cos(B)
  1811                                  
  1812                                  RotateY:
  1813 00000E7C 89C8                    	mov	ax,cx	; x
  1814 00000E7E F72E[1A94]              	imul	word [CosY]	 ; x*cos(y)
  1815 00000E82 88E3                    	mov	bl,ah
  1816 00000E84 88D7                    	mov	bh,dl
  1817                                  
  1818 00000E86 89E8                    	mov	ax,bp	; z
  1819 00000E88 F72E[1894]              	imul	word [SinY]	; z*sin(y)
  1820 00000E8C 88E0                    	mov	al,ah
  1821 00000E8E 88D4                    	mov	ah,dl
  1822 00000E90 01C3                    	add	bx,ax
  1823                                  
  1824 00000E92 89C8                    	mov	ax,cx	; x
  1825 00000E94 89D9                    	mov	cx,bx
  1826 00000E96 F72E[1894]              	imul	word [SinY]	; x*sin(y)
  1827 00000E9A 88E3                    	mov	bl,ah
  1828 00000E9C 88D7                    	mov	bh,dl
  1829                                  
  1830 00000E9E 89E8                    	mov	ax,bp	; z
  1831 00000EA0 F72E[1A94]              	imul	word [CosY]	; z*cos(y)
  1832 00000EA4 88E0                    	mov	al,ah
  1833 00000EA6 88D4                    	mov	ah,dl
  1834                                  
  1835 00000EA8 29C3                    	sub	bx,ax
  1836 00000EAA 89DD                    	mov	bp,bx
  1837                                  
  1838                                  ;rotate around z-axis:
  1839                                  ;	x'  = x*cos(A) + y*sin(A)
  1840                                  ;	y'  = x*sin(A) - y*cos(A)
  1841                                  
  1842                                  RotateZ:
  1843 00000EAC 89C8                    	mov	ax,cx	; x
  1844 00000EAE F72E[1E94]              	imul	word [CosZ] 	; x*cos(z)
  1845 00000EB2 88E3                    	mov	bl,ah
  1846 00000EB4 88D7                    	mov	bh,dl
  1847                                  
  1848 00000EB6 8CC0                    	mov	ax,es	; y
  1849 00000EB8 F72E[1C94]              	imul	word [SinZ]; y*sin(z)
  1850 00000EBC 88E0                    	mov	al,ah
  1851 00000EBE 88D4                    	mov	ah,dl
  1852 00000EC0 01C3                    	add		bx,ax
  1853                                  
  1854 00000EC2 89C8                    	mov	ax,cx 	; x
  1855 00000EC4 F72E[1C94]              	imul 	word [SinZ]	; x*sin(z)
  1856 00000EC8 88E1                    	mov	cl,ah
  1857 00000ECA 88D5                    	mov	ch,dl
  1858                                  
  1859 00000ECC 8CC0                    	mov	ax,es	; y
  1860 00000ECE F72E[1E94]              	imul	word [CosZ]	; y*cos(z)
  1861 00000ED2 88E0                    	mov	al,ah
  1862 00000ED4 88D4                    	mov	ah,dl
  1863                                  
  1864 00000ED6 29C1                    	sub	cx,ax
  1865                                  
  1866                                  
  1867 00000ED8 07                      	pop es
  1868                                  
  1869 00000ED9 C3                      	ret
  1870                                  
  1871 00000EDA 30D2                    ClassifyPoint:	xor		dl,dl	; in = ax/bp	; out = dl	; clear clipcodes
  1872                                  
  1873 00000EDC 83FD00                  				cmp		bp,TOP_EDGE
  1874 00000EDF 7D04                    				jge		.right_test
  1875 00000EE1 B201                    					mov		dl,TOP_CC
  1876 00000EE3 EB08                    					jmp		.hor_test_end
  1877                                  
  1878 00000EE5 81FDC700                .right_test:	cmp		bp,BOTTOM_EDGE
  1879 00000EE9 7E02                    				jle		.hor_test_end
  1880 00000EEB B202                    					mov		dl,BOTTOM_CC
  1881                                  
  1882 00000EED 83F800                  .hor_test_end:	cmp		ax,LEFT_EDGE
  1883 00000EF0 7D04                    				jge		.bottom_test
  1884 00000EF2 80CA04                  					or		dl,LEFT_CC
  1885 00000EF5 C3                      					ret
  1886 00000EF6 3D3F01                  .bottom_test:	cmp		ax,RIGHT_EDGE
  1887 00000EF9 7E03                    				jle		.ver_test_end
  1888 00000EFB 80CA08                  					or		dl,RIGHT_CC 			
  1889 00000EFE C3                      .ver_test_end:	ret
  1890                                  
  1891 00000EFF FEC5                    Perspective:	inc		ch	; in - bp = z / ax = x  dx = y	; z +256
  1892                                  		
  1893 00000F01 99                      				cwd
  1894 00000F02 88E2                    				mov		dl,ah
  1895 00000F04 88C4                    				mov		ah,al		; dx:ax = ypos *256 = ypos *256	
  1896 00000F06 F7F9                    				idiv	cx 		; ax = dx:ax = ypos*256 / zpos+256
  1897 00000F08 83C064                  				add		ax,MIDDLE_Y	; ypos
  1898                                  	
  1899 00000F0B 95                      				xchg	ax,bp
  1900                                  
  1901 00000F0C 99                      				cwd
  1902 00000F0D 88E2                    				mov		dl,ah
  1903 00000F0F 88C4                    				mov		ah,al		; dx:ax = xpos *256 = xpos *256
  1904 00000F11 F7F9                    				idiv	cx 		; ax = dx:ax = xpos*256 / zpos+256
  1905 00000F13 05A000                  				add		ax,MIDDLE_X	; xpos
  1906                                  	
  1907 00000F16 C3                      				ret			; output bl=clip codes / ax=xpos / bp=ypos
  1908                                  	
  1909 00000F17 89FE                    HexChar:	mov		si,di
  1910 00000F19 88C3                    			mov		bl,al
  1911 00000F1B D0EB                    			shr		bl,1
  1912 00000F1D D0EB                    			shr		bl,1
  1913 00000F1F D0EB                    			shr		bl,1
  1914 00000F21 D0EB                    			shr		bl,1
  1915 00000F23 83E30F                  			and		bx,15
  1916 00000F26 8AA7[AC1B]              			mov		ah,[Hex0+bx]
  1917 00000F2A 268825                  			mov		[es:di],ah
  1918 00000F2D 81C70020                			add		di,8192
  1919 00000F31 8AA7[BC1B]              			mov		ah,[Hex1+bx]
  1920 00000F35 268825                  			mov		[es:di],ah
  1921 00000F38 81EFB01F                			sub		di,8192-80
  1922 00000F3C 8AA7[CC1B]              			mov		ah,[Hex2+bx]
  1923 00000F40 268825                  			mov		[es:di],ah
  1924 00000F43 81C70020                			add		di,8192
  1925 00000F47 8AA7[DC1B]              			mov		ah,[Hex3+bx]
  1926 00000F4B 268825                  			mov		[es:di],ah
  1927 00000F4E 81EFB01F                			sub		di,8192-80
  1928 00000F52 8AA7[EC1B]              			mov		ah,[Hex4+bx]
  1929 00000F56 268825                  			mov		[es:di],ah
  1930                                  
  1931 00000F59 89F7                    			mov		di,si
  1932 00000F5B 47                      			inc		di
  1933                                  
  1934 00000F5C 88C3                    			mov		bl,al
  1935 00000F5E 80E30F                  			and		bl,15
  1936 00000F61 8A87[AC1B]              			mov		al,[Hex0+bx]
  1937 00000F65 268805                  			mov		[es:di],al
  1938 00000F68 81C70020                			add		di,8192
  1939 00000F6C 8A87[BC1B]              			mov		al,[Hex1+bx]
  1940 00000F70 268805                  			mov		[es:di],al
  1941 00000F73 81EFB01F                			sub		di,8192-80
  1942 00000F77 8A87[CC1B]              			mov		al,[Hex2+bx]
  1943 00000F7B 268805                  			mov		[es:di],al
  1944 00000F7E 81C70020                			add		di,8192
  1945 00000F82 8A87[DC1B]              			mov		al,[Hex3+bx]
  1946 00000F86 268805                  			mov		[es:di],al
  1947 00000F89 81EFB01F                			sub		di,8192-80
  1948 00000F8D 8A87[EC1B]              			mov		al,[Hex4+bx]
  1949 00000F91 268805                  			mov		[es:di],al
  1950 00000F94 C3                      			ret
  1951                                  
  1952 00000F95 50                      Hex24:		push	ax
  1953 00000F96 53                      			push	bx
  1954                                  
  1955 00000F97 88F8                    			mov		al,bh
  1956 00000F99 E82100                  			call	Hex8
  1957                                  						
  1958 00000F9C 5B                      			pop		bx
  1959 00000F9D 58                      			pop		ax
  1960                                  
  1961 00000F9E 50                      			push	ax
  1962 00000F9F 53                      			push	bx
  1963                                  
  1964 00000FA0 BF0200                  			mov		di,2
  1965 00000FA3 E81900                  			call	HexByte
  1966                                  
  1967 00000FA6 5B                      			pop		bx
  1968 00000FA7 58                      			pop		ax
  1969                                  
  1970 00000FA8 88E0                    			mov		al,ah
  1971 00000FAA BF0400                  			mov		di,4
  1972 00000FAD EB10                    			jmp		HexByte	; does ret
  1973                                  
  1974 00000FAF 50                      Hex16:		push	ax
  1975 00000FB0 53                      			push	bx
  1976                                  
  1977 00000FB1 88E0                    			mov		al,ah
  1978 00000FB3 E80700                  			call	Hex8
  1979                                  						
  1980 00000FB6 5B                      			pop		bx
  1981 00000FB7 58                      			pop		ax
  1982                                  
  1983 00000FB8 BF0200                  			mov		di,2
  1984 00000FBB EB02                    			jmp		HexByte ; does ret
  1985                                  
  1986 00000FBD 31FF                    Hex8:		xor		di,di
  1987 00000FBF 30FF                    HexByte:	xor		bh,bh
  1988 00000FC1 88DC                    			mov		ah,bl
  1989 00000FC3 00E4                    			add		ah,ah	; *2
  1990 00000FC5 00E3                    			add		bl,ah	; *3
  1991 00000FC7 01DB                    			add		bx,bx	; *6
  1992 00000FC9 01DB                    			add		bx,bx	; *12
  1993 00000FCB 03BF[0000]              			add		di,[BackBufferTable+bx]	; lookup start ver
  1994 00000FCF E945FF                  			jmp		HexChar	 ; does ret
  1995                                  ;			ret
  1996                                  
  1997                                  
  1998                                  ; pre-classify point
  1999                                  ; get camera v
  2000                                  ; sub 255
  2001                                  ; store start_v
  2002                                  ; get camera_h
  2003                                  ; sub 255
  2004                                  ; store start_h
  2005                                  ; get camera_z
  2006                                  ; sub 255
  2007                                  ; store start_z
  2008                                  
  2009                                  ; classify point
  2010                                  ; get v
  2011                                  ; sub start_v from v
  2012                                  ; if v neg
  2013                                  ;  off left
  2014                                  ; if v gt 510
  2015                                  ;  off right
  2016                                  ; get z
  2017                                  ; sub start_z from z
  2018                                  ; if z neg
  2019                                  ;  off back
  2020                                  ; if z gt 510
  2021                                  ;  off front
  2022                                  
  2023                                  ; get h
  2024                                  ; sub start_h from h
  2025                                  ; if h neg
  2026                                  ;  off top
  2027                                  ; if h gt 510
  2028                                  ;  off bot
  2029                                   
  2030                                  ; get object
  2031                                  ; rotate it
  2032                                  ; translate it
  2033                                  ; classify each point
  2034                                  ; if onscreen 
  2035                                  ;  do perspective
  2036                                  
  2037                                  ; read through lines
  2038                                  
  2039                                  MAX_EDGE EQU 510
  2040                                  MIDDLE_H EQU MIDDLE_X
  2041                                  
  2042 00000FD2 57                      DrawObjectZW:	push	di ; object lines
  2043 00000FD3 51                      				push	cx ; number of lines
  2044                                  
  2045 00000FD4 30ED                    				xor		ch,ch
  2046 00000FD6 FEC9                    				dec		cl
  2047 00000FD8 00C9                    				add		cl,cl
  2048 00000FDA 89CF                    				mov		di,cx	; point count
  2049                                  
  2050 00000FDC 57                       push di
  2051 00000FDD BBFF00                  				mov		bx,255 ; high = or clip codes / low = and clip codes
  2052                                  	
  2053 00000FE0 53                      .rotate_point_loop:	push	bx
  2054 00000FE1 3E8B04                  					mov		ax,[ds:si]		; vpos
  2055 00000FE4 3E8B5C02                					mov		bx,[ds:si+2]	; hpos
  2056 00000FE8 3E8B4C04                					mov		cx,[ds:si+4]	; zpos
  2057 00000FEC 890E[4394]              	mov		[Test3],cx
  2058                                  		
  2059 00000FF0 30D2                    					xor		dl,dl					; clip code
  2060                                  
  2061 00000FF2 0306[A61C]              					add		ax,[VOffset]
  2062                                  
  2063                                  ;					jns		.off_right
  2064                                  ;						mov		dl,LEFT_CC
  2065                                  ;						jmp		.off_ver
  2066                                  ;.off_right			cmp		ax,MAX_EDGE
  2067                                  ;					jle		.off_ver
  2068                                  ;						mov		dl,RIGHT_CC
  2069                                  
  2070                                  
  2071 00000FF6 031E[A41C]              .off_ver			add		bx,[HOffset]
  2072                                  
  2073                                  ;					jns		.off_bottom
  2074                                  ;						or		dl,TOP_CC
  2075                                  ;						jmp		.off_z
  2076                                  ;.off_bottom			cmp		bx,MAX_EDGE
  2077                                  ;					jle		.off_z
  2078                                  ;						or		dl,BOTTOM_CC
  2079                                  
  2080                                  
  2081 00000FFA 030E[AC1C]              .off_z				add		cx,[ZOffset]
  2082 00000FFE 890E[4594]              	mov		[Test4],cx
  2083                                  
  2084                                  
  2085                                  
  2086                                  ;					jns		.off_back
  2087                                  ;						or		dl,FRONT_CC
  2088                                  ;						jmp		.off_clip
  2089                                  ;.off_back			cmp		cx,MAX_EDGE
  2090                                  ;					jle		.off_clip
  2091                                  ;						or		dl,BACK_CC
  2092                                  
  2093                                  .off_clip:
  2094 00001002 8985[1492]              					mov		[ObjectYRot+di],ax 	; yrot
  2095 00001006 899D[1491]              					mov		[ObjectXRot+di],bx 	; xrot
  2096 0000100A 898D[1493]              					mov		[ObjectZRot+di],cx 	; zrot
  2097                                  
  2098 0000100E 8895[1490]              					mov		[ObjectClipCode+di],dl 	; clip code
  2099                                  
  2100 00001012 84D2                    					test	dl,dl
  2101 00001014 751B                    					jnz		.off_scn
  2102 00001016 89C2                    						mov		dx,ax
  2103                                  
  2104 00001018 8916[3D94]              	mov		[Test0],dx
  2105 0000101C 891E[3F94]              	mov		[Test1],bx
  2106 00001020 890E[4194]              	mov		[Test2],cx
  2107                                  
  2108 00001024 E8E901                  						call	PerspectiveZW
  2109 00001027 899D[148E]              						mov		[ObjectYPos+di],bx 		; xpos
  2110 0000102B 898D[148F]              						mov		[ObjectXPos+di],cx 		; ypos
  2111                                  						
  2112                                  ;	mov		[Test1],bx
  2113                                  ;	mov		[Test2],cx
  2114                                  
  2115 0000102F 30D2                    						xor		dl,dl	; if it reaches here it must be onscreen?
  2116                                  
  2117                                  .off_scn:
  2118 00001031 5B                      					pop		bx
  2119 00001032 20D3                    					and		bl,dl	; object and clip code
  2120 00001034 08D7                    					or		bh,dl	; object or clip code
  2121                                  		
  2122 00001036 83C606                  					add		si,6				
  2123 00001039 83EF02                  					sub		di,2
  2124 0000103C 79A2                    					jns		.rotate_point_loop
  2125                                  				
  2126 0000103E 59                      				pop		cx 	; number of lines
  2127 0000103F 5E                      				pop 	si 	; object lines
  2128                                  
  2129 00001040 5F                       pop di ; number of points
  2130                                  
  2131                                  ;	mov		[Test0],bx
  2132                                  
  2133 00001041 8B1E[148E]              						mov		bx,[ObjectYPos+0] 		; xpos
  2134 00001045 8B2E[148F]              						mov		bp,[ObjectXPos+0] 		; ypos
  2135 00001049 E895F4                  						call	Plot11
  2136 0000104C 8B1E[168E]              						mov		bx,[ObjectYPos+2] 		; xpos
  2137 00001050 8B2E[168F]              						mov		bp,[ObjectXPos+2] 		; ypos
  2138 00001054 E88AF4                  						call	Plot11
  2139 00001057 8B1E[188E]              						mov		bx,[ObjectYPos+4] 		; xpos
  2140 0000105B 8B2E[188F]              						mov		bp,[ObjectXPos+4] 		; ypos
  2141 0000105F E87FF4                  						call	Plot11
  2142 00001062 8B1E[1A8E]              						mov		bx,[ObjectYPos+6] 		; xpos
  2143 00001066 8B2E[1A8F]              						mov		bp,[ObjectXPos+6] 		; ypos
  2144 0000106A E874F4                  						call	Plot11
  2145                                  
  2146 0000106D 8B1E[1C8E]              						mov		bx,[ObjectYPos+8] 		; xpos
  2147 00001071 8B2E[1C8F]              						mov		bp,[ObjectXPos+8] 		; ypos
  2148 00001075 E869F4                  						call	Plot11
  2149 00001078 8B1E[1E8E]              						mov		bx,[ObjectYPos+10] 		; xpos
  2150 0000107C 8B2E[1E8F]              						mov		bp,[ObjectXPos+10] 		; ypos
  2151 00001080 E85EF4                  						call	Plot11
  2152 00001083 8B1E[208E]              						mov		bx,[ObjectYPos+12] 		; xpos
  2153 00001087 8B2E[208F]              						mov		bp,[ObjectXPos+12] 		; ypos
  2154 0000108B E853F4                  						call	Plot11
  2155 0000108E 8B1E[228E]              						mov		bx,[ObjectYPos+14] 		; xpos
  2156 00001092 8B2E[228F]              						mov		bp,[ObjectXPos+14] 		; ypos
  2157 00001096 E848F4                  						call	Plot11
  2158                                    
  2159 00001099 C3                      	ret
  2160 0000109A 80FB00                  				cmp		bl,0				; if and_object_clip_code ne 0 all off one side so exit
  2161 0000109D 7530                    				jnz		.off_screen
  2162                                   
  2163 0000109F 80FF00                  				cmp		bh,0				; if or_object_clip_code eq 0 all on screen so no clip needed
  2164 000010A2 752C                    				jnz		.draw_clipped_object
  2165                                  
  2166                                  .draw_whole_object:
  2167 000010A4 51                      .draw_whole_object_line_loop:	push	cx
  2168 000010A5 56                      								push	si
  2169                                  
  2170 000010A6 30FF                    								xor		bh,bh
  2171 000010A8 3E8A1C                  								mov		bl,[ds:si]
  2172 000010AB 00DB                    								add		bl,bl	
  2173 000010AD 8B8F[148E]              								mov		cx,[ObjectYPos+bx] ; endy
  2174 000010B1 8B97[148F]              								mov		dx,[ObjectXPos+bx] ; endx
  2175                                   
  2176 000010B5 3E8A5C01                								mov		bl,[ds:si+1]
  2177 000010B9 00DB                    								add		bl,bl
  2178 000010BB 8BAF[148E]              								mov		bp,[ObjectYPos+bx] ; starty
  2179 000010BF 8BB7[148F]              								mov		si,[ObjectXPos+bx] ; startx
  2180 000010C3 E8DCF1                  								call	Line00
  2181                                  	 
  2182 000010C6 5E                      								pop		si
  2183 000010C7 59                      								pop		cx
  2184 000010C8 83C602                  								add		si,2
  2185                                  
  2186 000010CB FECD                    								dec		ch
  2187 000010CD 75D5                    								jnz		.draw_whole_object_line_loop
  2188                                  
  2189 000010CF C3                      .off_screen:				ret
  2190                                  	
  2191                                  .draw_clipped_object:	
  2192 000010D0 30FF                    .draw_clipped_object_line_loop:	xor		bh,bh
  2193 000010D2 51                      								push	cx
  2194 000010D3 56                      								push	si
  2195                                  		
  2196 000010D4 3E8A1C                  								mov		bl,[ds:si]
  2197 000010D7 00DB                    								add		bl,bl
  2198 000010D9 8A87[1490]              								mov		al,[ObjectClipCode+bx] 	; start clip code
  2199 000010DD 3E8A5C01                								mov		bl,[ds:si+1]
  2200 000010E1 00DB                    								add		bl,bl
  2201 000010E3 8AA7[1490]              								mov		ah,[ObjectClipCode+bx] 	; end clip code
  2202                                  
  2203 000010E7 88C3                    								mov		bl,al		; backup start clip code
  2204 000010E9 20E3                    								and		bl,ah	; both points are off 
  2205 000010EB 7522                    								jnz		.line_off_screen	; then line is off screen
  2206                                  
  2207 000010ED 08E0                    								or		al,ah 	; if any point is off
  2208 000010EF 7528                    								jnz		.line_clip	; then line needs clipped
  2209                                  		
  2210 000010F1 3E8A1C                  								mov		bl,[ds:si]
  2211 000010F4 00DB                    								add		bl,bl	
  2212 000010F6 8B8F[148E]              								mov		cx,[ObjectYPos+bx] ; starty
  2213 000010FA 8B97[148F]              								mov		dx,[ObjectXPos+bx] ; startx
  2214                                  
  2215 000010FE 3E8A5C01                								mov		bl,[ds:si+1]
  2216 00001102 00DB                    								add		bl,bl
  2217 00001104 8BAF[148E]              								mov		bp,[ObjectYPos+bx] ; endy 
  2218 00001108 8BB7[148F]              								mov		si,[ObjectXPos+bx] ; endx - todo - si is the problem?
  2219                                  
  2220 0000110C E8BFF0                  .draw_clipped_line:				call	Line11
  2221                                  
  2222 0000110F 5E                      .line_off_screen:				pop		si
  2223 00001110 59                      								pop		cx
  2224 00001111 83C602                  								add		si,2
  2225                                  		
  2226 00001114 FECD                    								dec		ch
  2227 00001116 75B8                    								jnz		.draw_clipped_object_line_loop
  2228 00001118 C3                      							ret
  2229                                  
  2230                                  .line_clip:	; al = point 1 clip ; ah = point 2 clip
  2231                                  
  2232                                  ; copy point details to 2 sets of coords temp coords zyx and temp perspective xy
  2233                                  ; if either point is behind
  2234                                  ;  do z clip on required point
  2235                                  ;  do perspective
  2236                                  ;  do rest of tests
  2237                                  
  2238 00001119 30FF                    					xor		bh,bh
  2239 0000111B 3E8A1C                  					mov		bl,[ds:si]
  2240 0000111E 00DB                    					add		bl,bl	
  2241 00001120 8B97[1491]              					mov		dx,[ObjectXRot+bx]
  2242 00001124 8916[3194]              					mov		[STX],dx
  2243 00001128 8B97[1492]              					mov		dx,[ObjectYRot+bx]
  2244 0000112C 8916[3394]              					mov		[STY],dx
  2245 00001130 8B97[1493]              					mov		dx,[ObjectZRot+bx]
  2246 00001134 8916[3594]              					mov		[STZ],dx
  2247 00001138 8B97[148F]              					mov		dx,[ObjectXPos+bx]
  2248 0000113C 8916[2094]              					mov		[XST],dx
  2249 00001140 8B97[148E]              					mov		dx,[ObjectYPos+bx]	
  2250 00001144 8916[2294]              					mov		[YST],dx	
  2251 00001148 8A87[1490]              					mov		al,[ObjectClipCode+bx]
  2252                                  	
  2253 0000114C 3E8A5C01                					mov		bl,[ds:si+1]
  2254 00001150 00DB                    					add		bl,bl
  2255 00001152 8B97[1491]              					mov		dx,[ObjectXRot+bx]
  2256 00001156 8916[3794]              					mov		[ENX],dx
  2257 0000115A 8B97[1492]              					mov		dx,[ObjectYRot+bx]
  2258 0000115E 8916[3994]              					mov		[ENY],dx
  2259 00001162 8B97[1493]              					mov		dx,[ObjectZRot+bx]
  2260 00001166 8916[3B94]              					mov		[ENZ],dx	
  2261 0000116A 8B97[148F]              					mov		dx,[ObjectXPos+bx]
  2262 0000116E 8916[2494]              					mov		[XEN],dx
  2263 00001172 8B97[148E]              					mov		dx,[ObjectYPos+bx]
  2264 00001176 8916[2694]              					mov		[YEN],dx
  2265 0000117A 8AA7[1490]              					mov		ah,[ObjectClipCode+bx]
  2266                                  
  2267 0000117E A3[2894]                					mov		[CCST],ax
  2268                                  	
  2269 00001181 A1[2894]                .line_clip_loop:	mov		ax,[CCST]
  2270 00001184 88C3                    					mov		bl,al			; start cc
  2271 00001186 20E0                    					and		al,ah			; and with end cc
  2272 00001188 7585                    					jnz		.line_off_screen		; both off same side
  2273                                  	
  2274 0000118A 08E3                    					or		bl,ah			; or with end cc
  2275 0000118C 746F                    					jz		.clip_draw_test		; all on so draw line
  2276                                  
  2277 0000118E F6C310                  .clip_behind_test:	test	bl,BEHIND_CC	; test if either point is off (al=al or ah)
  2278 00001191 7412                    					jz		.clip_left_test
  2279 00001193 E8D5F9                  					call	LineClipBehind
  2280                                  
  2281 00001196 A1[2894]                					mov		ax,[CCST]
  2282 00001199 88C3                    					mov		bl,al			; start cc
  2283 0000119B 20E0                    					and		al,ah			; and with end cc
  2284 0000119D 0F856EFF                					jnz		.line_off_screen		; both off same side
  2285                                  
  2286 000011A1 08E3                    					or		bl,ah			; or with end cc
  2287 000011A3 7458                    					jz		.clip_draw_test		; all on so draw line
  2288                                  	
  2289 000011A5 F6C304                  .clip_left_test:	test	bl,LEFT_CC
  2290 000011A8 7412                    					jz		.clip_right_test
  2291 000011AA E898FA                  					call	LineClipLeft
  2292 000011AD A1[2894]                					mov		ax,[CCST]
  2293 000011B0 88C3                    					mov		bl,al			; start cc
  2294 000011B2 20E0                    					and		al,ah			; and with end cc
  2295 000011B4 0F8557FF                					jnz		.line_off_screen		; both off same side
  2296                                  
  2297 000011B8 08E3                    					or		bl,ah			; or with end cc
  2298 000011BA 7441                    					jz		.clip_draw_test		; all on so draw line
  2299                                  		
  2300 000011BC F6C308                  .clip_right_test:	test	bl,RIGHT_CC
  2301 000011BF 7412                    					jz		.clip_top_test
  2302 000011C1 E8DEFA                  					call	LineClipRight
  2303 000011C4 A1[2894]                					mov		ax,[CCST]
  2304 000011C7 88C3                    					mov		bl,al			; start cc
  2305 000011C9 20E0                    					and		al,ah			; and with end cc
  2306 000011CB 0F8540FF                					jnz		.line_off_screen		; both off same side
  2307                                  	
  2308 000011CF 08E3                    					or		bl,ah			; or with end cc
  2309 000011D1 742A                    					jz		.clip_draw_test		; all on so draw line
  2310                                  		
  2311                                  
  2312 000011D3 F6C301                  .clip_top_test:		test	bl,TOP_CC
  2313 000011D6 7412                    					jz		.clip_bottom_test
  2314 000011D8 E80DFA                  					call	LineClipTop
  2315 000011DB A1[2894]                					mov		ax,[CCST]
  2316 000011DE 88C3                    					mov		bl,al			; start cc
  2317 000011E0 20E0                    					and		al,ah			; and with end cc
  2318 000011E2 0F8529FF                					jnz		.line_off_screen		; both off same side
  2319                                  
  2320 000011E6 08E3                    					or		bl,ah			; or with end cc
  2321 000011E8 7413                    					jz		.clip_draw_test		; all on so draw line
  2322                                  
  2323 000011EA F6C302                  .clip_bottom_test:	test	bl,BOTTOM_CC
  2324 000011ED 7492                    					jz		.line_clip_loop
  2325 000011EF E80FFB                  					call	LineClipBottom
  2326 000011F2 A1[2894]                					mov		ax,[CCST]
  2327 000011F5 88C3                    					mov		bl,al			; start cc
  2328 000011F7 20E0                    					and		al,ah			; and with end cc
  2329 000011F9 0F8512FF                					jnz		.line_off_screen		; both off same side
  2330                                  
  2331 000011FD 8B0E[2294]              .clip_draw_test:	mov		cx,[YST]
  2332 00001201 8B16[2094]              					mov		dx,[XST]
  2333 00001205 8B2E[2694]              					mov		bp,[YEN]
  2334 00001209 8B36[2494]              					mov		si,[XEN]
  2335 0000120D E9FCFE                  					jmp		.draw_clipped_line
  2336                                  
  2337                                  ; hor = 0 to 510
  2338                                  ; ver = 0 to 510
  2339                                  ; z = 0 to 510
  2340                                  
  2341                                  PerspectiveZW: ; in = bx=z/cx=v/dx=h/dh=hsign - out = bx=v/cx=h
  2342 00001210 D1EB                    	shr		bx,1
  2343 00001212 8A87[AE1D]              	mov		al,[persvtab8+bx]
  2344 00001216 D1E9                    	shr		cx,1
  2345 00001218 F6E1                    	MUL		cl
  2346                                  
  2347 0000121A 8A87[AE1C]              	mov		al,[pershtab8+bx]
  2348 0000121E 88E3                    	mov		bl,ah
  2349 00001220 42                      	inc 	dx
  2350 00001221 84F6                        test 	dh,dh
  2351 00001223 750D                    	jnz		.pos
  2352                                  
  2353 00001225 F6DA                    .neg	neg		dl
  2354 00001227 F6E2                    		MUL		dl
  2355 00001229 88E1                    		mov		cl,ah
  2356 0000122B F7D9                    		neg		cx
  2357 0000122D 81C1A000                		add		cx,MIDDLE_H
  2358 00001231 C3                      		ret
  2359                                  
  2360 00001232 F6E2                    .pos	MUL		dl
  2361 00001234 88E1                    		mov		cl,ah
  2362 00001236 81C1A000                		add		cx,MIDDLE_H
  2363 0000123A C3                      		ret
  2364                                  
  2365                                  section .data align=8 ; 16 ; 8 ; 16
  2366                                  
  2367                                  OrTable:	
  2368 00000000 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2368 00000009 0030000C000300C000-
  2368 00000012 30000C000300C00030-
  2368 0000001B 000C000300C0003000-
  2368 00000024 0C000300C00030000C-
  2368 0000002D 000300C00030000C00-
  2368 00000036 0300C00030000C0003-
  2368 0000003F 00                 
  2369 00000040 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2369 00000049 0030000C000300C000-
  2369 00000052 30000C000300C00030-
  2369 0000005B 000C000300C0003000-
  2369 00000064 0C000300C00030000C-
  2369 0000006D 000300C00030000C00-
  2369 00000076 0300C00030000C0003-
  2369 0000007F 00                 
  2370 00000080 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2370 00000089 0030000C000300C000-
  2370 00000092 30000C000300C00030-
  2370 0000009B 000C000300C0003000-
  2370 000000A4 0C000300C00030000C-
  2370 000000AD 000300C00030000C00-
  2370 000000B6 0300C00030000C0003-
  2370 000000BF 00                 
  2371 000000C0 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2371 000000C9 0030000C000300C000-
  2371 000000D2 30000C000300C00030-
  2371 000000DB 000C000300C0003000-
  2371 000000E4 0C000300C00030000C-
  2371 000000ED 000300C00030000C00-
  2371 000000F6 0300C00030000C0003-
  2371 000000FF 00                 
  2372 00000100 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2372 00000109 0030000C000300C000-
  2372 00000112 30000C000300C00030-
  2372 0000011B 000C000300C0003000-
  2372 00000124 0C000300C00030000C-
  2372 0000012D 000300C00030000C00-
  2372 00000136 0300C00030000C0003-
  2372 0000013F 00                 
  2373 00000140 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2373 00000149 0030000C000300C000-
  2373 00000152 30000C000300C00030-
  2373 0000015B 000C000300C0003000-
  2373 00000164 0C000300C00030000C-
  2373 0000016D 000300C00030000C00-
  2373 00000176 0300C00030000C0003-
  2373 0000017F 00                 
  2374 00000180 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2374 00000189 0030000C000300C000-
  2374 00000192 30000C000300C00030-
  2374 0000019B 000C000300C0003000-
  2374 000001A4 0C000300C00030000C-
  2374 000001AD 000300C00030000C00-
  2374 000001B6 0300C00030000C0003-
  2374 000001BF 00                 
  2375 000001C0 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2375 000001C9 0030000C000300C000-
  2375 000001D2 30000C000300C00030-
  2375 000001DB 000C000300C0003000-
  2375 000001E4 0C000300C00030000C-
  2375 000001ED 000300C00030000C00-
  2375 000001F6 0300C00030000C0003-
  2375 000001FF 00                 
  2376 00000200 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2376 00000209 0030000C000300C000-
  2376 00000212 30000C000300C00030-
  2376 0000021B 000C000300C0003000-
  2376 00000224 0C000300C00030000C-
  2376 0000022D 000300C00030000C00-
  2376 00000236 0300C00030000C0003-
  2376 0000023F 00                 
  2377 00000240 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2377 00000249 0030000C000300C000-
  2377 00000252 30000C000300C00030-
  2377 0000025B 000C000300C0003000-
  2377 00000264 0C000300C00030000C-
  2377 0000026D 000300C00030000C00-
  2377 00000276 0300C00030000C0003-
  2377 0000027F 00                 
  2378 00000280 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2378 00000289 0030000C000300C000-
  2378 00000292 30000C000300C00030-
  2378 0000029B 000C000300C0003000-
  2378 000002A4 0C000300C00030000C-
  2378 000002AD 000300C00030000C00-
  2378 000002B6 0300C00030000C0003-
  2378 000002BF 00                 
  2379 000002C0 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2379 000002C9 0030000C000300C000-
  2379 000002D2 30000C000300C00030-
  2379 000002DB 000C000300C0003000-
  2379 000002E4 0C000300C00030000C-
  2379 000002ED 000300C00030000C00-
  2379 000002F6 0300C00030000C0003-
  2379 000002FF 00                 
  2380 00000300 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2380 00000309 0030000C000300C000-
  2380 00000312 30000C000300C00030-
  2380 0000031B 000C000300C0003000-
  2380 00000324 0C000300C00030000C-
  2380 0000032D 000300C00030000C00-
  2380 00000336 0300C00030000C0003-
  2380 0000033F 00                 
  2381 00000340 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2381 00000349 0030000C000300C000-
  2381 00000352 30000C000300C00030-
  2381 0000035B 000C000300C0003000-
  2381 00000364 0C000300C00030000C-
  2381 0000036D 000300C00030000C00-
  2381 00000376 0300C00030000C0003-
  2381 0000037F 00                 
  2382 00000380 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2382 00000389 0030000C000300C000-
  2382 00000392 30000C000300C00030-
  2382 0000039B 000C000300C0003000-
  2382 000003A4 0C000300C00030000C-
  2382 000003AD 000300C00030000C00-
  2382 000003B6 0300C00030000C0003-
  2382 000003BF 00                 
  2383 000003C0 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2383 000003C9 0030000C000300C000-
  2383 000003D2 30000C000300C00030-
  2383 000003DB 000C000300C0003000-
  2383 000003E4 0C000300C00030000C-
  2383 000003ED 000300C00030000C00-
  2383 000003F6 0300C00030000C0003-
  2383 000003FF 00                 
  2384 00000400 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2384 00000409 0030000C000300C000-
  2384 00000412 30000C000300C00030-
  2384 0000041B 000C000300C0003000-
  2384 00000424 0C000300C00030000C-
  2384 0000042D 000300C00030000C00-
  2384 00000436 0300C00030000C0003-
  2384 0000043F 00                 
  2385 00000440 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2385 00000449 0030000C000300C000-
  2385 00000452 30000C000300C00030-
  2385 0000045B 000C000300C0003000-
  2385 00000464 0C000300C00030000C-
  2385 0000046D 000300C00030000C00-
  2385 00000476 0300C00030000C0003-
  2385 0000047F 00                 
  2386 00000480 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2386 00000489 0030000C000300C000-
  2386 00000492 30000C000300C00030-
  2386 0000049B 000C000300C0003000-
  2386 000004A4 0C000300C00030000C-
  2386 000004AD 000300C00030000C00-
  2386 000004B6 0300C00030000C0003-
  2386 000004BF 00                 
  2387 000004C0 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  2387 000004C9 0030000C000300C000-
  2387 000004D2 30000C000300C00030-
  2387 000004DB 000C000300C0003000-
  2387 000004E4 0C000300C00030000C-
  2387 000004ED 000300C00030000C00-
  2387 000004F6 0300C00030000C0003-
  2387 000004FF 00                 
  2388                                  
  2389                                  AndTable:	
  2390 00000500 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2390 00000509 00CF00F300FC003F00-
  2390 00000512 CF00F300FC003F00CF-
  2390 0000051B 00F300FC003F00CF00-
  2390 00000524 F300FC003F00CF00F3-
  2390 0000052D 00FC003F00CF00F300-
  2390 00000536 FC003F00CF00F300FC-
  2390 0000053F 00                 
  2391 00000540 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2391 00000549 00CF00F300FC003F00-
  2391 00000552 CF00F300FC003F00CF-
  2391 0000055B 00F300FC003F00CF00-
  2391 00000564 F300FC003F00CF00F3-
  2391 0000056D 00FC003F00CF00F300-
  2391 00000576 FC003F00CF00F300FC-
  2391 0000057F 00                 
  2392 00000580 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2392 00000589 00CF00F300FC003F00-
  2392 00000592 CF00F300FC003F00CF-
  2392 0000059B 00F300FC003F00CF00-
  2392 000005A4 F300FC003F00CF00F3-
  2392 000005AD 00FC003F00CF00F300-
  2392 000005B6 FC003F00CF00F300FC-
  2392 000005BF 00                 
  2393 000005C0 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2393 000005C9 00CF00F300FC003F00-
  2393 000005D2 CF00F300FC003F00CF-
  2393 000005DB 00F300FC003F00CF00-
  2393 000005E4 F300FC003F00CF00F3-
  2393 000005ED 00FC003F00CF00F300-
  2393 000005F6 FC003F00CF00F300FC-
  2393 000005FF 00                 
  2394 00000600 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2394 00000609 00CF00F300FC003F00-
  2394 00000612 CF00F300FC003F00CF-
  2394 0000061B 00F300FC003F00CF00-
  2394 00000624 F300FC003F00CF00F3-
  2394 0000062D 00FC003F00CF00F300-
  2394 00000636 FC003F00CF00F300FC-
  2394 0000063F 00                 
  2395 00000640 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2395 00000649 00CF00F300FC003F00-
  2395 00000652 CF00F300FC003F00CF-
  2395 0000065B 00F300FC003F00CF00-
  2395 00000664 F300FC003F00CF00F3-
  2395 0000066D 00FC003F00CF00F300-
  2395 00000676 FC003F00CF00F300FC-
  2395 0000067F 00                 
  2396 00000680 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2396 00000689 00CF00F300FC003F00-
  2396 00000692 CF00F300FC003F00CF-
  2396 0000069B 00F300FC003F00CF00-
  2396 000006A4 F300FC003F00CF00F3-
  2396 000006AD 00FC003F00CF00F300-
  2396 000006B6 FC003F00CF00F300FC-
  2396 000006BF 00                 
  2397 000006C0 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2397 000006C9 00CF00F300FC003F00-
  2397 000006D2 CF00F300FC003F00CF-
  2397 000006DB 00F300FC003F00CF00-
  2397 000006E4 F300FC003F00CF00F3-
  2397 000006ED 00FC003F00CF00F300-
  2397 000006F6 FC003F00CF00F300FC-
  2397 000006FF 00                 
  2398 00000700 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2398 00000709 00CF00F300FC003F00-
  2398 00000712 CF00F300FC003F00CF-
  2398 0000071B 00F300FC003F00CF00-
  2398 00000724 F300FC003F00CF00F3-
  2398 0000072D 00FC003F00CF00F300-
  2398 00000736 FC003F00CF00F300FC-
  2398 0000073F 00                 
  2399 00000740 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2399 00000749 00CF00F300FC003F00-
  2399 00000752 CF00F300FC003F00CF-
  2399 0000075B 00F300FC003F00CF00-
  2399 00000764 F300FC003F00CF00F3-
  2399 0000076D 00FC003F00CF00F300-
  2399 00000776 FC003F00CF00F300FC-
  2399 0000077F 00                 
  2400 00000780 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2400 00000789 00CF00F300FC003F00-
  2400 00000792 CF00F300FC003F00CF-
  2400 0000079B 00F300FC003F00CF00-
  2400 000007A4 F300FC003F00CF00F3-
  2400 000007AD 00FC003F00CF00F300-
  2400 000007B6 FC003F00CF00F300FC-
  2400 000007BF 00                 
  2401 000007C0 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2401 000007C9 00CF00F300FC003F00-
  2401 000007D2 CF00F300FC003F00CF-
  2401 000007DB 00F300FC003F00CF00-
  2401 000007E4 F300FC003F00CF00F3-
  2401 000007ED 00FC003F00CF00F300-
  2401 000007F6 FC003F00CF00F300FC-
  2401 000007FF 00                 
  2402 00000800 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2402 00000809 00CF00F300FC003F00-
  2402 00000812 CF00F300FC003F00CF-
  2402 0000081B 00F300FC003F00CF00-
  2402 00000824 F300FC003F00CF00F3-
  2402 0000082D 00FC003F00CF00F300-
  2402 00000836 FC003F00CF00F300FC-
  2402 0000083F 00                 
  2403 00000840 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2403 00000849 00CF00F300FC003F00-
  2403 00000852 CF00F300FC003F00CF-
  2403 0000085B 00F300FC003F00CF00-
  2403 00000864 F300FC003F00CF00F3-
  2403 0000086D 00FC003F00CF00F300-
  2403 00000876 FC003F00CF00F300FC-
  2403 0000087F 00                 
  2404 00000880 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2404 00000889 00CF00F300FC003F00-
  2404 00000892 CF00F300FC003F00CF-
  2404 0000089B 00F300FC003F00CF00-
  2404 000008A4 F300FC003F00CF00F3-
  2404 000008AD 00FC003F00CF00F300-
  2404 000008B6 FC003F00CF00F300FC-
  2404 000008BF 00                 
  2405 000008C0 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2405 000008C9 00CF00F300FC003F00-
  2405 000008D2 CF00F300FC003F00CF-
  2405 000008DB 00F300FC003F00CF00-
  2405 000008E4 F300FC003F00CF00F3-
  2405 000008ED 00FC003F00CF00F300-
  2405 000008F6 FC003F00CF00F300FC-
  2405 000008FF 00                 
  2406 00000900 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2406 00000909 00CF00F300FC003F00-
  2406 00000912 CF00F300FC003F00CF-
  2406 0000091B 00F300FC003F00CF00-
  2406 00000924 F300FC003F00CF00F3-
  2406 0000092D 00FC003F00CF00F300-
  2406 00000936 FC003F00CF00F300FC-
  2406 0000093F 00                 
  2407 00000940 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2407 00000949 00CF00F300FC003F00-
  2407 00000952 CF00F300FC003F00CF-
  2407 0000095B 00F300FC003F00CF00-
  2407 00000964 F300FC003F00CF00F3-
  2407 0000096D 00FC003F00CF00F300-
  2407 00000976 FC003F00CF00F300FC-
  2407 0000097F 00                 
  2408 00000980 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2408 00000989 00CF00F300FC003F00-
  2408 00000992 CF00F300FC003F00CF-
  2408 0000099B 00F300FC003F00CF00-
  2408 000009A4 F300FC003F00CF00F3-
  2408 000009AD 00FC003F00CF00F300-
  2408 000009B6 FC003F00CF00F300FC-
  2408 000009BF 00                 
  2409 000009C0 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  2409 000009C9 00CF00F300FC003F00-
  2409 000009D2 CF00F300FC003F00CF-
  2409 000009DB 00F300FC003F00CF00-
  2409 000009E4 F300FC003F00CF00F3-
  2409 000009ED 00FC003F00CF00F300-
  2409 000009F6 FC003F00CF00F300FC-
  2409 000009FF 00                 
  2410                                  	
  2411                                  HorPosTable:
  2412 00000A00 0000000000000000        	dw	0,0,0,0
  2413 00000A08 0100010001000100        	dw	1,1,1,1
  2414 00000A10 0200020002000200        	dw	2,2,2,2
  2415 00000A18 0300030003000300        	dw	3,3,3,3
  2416 00000A20 0400040004000400        	dw	4,4,4,4
  2417 00000A28 0500050005000500        	dw	5,5,5,5
  2418 00000A30 0600060006000600        	dw	6,6,6,6
  2419 00000A38 0700070007000700        	dw	7,7,7,7
  2420 00000A40 0800080008000800        	dw	8,8,8,8
  2421 00000A48 0900090009000900        	dw	9,9,9,9
  2422                                  	
  2423 00000A50 0A000A000A000A00        	dw	10,10,10,10
  2424 00000A58 0B000B000B000B00        	dw	11,11,11,11
  2425 00000A60 0C000C000C000C00        	dw	12,12,12,12
  2426 00000A68 0D000D000D000D00        	dw	13,13,13,13
  2427 00000A70 0E000E000E000E00        	dw	14,14,14,14
  2428 00000A78 0F000F000F000F00        	dw	15,15,15,15
  2429 00000A80 1000100010001000        	dw	16,16,16,16
  2430 00000A88 1100110011001100        	dw	17,17,17,17
  2431 00000A90 1200120012001200        	dw	18,18,18,18
  2432 00000A98 1300130013001300        	dw	19,19,19,19
  2433                                  	
  2434 00000AA0 1400140014001400        	dw	20,20,20,20
  2435 00000AA8 1500150015001500        	dw	21,21,21,21
  2436 00000AB0 1600160016001600        	dw	22,22,22,22
  2437 00000AB8 1700170017001700        	dw	23,23,23,23
  2438 00000AC0 1800180018001800        	dw	24,24,24,24
  2439 00000AC8 1900190019001900        	dw	25,25,25,25
  2440 00000AD0 1A001A001A001A00        	dw	26,26,26,26
  2441 00000AD8 1B001B001B001B00        	dw	27,27,27,27
  2442 00000AE0 1C001C001C001C00        	dw	28,28,28,28
  2443 00000AE8 1D001D001D001D00        	dw	29,29,29,29
  2444                                  	
  2445 00000AF0 1E001E001E001E00        	dw	30,30,30,30
  2446 00000AF8 1F001F001F001F00        	dw	31,31,31,31
  2447 00000B00 2000200020002000        	dw	32,32,32,32
  2448 00000B08 2100210021002100        	dw	33,33,33,33
  2449 00000B10 2200220022002200        	dw	34,34,34,34
  2450 00000B18 2300230023002300        	dw	35,35,35,35
  2451 00000B20 2400240024002400        	dw	36,36,36,36
  2452 00000B28 2500250025002500        	dw	37,37,37,37
  2453 00000B30 2600260026002600        	dw	38,38,38,38
  2454 00000B38 2700270027002700        	dw	39,39,39,39
  2455                                  
  2456 00000B40 2800280028002800        	dw	40,40,40,40
  2457 00000B48 2900290029002900        	dw	41,41,41,41
  2458 00000B50 2A002A002A002A00        	dw	42,42,42,42
  2459 00000B58 2B002B002B002B00        	dw	43,43,43,43
  2460 00000B60 2C002C002C002C00        	dw	44,44,44,44
  2461 00000B68 2D002D002D002D00        	dw	45,45,45,45
  2462 00000B70 2E002E002E002E00        	dw	46,46,46,46
  2463 00000B78 2F002F002F002F00        	dw	47,47,47,47
  2464 00000B80 3000300030003000        	dw	48,48,48,48
  2465 00000B88 3100310031003100        	dw	49,49,49,49
  2466                                  
  2467 00000B90 3200320032003200        	dw	50,50,50,50
  2468 00000B98 3300330033003300        	dw	51,51,51,51
  2469 00000BA0 3400340034003400        	dw	52,52,52,52
  2470 00000BA8 3500350035003500        	dw	53,53,53,53
  2471 00000BB0 3600360036003600        	dw	54,54,54,54
  2472 00000BB8 3700370037003700        	dw	55,55,55,55
  2473 00000BC0 3800380038003800        	dw	56,56,56,56
  2474 00000BC8 3900390039003900        	dw	57,57,57,57
  2475 00000BD0 3A003A003A003A00        	dw	58,58,58,58
  2476 00000BD8 3B003B003B003B00        	dw	59,59,59,59
  2477                                  
  2478 00000BE0 3C003C003C003C00        	dw	60,60,60,60
  2479 00000BE8 3D003D003D003D00        	dw	61,61,61,61
  2480 00000BF0 3E003E003E003E00        	dw	62,62,62,62
  2481 00000BF8 3F003F003F003F00        	dw	63,63,63,63
  2482 00000C00 4000400040004000        	dw	64,64,64,64
  2483 00000C08 4100410041004100        	dw	65,65,65,65
  2484 00000C10 4200420042004200        	dw	66,66,66,66
  2485 00000C18 4300430043004300        	dw	67,67,67,67
  2486 00000C20 4400440044004400        	dw	68,68,68,68
  2487 00000C28 4500450045004500        	dw	69,69,69,69
  2488                                  
  2489 00000C30 4600460046004600        	dw	70,70,70,70
  2490 00000C38 4700470047004700        	dw	71,71,71,71
  2491 00000C40 4800480048004800        	dw	72,72,72,72
  2492 00000C48 4900490049004900        	dw	73,73,73,73
  2493 00000C50 4A004A004A004A00        	dw	74,74,74,74
  2494 00000C58 4B004B004B004B00        	dw	75,75,75,75
  2495 00000C60 4C004C004C004C00        	dw	76,76,76,76
  2496 00000C68 4D004D004D004D00        	dw	77,77,77,77
  2497 00000C70 4E004E004E004E00        	dw	78,78,78,78
  2498 00000C78 4F004F004F004F00        	dw	79,79,79,79
  2499                                  
  2500                                  HorPosTab32:
  2501 00000C80 00000000<rep 10h>        times 16 dd 0*4
  2502 00000CC0 04000000<rep 10h>        times 16 dd 1*4
  2503 00000D00 08000000<rep 10h>        times 16 dd 2*4
  2504 00000D40 0C000000<rep 10h>        times 16 dd 3*4
  2505 00000D80 10000000<rep 10h>        times 16 dd 4*4
  2506 00000DC0 14000000<rep 10h>        times 16 dd 5*4
  2507 00000E00 18000000<rep 10h>        times 16 dd 6*4
  2508 00000E40 1C000000<rep 10h>        times 16 dd 7*4
  2509 00000E80 20000000<rep 10h>        times 16 dd 8*4
  2510 00000EC0 24000000<rep 10h>        times 16 dd 9*4
  2511 00000F00 28000000<rep 10h>        times 16 dd 10*4
  2512 00000F40 2C000000<rep 10h>        times 16 dd 11*4
  2513 00000F80 30000000<rep 10h>        times 16 dd 12*4
  2514 00000FC0 34000000<rep 10h>        times 16 dd 13*4
  2515 00001000 38000000<rep 10h>        times 16 dd 14*4
  2516 00001040 3C000000<rep 10h>        times 16 dd 15*4
  2517 00001080 40000000<rep 10h>        times 16 dd 16*4
  2518 000010C0 44000000<rep 10h>        times 16 dd 17*4
  2519 00001100 48000000<rep 10h>        times 16 dd 18*4
  2520 00001140 4C000000<rep 10h>        times 16 dd 19*4
  2521                                  
  2522                                  ;FillLeftTab32: times 320/16 dd 00000000000000000000000000000011b,00000000000000000000000000001111b,00000000000000000000000000111111b,00000000000000000000000011111111b,00000000000000000000001111111111b,00000000000000000000111111111111b,00000000000000000011111111111111b,00000000000000001111111111111111b,00000000000000111111111111111111b,00000000000011111111111111111111b,00000000001111111111111111111111b,00000000111111111111111111111111b,00000011111111111111111111111111b,00001111111111111111111111111111b,00111111111111111111111111111111b,11111111111111111111111111111111b,
  2523                                  
  2524                                  ;FillLeftTab32: times 320/16 dd 11000000000000000000000000000000b,00110000000000000000000000000000b,00001100000000000000000000000000b,00000011000000000000000000000000b,00000000110000000000000000000000b,00000000001100000000000000000000b,00000000000011000000000000000000b,00000000000000110000000000000000b,00000000000000001100000000000000b,00000000000000000011000000000000b,00000000000000000000110000000000b,00000000000000000000001100000000b,00000000000000000000000011000000b,00000000000000000000000000110000b,00000000000000000000000000001100b,00000000000000000000000000000011b
  2525                                  
  2526                                  ;FillLeftTab32: times 320/16 dd 00000000000000000000000000000011b,00000000000000000000000000001100b,00000000000000000000000000110000b,00000000000000000000000011000000b,00000000000000000000001100000000b,00000000000000000000110000000000b,00000000000000000011000000000000b,00000000000000001100000000000000b,00000000000000110000000000000000b,00000000000011000000000000000000b,00000000001100000000000000000000b,00000000110000000000000000000000b,00000011000000000000000000000000b,00001100000000000000000000000000b,00110000000000000000000000000000b,11000000000000000000000000000000b
  2527                                  
  2528 00001180 FFAAAAAA3FAAAAAA0F-     FillLeftTab32: times 320/16 	dd 	10101010101010101010101011111111b,10101010101010101010101000111111b,10101010101010101010101000001111b,10101010101010101010101000000011b,10101010101010101111111100000000b,10101010101010100011111100000000b,10101010101010100000111100000000b,10101010101010100000001100000000b,10101010111111110000000000000000b,10101010001111110000000000000000b,10101010000011110000000000000000b,10101010000000110000000000000000b,11111111000000000000000000000000b,00111111000000000000000000000000b,00001111000000000000000000000000b,00000011000000000000000000000000b
  2528 00001189 AAAAAA03AAAAAA00FF-
  2528 00001192 AAAA003FAAAA000FAA-
  2528 0000119B AA0003AAAA0000FFAA-
  2528 000011A4 00003FAA00000FAA00-
  2528 000011AD 0003AA000000FF0000-
  2528 000011B6 003F0000000F000000-
  2528 000011BF 03<rep 14h>        
  2529                                  
  2530 00001680 C0000000F0000000FC-     FillRightTab32: times 320/16 	dd 	00000000000000000000000011000000b,00000000000000000000000011110000b,00000000000000000000000011111100b,00000000000000000000000011111111b,00000000000000001100000010101010b,00000000000000001111000010101010b,00000000000000001111110010101010b,00000000000000001111111110101010b,00000000110000001010101010101010b,00000000111100001010101010101010b,00000000111111001010101010101010b,00000000111111111010101010101010b,11000000101010101010101010101010b,11110000101010101010101010101010b,11111100101010101010101010101010b,11111111101010101010101010101010b
  2530 00001689 000000FF000000AAC0-
  2530 00001692 0000AAF00000AAFC00-
  2530 0000169B 00AAFF0000AAAAC000-
  2530 000016A4 AAAAF000AAAAFC00AA-
  2530 000016AD AAFF00AAAAAAC0AAAA-
  2530 000016B6 AAF0AAAAAAFCAAAAAA-
  2530 000016BF FF<rep 14h>        
  2531                                  
  2532 00001B80 [0206][0406][2906]-     FillTable:	dw	Fill000,Fill004,Fill008,Fill012,Fill016,Fill020,Fill024,Fill028,Fill032,Fill036,Fill040,Fill044,Fill048,Fill052,Fill056,Fill060,Fill064,Fill068,Fill072,Fill076,Fill080,Fill084
  2532 00001B86 [5006][7C06][A806]-
  2532 00001B8C [D406][0007][2C07]-
  2532 00001B92 [5807][8407][B007]-
  2532 00001B98 [DC07][0808][3408]-
  2532 00001B9E [6008][8C08][B808]-
  2532 00001BA4 [E408][1009][3C09]-
  2532 00001BAA [6809]             
  2533                                  		
  2534 00001BAC FC30FCFCCCFCFCFCFC-     Hex0	db 11111100b,00110000b,11111100b,11111100b,11001100b,11111100b,11111100b,11111100b,11111100b,11111100b,11111100b,11111100b,11111100b,11110000b,11111100b,11111100b
  2534 00001BB5 FCFCFCFCF0FCFC     
  2535 00001BBC CCF00C0CCCC0C00CCC-     Hex1	db 11001100b,11110000b,00001100b,00001100b,11001100b,11000000b,11000000b,00001100b,11001100b,11001100b,11001100b,11001100b,11000000b,11001100b,11000000b,11000000b
  2535 00001BC5 CCCCCCC0CCC0C0     
  2536 00001BCC CC30FCFCFCFCFC0CFC-     Hex2	db 11001100b,00110000b,11111100b,11111100b,11111100b,11111100b,11111100b,00001100b,11111100b,11111100b,11111100b,11110000b,11000000b,11001100b,11111100b,11111100b
  2536 00001BD5 FCFCF0C0CCFCFC     
  2537 00001BDC CC30C00C0C0CCC0CCC-     Hex3	db 11001100b,00110000b,11000000b,00001100b,00001100b,00001100b,11001100b,00001100b,11001100b,00001100b,11001100b,11001100b,11000000b,11001100b,11000000b,11000000b
  2537 00001BE5 0CCCCCC0CCC0C0     
  2538 00001BEC FCFCFCFC0CFCFC0CFC-     Hex4	db 11111100b,11111100b,11111100b,11111100b,00001100b,11111100b,11111100b,00001100b,11111100b,11111100b,11001100b,11111100b,11111100b,11110000b,11111100b,11000000b
  2538 00001BF5 FCCCFCFCF0FCC0     
  2539                                    
  2540                                  ObjectPoints00:
  2541 00001BFC E2FFE2FFE2FF            	dw	-30,-30,-30 		;+150
  2542 00001C02 E2FFE2FF1E00            	dw	-30,-30,+30		;+150
  2543 00001C08 E2FF1E00E2FF            	dw	-30,+30,-30		;+150
  2544 00001C0E E2FF1E001E00            	dw	-30,+30,+30		;+150
  2545 00001C14 1E00E2FFE2FF            	dw	+30,-30,-30 		;+150
  2546 00001C1A 1E00E2FF1E00            	dw	+30,-30,+30 		;+150
  2547 00001C20 1E001E00E2FF            	dw	+30,+30,-30		;+150
  2548 00001C26 1E001E001E00            	dw	+30,+30,+30		;+150
  2549                                  
  2550 00001C2C D4FED4FED4FE            	dw	-300,-300,-300 		;+150
  2551 00001C32 D4FED4FE2C01            	dw	-300,-300,+300		;+150
  2552 00001C38 D4FE2C01D4FE            	dw	-300,+300,-300		;+150
  2553 00001C3E D4FE2C012C01            	dw	-300,+300,+300		;+150
  2554 00001C44 2C01D4FED4FE            	dw	+300,-300,-300 		;+150
  2555 00001C4A 2C01D4FE2C01            	dw	+300,-300,+300 		;+150
  2556 00001C50 2C012C01D4FE            	dw	+300,+300,-300		;+150
  2557 00001C56 2C012C012C01            	dw	+300,+300,+300		;+150
  2558                                  
  2559 00001C5C 48F460F078EC            	dw	-3000,-4000,-5000 ;+150
  2560 00001C62 48F460F08813            	dw	-3000,-4000,+5000 ;+150
  2561 00001C68 48F4A00F78EC            	dw	-3000,+4000,-5000 ;+150
  2562 00001C6E 48F4A00F8813            	dw	-3000,+4000,+5000 ;+150
  2563 00001C74 B80B60F078EC            	dw	+3000,-4000,-5000 ;+150
  2564 00001C7A B80B60F08813            	dw	+3000,-4000,+5000 ;+150
  2565 00001C80 B80BA00F78EC            	dw	+3000,+4000,-5000;+150
  2566 00001C86 B80BA00F8813            	dw	+3000,+4000,+5000 ;+150
  2567                                  	
  2568                                  ObjectLines00:
  2569 00001C8C 0001                    	db	0,1
  2570 00001C8E 0103                    	db	1,3
  2571 00001C90 0302                    	db	3,2
  2572 00001C92 0200                    	db	2,0
  2573 00001C94 0405                    	db	4,5
  2574 00001C96 0507                    	db	5,7
  2575 00001C98 0706                    	db	7,6
  2576 00001C9A 0604                    	db	6,4
  2577 00001C9C 0004                    	db	0,4
  2578 00001C9E 0105                    	db	1,5
  2579 00001CA0 0206                    	db	2,6
  2580 00001CA2 0307                    	db	3,7
  2581                                  
  2582 00001CA4 C800                    HOffset:	dw	200
  2583 00001CA6 C800                    VOffset:	dw	200
  2584                                  
  2585 00001CA8 0CFE                    XOffset:	dw	-500
  2586 00001CAA 0CFE                    YOffset:	dw	-500
  2587 00001CAC C800                    ZOffset:	dw	200 ; 2500	
  2588                                  
  2589                                  pershtab8:
  2590 00001CAE 9F                       db 159
  2591 00001CAF 9F                       db 159
  2592 00001CB0 9F                       db 159
  2593 00001CB1 9F                       db 159
  2594 00001CB2 9E                       db 158
  2595 00001CB3 9E                       db 158
  2596 00001CB4 9E                       db 158
  2597 00001CB5 9E                       db 158
  2598 00001CB6 9E                       db 158
  2599 00001CB7 9D                       db 157
  2600 00001CB8 9D                       db 157
  2601 00001CB9 9D                       db 157
  2602 00001CBA 9D                       db 157
  2603 00001CBB 9C                       db 156
  2604 00001CBC 9C                       db 156
  2605 00001CBD 9C                       db 156
  2606 00001CBE 9C                       db 156
  2607 00001CBF 9C                       db 156
  2608 00001CC0 9B                       db 155
  2609 00001CC1 9B                       db 155
  2610 00001CC2 9B                       db 155
  2611 00001CC3 9B                       db 155
  2612 00001CC4 9B                       db 155
  2613 00001CC5 9A                       db 154
  2614 00001CC6 9A                       db 154
  2615 00001CC7 9A                       db 154
  2616 00001CC8 9A                       db 154
  2617 00001CC9 99                       db 153
  2618 00001CCA 99                       db 153
  2619 00001CCB 99                       db 153
  2620 00001CCC 99                       db 153
  2621 00001CCD 99                       db 153
  2622 00001CCE 98                       db 152
  2623 00001CCF 98                       db 152
  2624 00001CD0 98                       db 152
  2625 00001CD1 98                       db 152
  2626 00001CD2 98                       db 152
  2627 00001CD3 97                       db 151
  2628 00001CD4 97                       db 151
  2629 00001CD5 97                       db 151
  2630 00001CD6 97                       db 151
  2631 00001CD7 96                       db 150
  2632 00001CD8 96                       db 150
  2633 00001CD9 96                       db 150
  2634 00001CDA 96                       db 150
  2635 00001CDB 96                       db 150
  2636 00001CDC 95                       db 149
  2637 00001CDD 95                       db 149
  2638 00001CDE 95                       db 149
  2639 00001CDF 95                       db 149
  2640 00001CE0 95                       db 149
  2641 00001CE1 94                       db 148
  2642 00001CE2 94                       db 148
  2643 00001CE3 94                       db 148
  2644 00001CE4 94                       db 148
  2645 00001CE5 93                       db 147
  2646 00001CE6 93                       db 147
  2647 00001CE7 93                       db 147
  2648 00001CE8 93                       db 147
  2649 00001CE9 93                       db 147
  2650 00001CEA 92                       db 146
  2651 00001CEB 92                       db 146
  2652 00001CEC 92                       db 146
  2653 00001CED 92                       db 146
  2654 00001CEE 92                       db 146
  2655 00001CEF 91                       db 145
  2656 00001CF0 91                       db 145
  2657 00001CF1 91                       db 145
  2658 00001CF2 91                       db 145
  2659 00001CF3 90                       db 144
  2660 00001CF4 90                       db 144
  2661 00001CF5 90                       db 144
  2662 00001CF6 90                       db 144
  2663 00001CF7 90                       db 144
  2664 00001CF8 8F                       db 143
  2665 00001CF9 8F                       db 143
  2666 00001CFA 8F                       db 143
  2667 00001CFB 8F                       db 143
  2668 00001CFC 8F                       db 143
  2669 00001CFD 8E                       db 142
  2670 00001CFE 8E                       db 142
  2671 00001CFF 8E                       db 142
  2672 00001D00 8E                       db 142
  2673 00001D01 8D                       db 141
  2674 00001D02 8D                       db 141
  2675 00001D03 8D                       db 141
  2676 00001D04 8D                       db 141
  2677 00001D05 8D                       db 141
  2678 00001D06 8C                       db 140
  2679 00001D07 8C                       db 140
  2680 00001D08 8C                       db 140
  2681 00001D09 8C                       db 140
  2682 00001D0A 8C                       db 140
  2683 00001D0B 8B                       db 139
  2684 00001D0C 8B                       db 139
  2685 00001D0D 8B                       db 139
  2686 00001D0E 8B                       db 139
  2687 00001D0F 8A                       db 138
  2688 00001D10 8A                       db 138
  2689 00001D11 8A                       db 138
  2690 00001D12 8A                       db 138
  2691 00001D13 8A                       db 138
  2692 00001D14 89                       db 137
  2693 00001D15 89                       db 137
  2694 00001D16 89                       db 137
  2695 00001D17 89                       db 137
  2696 00001D18 89                       db 137
  2697 00001D19 88                       db 136
  2698 00001D1A 88                       db 136
  2699 00001D1B 88                       db 136
  2700 00001D1C 88                       db 136
  2701 00001D1D 87                       db 135
  2702 00001D1E 87                       db 135
  2703 00001D1F 87                       db 135
  2704 00001D20 87                       db 135
  2705 00001D21 87                       db 135
  2706 00001D22 86                       db 134
  2707 00001D23 86                       db 134
  2708 00001D24 86                       db 134
  2709 00001D25 86                       db 134
  2710 00001D26 86                       db 134
  2711 00001D27 85                       db 133
  2712 00001D28 85                       db 133
  2713 00001D29 85                       db 133
  2714 00001D2A 85                       db 133
  2715 00001D2B 84                       db 132
  2716 00001D2C 84                       db 132
  2717 00001D2D 84                       db 132
  2718 00001D2E 84                       db 132
  2719 00001D2F 84                       db 132
  2720 00001D30 83                       db 131
  2721 00001D31 83                       db 131
  2722 00001D32 83                       db 131
  2723 00001D33 83                       db 131
  2724 00001D34 82                       db 130
  2725 00001D35 82                       db 130
  2726 00001D36 82                       db 130
  2727 00001D37 82                       db 130
  2728 00001D38 82                       db 130
  2729 00001D39 81                       db 129
  2730 00001D3A 81                       db 129
  2731 00001D3B 81                       db 129
  2732 00001D3C 81                       db 129
  2733 00001D3D 81                       db 129
  2734 00001D3E 80                       db 128
  2735 00001D3F 80                       db 128
  2736 00001D40 80                       db 128
  2737 00001D41 80                       db 128
  2738 00001D42 7F                       db 127
  2739 00001D43 7F                       db 127
  2740 00001D44 7F                       db 127
  2741 00001D45 7F                       db 127
  2742 00001D46 7F                       db 127
  2743 00001D47 7E                       db 126
  2744 00001D48 7E                       db 126
  2745 00001D49 7E                       db 126
  2746 00001D4A 7E                       db 126
  2747 00001D4B 7E                       db 126
  2748 00001D4C 7D                       db 125
  2749 00001D4D 7D                       db 125
  2750 00001D4E 7D                       db 125
  2751 00001D4F 7D                       db 125
  2752 00001D50 7C                       db 124
  2753 00001D51 7C                       db 124
  2754 00001D52 7C                       db 124
  2755 00001D53 7C                       db 124
  2756 00001D54 7C                       db 124
  2757 00001D55 7B                       db 123
  2758 00001D56 7B                       db 123
  2759 00001D57 7B                       db 123
  2760 00001D58 7B                       db 123
  2761 00001D59 7B                       db 123
  2762 00001D5A 7A                       db 122
  2763 00001D5B 7A                       db 122
  2764 00001D5C 7A                       db 122
  2765 00001D5D 7A                       db 122
  2766 00001D5E 79                       db 121
  2767 00001D5F 79                       db 121
  2768 00001D60 79                       db 121
  2769 00001D61 79                       db 121
  2770 00001D62 79                       db 121
  2771 00001D63 78                       db 120
  2772 00001D64 78                       db 120
  2773 00001D65 78                       db 120
  2774 00001D66 78                       db 120
  2775 00001D67 78                       db 120
  2776 00001D68 77                       db 119
  2777 00001D69 77                       db 119
  2778 00001D6A 77                       db 119
  2779 00001D6B 77                       db 119
  2780 00001D6C 76                       db 118
  2781 00001D6D 76                       db 118
  2782 00001D6E 76                       db 118
  2783 00001D6F 76                       db 118
  2784 00001D70 76                       db 118
  2785 00001D71 75                       db 117
  2786 00001D72 75                       db 117
  2787 00001D73 75                       db 117
  2788 00001D74 75                       db 117
  2789 00001D75 75                       db 117
  2790 00001D76 74                       db 116
  2791 00001D77 74                       db 116
  2792 00001D78 74                       db 116
  2793 00001D79 74                       db 116
  2794 00001D7A 73                       db 115
  2795 00001D7B 73                       db 115
  2796 00001D7C 73                       db 115
  2797 00001D7D 73                       db 115
  2798 00001D7E 73                       db 115
  2799 00001D7F 72                       db 114
  2800 00001D80 72                       db 114
  2801 00001D81 72                       db 114
  2802 00001D82 72                       db 114
  2803 00001D83 72                       db 114
  2804 00001D84 71                       db 113
  2805 00001D85 71                       db 113
  2806 00001D86 71                       db 113
  2807 00001D87 71                       db 113
  2808 00001D88 70                       db 112
  2809 00001D89 70                       db 112
  2810 00001D8A 70                       db 112
  2811 00001D8B 70                       db 112
  2812 00001D8C 70                       db 112
  2813 00001D8D 6F                       db 111
  2814 00001D8E 6F                       db 111
  2815 00001D8F 6F                       db 111
  2816 00001D90 6F                       db 111
  2817 00001D91 6F                       db 111
  2818 00001D92 6E                       db 110
  2819 00001D93 6E                       db 110
  2820 00001D94 6E                       db 110
  2821 00001D95 6E                       db 110
  2822 00001D96 6D                       db 109
  2823 00001D97 6D                       db 109
  2824 00001D98 6D                       db 109
  2825 00001D99 6D                       db 109
  2826 00001D9A 6D                       db 109
  2827 00001D9B 6C                       db 108
  2828 00001D9C 6C                       db 108
  2829 00001D9D 6C                       db 108
  2830 00001D9E 6C                       db 108
  2831 00001D9F 6C                       db 108
  2832 00001DA0 6B                       db 107
  2833 00001DA1 6B                       db 107
  2834 00001DA2 6B                       db 107
  2835 00001DA3 6B                       db 107
  2836 00001DA4 6A                       db 106
  2837 00001DA5 6A                       db 106
  2838 00001DA6 6A                       db 106
  2839 00001DA7 6A                       db 106
  2840 00001DA8 6A                       db 106
  2841 00001DA9 69                       db 105
  2842 00001DAA 69                       db 105
  2843 00001DAB 69                       db 105
  2844 00001DAC 69                       db 105
  2845 00001DAD 69                       db 105
  2846                                  
  2847                                  persvtab8:
  2848 00001DAE C7                       db 199
  2849 00001DAF C7                       db 199
  2850 00001DB0 C7                       db 199
  2851 00001DB1 C6                       db 198
  2852 00001DB2 C6                       db 198
  2853 00001DB3 C6                       db 198
  2854 00001DB4 C6                       db 198
  2855 00001DB5 C5                       db 197
  2856 00001DB6 C5                       db 197
  2857 00001DB7 C5                       db 197
  2858 00001DB8 C5                       db 197
  2859 00001DB9 C4                       db 196
  2860 00001DBA C4                       db 196
  2861 00001DBB C4                       db 196
  2862 00001DBC C3                       db 195
  2863 00001DBD C3                       db 195
  2864 00001DBE C3                       db 195
  2865 00001DBF C3                       db 195
  2866 00001DC0 C2                       db 194
  2867 00001DC1 C2                       db 194
  2868 00001DC2 C2                       db 194
  2869 00001DC3 C2                       db 194
  2870 00001DC4 C1                       db 193
  2871 00001DC5 C1                       db 193
  2872 00001DC6 C1                       db 193
  2873 00001DC7 C0                       db 192
  2874 00001DC8 C0                       db 192
  2875 00001DC9 C0                       db 192
  2876 00001DCA C0                       db 192
  2877 00001DCB BF                       db 191
  2878 00001DCC BF                       db 191
  2879 00001DCD BF                       db 191
  2880 00001DCE BF                       db 191
  2881 00001DCF BE                       db 190
  2882 00001DD0 BE                       db 190
  2883 00001DD1 BE                       db 190
  2884 00001DD2 BE                       db 190
  2885 00001DD3 BD                       db 189
  2886 00001DD4 BD                       db 189
  2887 00001DD5 BD                       db 189
  2888 00001DD6 BC                       db 188
  2889 00001DD7 BC                       db 188
  2890 00001DD8 BC                       db 188
  2891 00001DD9 BC                       db 188
  2892 00001DDA BB                       db 187
  2893 00001DDB BB                       db 187
  2894 00001DDC BB                       db 187
  2895 00001DDD BB                       db 187
  2896 00001DDE BA                       db 186
  2897 00001DDF BA                       db 186
  2898 00001DE0 BA                       db 186
  2899 00001DE1 B9                       db 185
  2900 00001DE2 B9                       db 185
  2901 00001DE3 B9                       db 185
  2902 00001DE4 B9                       db 185
  2903 00001DE5 B8                       db 184
  2904 00001DE6 B8                       db 184
  2905 00001DE7 B8                       db 184
  2906 00001DE8 B8                       db 184
  2907 00001DE9 B7                       db 183
  2908 00001DEA B7                       db 183
  2909 00001DEB B7                       db 183
  2910 00001DEC B7                       db 183
  2911 00001DED B6                       db 182
  2912 00001DEE B6                       db 182
  2913 00001DEF B6                       db 182
  2914 00001DF0 B5                       db 181
  2915 00001DF1 B5                       db 181
  2916 00001DF2 B5                       db 181
  2917 00001DF3 B5                       db 181
  2918 00001DF4 B4                       db 180
  2919 00001DF5 B4                       db 180
  2920 00001DF6 B4                       db 180
  2921 00001DF7 B4                       db 180
  2922 00001DF8 B3                       db 179
  2923 00001DF9 B3                       db 179
  2924 00001DFA B3                       db 179
  2925 00001DFB B2                       db 178
  2926 00001DFC B2                       db 178
  2927 00001DFD B2                       db 178
  2928 00001DFE B2                       db 178
  2929 00001DFF B1                       db 177
  2930 00001E00 B1                       db 177
  2931 00001E01 B1                       db 177
  2932 00001E02 B1                       db 177
  2933 00001E03 B0                       db 176
  2934 00001E04 B0                       db 176
  2935 00001E05 B0                       db 176
  2936 00001E06 B0                       db 176
  2937 00001E07 AF                       db 175
  2938 00001E08 AF                       db 175
  2939 00001E09 AF                       db 175
  2940 00001E0A AE                       db 174
  2941 00001E0B AE                       db 174
  2942 00001E0C AE                       db 174
  2943 00001E0D AE                       db 174
  2944 00001E0E AD                       db 173
  2945 00001E0F AD                       db 173
  2946 00001E10 AD                       db 173
  2947 00001E11 AD                       db 173
  2948 00001E12 AC                       db 172
  2949 00001E13 AC                       db 172
  2950 00001E14 AC                       db 172
  2951 00001E15 AB                       db 171
  2952 00001E16 AB                       db 171
  2953 00001E17 AB                       db 171
  2954 00001E18 AB                       db 171
  2955 00001E19 AA                       db 170
  2956 00001E1A AA                       db 170
  2957 00001E1B AA                       db 170
  2958 00001E1C AA                       db 170
  2959 00001E1D A9                       db 169
  2960 00001E1E A9                       db 169
  2961 00001E1F A9                       db 169
  2962 00001E20 A9                       db 169
  2963 00001E21 A8                       db 168
  2964 00001E22 A8                       db 168
  2965 00001E23 A8                       db 168
  2966 00001E24 A7                       db 167
  2967 00001E25 A7                       db 167
  2968 00001E26 A7                       db 167
  2969 00001E27 A7                       db 167
  2970 00001E28 A6                       db 166
  2971 00001E29 A6                       db 166
  2972 00001E2A A6                       db 166
  2973 00001E2B A6                       db 166
  2974 00001E2C A5                       db 165
  2975 00001E2D A5                       db 165
  2976 00001E2E A5                       db 165
  2977 00001E2F A4                       db 164
  2978 00001E30 A4                       db 164
  2979 00001E31 A4                       db 164
  2980 00001E32 A4                       db 164
  2981 00001E33 A3                       db 163
  2982 00001E34 A3                       db 163
  2983 00001E35 A3                       db 163
  2984 00001E36 A3                       db 163
  2985 00001E37 A2                       db 162
  2986 00001E38 A2                       db 162
  2987 00001E39 A2                       db 162
  2988 00001E3A A1                       db 161
  2989 00001E3B A1                       db 161
  2990 00001E3C A1                       db 161
  2991 00001E3D A1                       db 161
  2992 00001E3E A0                       db 160
  2993 00001E3F A0                       db 160
  2994 00001E40 A0                       db 160
  2995 00001E41 A0                       db 160
  2996 00001E42 9F                       db 159
  2997 00001E43 9F                       db 159
  2998 00001E44 9F                       db 159
  2999 00001E45 9F                       db 159
  3000 00001E46 9E                       db 158
  3001 00001E47 9E                       db 158
  3002 00001E48 9E                       db 158
  3003 00001E49 9D                       db 157
  3004 00001E4A 9D                       db 157
  3005 00001E4B 9D                       db 157
  3006 00001E4C 9D                       db 157
  3007 00001E4D 9C                       db 156
  3008 00001E4E 9C                       db 156
  3009 00001E4F 9C                       db 156
  3010 00001E50 9C                       db 156
  3011 00001E51 9B                       db 155
  3012 00001E52 9B                       db 155
  3013 00001E53 9B                       db 155
  3014 00001E54 9A                       db 154
  3015 00001E55 9A                       db 154
  3016 00001E56 9A                       db 154
  3017 00001E57 9A                       db 154
  3018 00001E58 99                       db 153
  3019 00001E59 99                       db 153
  3020 00001E5A 99                       db 153
  3021 00001E5B 99                       db 153
  3022 00001E5C 98                       db 152
  3023 00001E5D 98                       db 152
  3024 00001E5E 98                       db 152
  3025 00001E5F 98                       db 152
  3026 00001E60 97                       db 151
  3027 00001E61 97                       db 151
  3028 00001E62 97                       db 151
  3029 00001E63 96                       db 150
  3030 00001E64 96                       db 150
  3031 00001E65 96                       db 150
  3032 00001E66 96                       db 150
  3033 00001E67 95                       db 149
  3034 00001E68 95                       db 149
  3035 00001E69 95                       db 149
  3036 00001E6A 95                       db 149
  3037 00001E6B 94                       db 148
  3038 00001E6C 94                       db 148
  3039 00001E6D 94                       db 148
  3040 00001E6E 93                       db 147
  3041 00001E6F 93                       db 147
  3042 00001E70 93                       db 147
  3043 00001E71 93                       db 147
  3044 00001E72 92                       db 146
  3045 00001E73 92                       db 146
  3046 00001E74 92                       db 146
  3047 00001E75 92                       db 146
  3048 00001E76 91                       db 145
  3049 00001E77 91                       db 145
  3050 00001E78 91                       db 145
  3051 00001E79 91                       db 145
  3052 00001E7A 90                       db 144
  3053 00001E7B 90                       db 144
  3054 00001E7C 90                       db 144
  3055 00001E7D 8F                       db 143
  3056 00001E7E 8F                       db 143
  3057 00001E7F 8F                       db 143
  3058 00001E80 8F                       db 143
  3059 00001E81 8E                       db 142
  3060 00001E82 8E                       db 142
  3061 00001E83 8E                       db 142
  3062 00001E84 8E                       db 142
  3063 00001E85 8D                       db 141
  3064 00001E86 8D                       db 141
  3065 00001E87 8D                       db 141
  3066 00001E88 8C                       db 140
  3067 00001E89 8C                       db 140
  3068 00001E8A 8C                       db 140
  3069 00001E8B 8C                       db 140
  3070 00001E8C 8B                       db 139
  3071 00001E8D 8B                       db 139
  3072 00001E8E 8B                       db 139
  3073 00001E8F 8B                       db 139
  3074 00001E90 8A                       db 138
  3075 00001E91 8A                       db 138
  3076 00001E92 8A                       db 138
  3077 00001E93 8A                       db 138
  3078 00001E94 89                       db 137
  3079 00001E95 89                       db 137
  3080 00001E96 89                       db 137
  3081 00001E97 88                       db 136
  3082 00001E98 88                       db 136
  3083 00001E99 88                       db 136
  3084 00001E9A 88                       db 136
  3085 00001E9B 87                       db 135
  3086 00001E9C 87                       db 135
  3087 00001E9D 87                       db 135
  3088 00001E9E 87                       db 135
  3089 00001E9F 86                       db 134
  3090 00001EA0 86                       db 134
  3091 00001EA1 86                       db 134
  3092 00001EA2 85                       db 133
  3093 00001EA3 85                       db 133
  3094 00001EA4 85                       db 133
  3095 00001EA5 85                       db 133
  3096 00001EA6 84                       db 132
  3097 00001EA7 84                       db 132
  3098 00001EA8 84                       db 132
  3099 00001EA9 84                       db 132
  3100 00001EAA 83                       db 131
  3101 00001EAB 83                       db 131
  3102 00001EAC 83                       db 131
  3103 00001EAD 83                       db 131
  3104                                  
  3105 00001EAE 0000                    testx dw 0
  3106 00001EB0 0000                    testy dw 0
  3107 00001EB2 0000                    testz dw 0
  3108                                  	
  3109                                  %include  'sin256.inc'
     1                              <1> sintab:
     2 00001EB4 000001020303040506- <1>  db     0,    0,    1,    2,    3,    3,    4,    5,    6,    7,    7,    8,    9,   10,   10,   11 ; 16
     2 00001EBD 070708090A0A0B      <1>
     3 00001EC4 0C0D0E0E0F10111112- <1>  db    12,   13,   14,   14,   15,   16,   17,   17,   18,   19,   20,   21,   21,   22,   23,   24 ; 32
     3 00001ECD 13141515161718      <1>
     4 00001ED4 18191A1B1B1C1D1E1E- <1>  db    24,   25,   26,   27,   27,   28,   29,   30,   30,   31,   32,   33,   34,   34,   35,   36 ; 48
     4 00001EDD 1F202122222324      <1>
     5 00001EE4 252526272828292A2A- <1>  db    37,   37,   38,   39,   40,   40,   41,   42,   42,   43,   44,   45,   45,   46,   47,   48 ; 64
     5 00001EED 2B2C2D2D2E2F30      <1>
     6 00001EF4 303132323334353536- <1>  db    48,   49,   50,   50,   51,   52,   53,   53,   54,   55,   55,   56,   57,   58,   58,   59 ; 80
     6 00001EFD 373738393A3A3B      <1>
     7 00001F04 3C3C3D3E3E3F404041- <1>  db    60,   60,   61,   62,   62,   63,   64,   64,   65,   66,   66,   67,   68,   68,   69,   70 ; 96
     7 00001F0D 42424344444546      <1>
     8 00001F14 46474848494A4A4B4B- <1>  db    70,   71,   72,   72,   73,   74,   74,   75,   75,   76,   77,   77,   78,   79,   79,   80 ; 112
     8 00001F1D 4C4D4D4E4F4F50      <1>
     9 00001F24 505152525353545555- <1>  db    80,   81,   82,   82,   83,   83,   84,   85,   85,   86,   86,   87,   87,   88,   89,   89 ; 128
     9 00001F2D 56565757585959      <1>
    10 00001F34 5A5A5B5B5C5C5D5D5E- <1>  db    90,   90,   91,   91,   92,   92,   93,   93,   94,   95,   95,   96,   96,   97,   97,   98 ; 144
    10 00001F3D 5F5F6060616162      <1>
    11 00001F44 626363646465656566- <1>  db    98,   99,   99,  100,  100,  101,  101,  101,  102,  102,  103,  103,  104,  104,  105,  105 ; 160
    11 00001F4D 66676768686969      <1>
    12 00001F54 6A6A6A6B6B6C6C6C6D- <1>  db   106,  106,  106,  107,  107,  108,  108,  108,  109,  109,  110,  110,  110,  111,  111,  112 ; 176
    12 00001F5D 6D6E6E6E6F6F70      <1>
    13 00001F64 707071717172727273- <1>  db   112,  112,  113,  113,  113,  114,  114,  114,  115,  115,  115,  116,  116,  116,  117,  117 ; 192
    13 00001F6D 73737474747575      <1>
    14 00001F74 757676767677777778- <1>  db   117,  118,  118,  118,  118,  119,  119,  119,  120,  120,  120,  120,  121,  121,  121,  121 ; 208
    14 00001F7D 78787879797979      <1>
    15 00001F84 7A7A7A7A7A7B7B7B7B- <1>  db   122,  122,  122,  122,  122,  123,  123,  123,  123,  123,  124,  124,  124,  124,  124,  124 ; 224
    15 00001F8D 7B7C7C7C7C7C7C      <1>
    16 00001F94 7D7D7D7D7D7D7D7E7E- <1>  db   125,  125,  125,  125,  125,  125,  125,  126,  126,  126,  126,  126,  126,  126,  126,  126 ; 240
    16 00001F9D 7E7E7E7E7E7E7E      <1>
    17 00001FA4 7E7E7F7F7F7F7F7F7F- <1>  db   126,  126,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127 ; 256
    17 00001FAD 7F7F7F7F7F7F7F      <1>
    18                              <1> 
    19 00001FB4 7F7F7F7F7F7F7F7F7F- <1>  db   127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  126,  126 ; 272
    19 00001FBD 7F7F7F7F7F7E7E      <1>
    20 00001FC4 7E7E7E7E7E7E7E7E7E- <1>  db   126,  126,  126,  126,  126,  126,  126,  126,  126,  125,  125,  125,  125,  125,  125,  125 ; 288
    20 00001FCD 7D7D7D7D7D7D7D      <1>
    21 00001FD4 7C7C7C7C7C7C7B7B7B- <1>  db   124,  124,  124,  124,  124,  124,  123,  123,  123,  123,  123,  122,  122,  122,  122,  122 ; 304
    21 00001FDD 7B7B7A7A7A7A7A      <1>
    22 00001FE4 797979797878787877- <1>  db   121,  121,  121,  121,  120,  120,  120,  120,  119,  119,  119,  118,  118,  118,  118,  117 ; 320
    22 00001FED 77777676767675      <1>
    23 00001FF4 757574747473737372- <1>  db   117,  117,  116,  116,  116,  115,  115,  115,  114,  114,  114,  113,  113,  113,  112,  112 ; 336
    23 00001FFD 72727171717070      <1>
    24 00002004 706F6F6E6E6E6D6D6C- <1>  db   112,  111,  111,  110,  110,  110,  109,  109,  108,  108,  108,  107,  107,  106,  106,  106 ; 352
    24 0000200D 6C6C6B6B6A6A6A      <1>
    25 00002014 696968686767666665- <1>  db   105,  105,  104,  104,  103,  103,  102,  102,  101,  101,  101,  100,  100,   99,   99,   98 ; 368
    25 0000201D 65656464636362      <1>
    26 00002024 62616160605F5F5E5D- <1>  db    98,   97,   97,   96,   96,   95,   95,   94,   93,   93,   92,   92,   91,   91,   90,   90 ; 384
    26 0000202D 5D5C5C5B5B5A5A      <1>
    27 00002034 595958575756565555- <1>  db    89,   89,   88,   87,   87,   86,   86,   85,   85,   84,   83,   83,   82,   82,   81,   80 ; 400
    27 0000203D 54535352525150      <1>
    28 00002044 504F4F4E4D4D4C4B4B- <1>  db    80,   79,   79,   78,   77,   77,   76,   75,   75,   74,   74,   73,   72,   72,   71,   70 ; 416
    28 0000204D 4A4A4948484746      <1>
    29 00002054 464544444342424140- <1>  db    70,   69,   68,   68,   67,   66,   66,   65,   64,   64,   63,   62,   62,   61,   60,   60 ; 432
    29 0000205D 403F3E3E3D3C3C      <1>
    30 00002064 3B3A3A393837373635- <1>  db    59,   58,   58,   57,   56,   55,   55,   54,   53,   53,   52,   51,   50,   50,   49,   48 ; 448
    30 0000206D 35343332323130      <1>
    31 00002074 302F2E2D2D2C2B2A2A- <1>  db    48,   47,   46,   45,   45,   44,   43,   42,   42,   41,   40,   40,   39,   38,   37,   37 ; 464
    31 0000207D 29282827262525      <1>
    32 00002084 2423222221201F1E1E- <1>  db    36,   35,   34,   34,   33,   32,   31,   30,   30,   29,   28,   27,   27,   26,   25,   24 ; 480
    32 0000208D 1D1C1B1B1A1918      <1>
    33 00002094 181716151514131211- <1>  db    24,   23,   22,   21,   21,   20,   19,   18,   17,   17,   16,   15,   14,   14,   13,   12 ; 496
    33 0000209D 11100F0E0E0D0C      <1>
    34 000020A4 0B0A0A090807070605- <1>  db    11,   10,   10,    9,    8,    7,    7,    6,    5,    4,    3,    3,    2,    1,    0,    0 ; 512
    34 000020AD 04030302010000      <1>
    35                              <1>  
    36 000020B4 0000FFFEFDFDFCFBFA- <1>  db     0,    0,   -1,   -2,   -3,   -3,   -4,   -5,   -6,   -7,   -7,   -8,   -9,  -10,  -10,  -11 ; 528
    36 000020BD F9F9F8F7F6F6F5      <1>
    37 000020C4 F4F3F2F2F1F0EFEFEE- <1>  db   -12,  -13,  -14,  -14,  -15,  -16,  -17,  -17,  -18,  -19,  -20,  -21,  -21,  -22,  -23,  -24 ; 544
    37 000020CD EDECEBEBEAE9E8      <1>
    38 000020D4 E8E7E6E5E5E4E3E2E2- <1>  db   -24,  -25,  -26,  -27,  -27,  -28,  -29,  -30,  -30,  -31,  -32,  -33,  -34,  -34,  -35,  -36 ; 560
    38 000020DD E1E0DFDEDEDDDC      <1>
    39 000020E4 DBDBDAD9D8D8D7D6D6- <1>  db   -37,  -37,  -38,  -39,  -40,  -40,  -41,  -42,  -42,  -43,  -44,  -45,  -45,  -46,  -47,  -48 ; 576
    39 000020ED D5D4D3D3D2D1D0      <1>
    40 000020F4 D0CFCECECDCCCBCBCA- <1>  db   -48,  -49,  -50,  -50,  -51,  -52,  -53,  -53,  -54,  -55,  -55,  -56,  -57,  -58,  -58,  -59 ; 592
    40 000020FD C9C9C8C7C6C6C5      <1>
    41 00002104 C4C4C3C2C2C1C0C0BF- <1>  db   -60,  -60,  -61,  -62,  -62,  -63,  -64,  -64,  -65,  -66,  -66,  -67,  -68,  -68,  -69,  -70 ; 608
    41 0000210D BEBEBDBCBCBBBA      <1>
    42 00002114 BAB9B8B8B7B6B6B5B5- <1>  db   -70,  -71,  -72,  -72,  -73,  -74,  -74,  -75,  -75,  -76,  -77,  -77,  -78,  -79,  -79,  -80 ; 624
    42 0000211D B4B3B3B2B1B1B0      <1>
    43 00002124 B0AFAEAEADADACABAB- <1>  db   -80,  -81,  -82,  -82,  -83,  -83,  -84,  -85,  -85,  -86,  -86,  -87,  -87,  -88,  -89,  -89 ; 640
    43 0000212D AAAAA9A9A8A7A7      <1>
    44 00002134 A6A6A5A5A4A4A3A3A2- <1>  db   -90,  -90,  -91,  -91,  -92,  -92,  -93,  -93,  -94,  -95,  -95,  -96,  -96,  -97,  -97,  -98 ; 656
    44 0000213D A1A1A0A09F9F9E      <1>
    45 00002144 9E9D9D9C9C9B9B9B9A- <1>  db   -98,  -99,  -99, -100, -100, -101, -101, -101, -102, -102, -103, -103, -104, -104, -105, -105 ; 672
    45 0000214D 9A999998989797      <1>
    46 00002154 969696959594949493- <1>  db  -106, -106, -106, -107, -107, -108, -108, -108, -109, -109, -110, -110, -110, -111, -111, -112 ; 688
    46 0000215D 93929292919190      <1>
    47 00002164 90908F8F8F8E8E8E8D- <1>  db  -112, -112, -113, -113, -113, -114, -114, -114, -115, -115, -115, -116, -116, -116, -117, -117 ; 704
    47 0000216D 8D8D8C8C8C8B8B      <1>
    48 00002174 8B8A8A8A8A89898988- <1>  db  -117, -118, -118, -118, -118, -119, -119, -119, -120, -120, -120, -120, -121, -121, -121, -121 ; 720
    48 0000217D 88888887878787      <1>
    49 00002184 868686868685858585- <1>  db  -122, -122, -122, -122, -122, -123, -123, -123, -123, -123, -124, -124, -124, -124, -124, -124 ; 736
    49 0000218D 85848484848484      <1>
    50 00002194 838383838383838282- <1>  db  -125, -125, -125, -125, -125, -125, -125, -126, -126, -126, -126, -126, -126, -126, -126, -126 ; 752
    50 0000219D 82828282828282      <1>
    51 000021A4 828281818181818181- <1>  db  -126, -126, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127 ; 768
    51 000021AD 81818181818181      <1>
    52                              <1>  
    53 000021B4 818181818181818181- <1>  db  -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -126, -126 ; 784
    53 000021BD 81818181818282      <1>
    54 000021C4 828282828282828282- <1>  db  -126, -126, -126, -126, -126, -126, -126, -126, -126, -125, -125, -125, -125, -125, -125, -125 ; 800
    54 000021CD 83838383838383      <1>
    55 000021D4 848484848484858585- <1>  db  -124, -124, -124, -124, -124, -124, -123, -123, -123, -123, -123, -122, -122, -122, -122, -122 ; 816
    55 000021DD 85858686868686      <1>
    56 000021E4 878787878888888889- <1>  db  -121, -121, -121, -121, -120, -120, -120, -120, -119, -119, -119, -118, -118, -118, -118, -117 ; 832
    56 000021ED 89898A8A8A8A8B      <1>
    57 000021F4 8B8B8C8C8C8D8D8D8E- <1>  db  -117, -117, -116, -116, -116, -115, -115, -115, -114, -114, -114, -113, -113, -113, -112, -112 ; 848
    57 000021FD 8E8E8F8F8F9090      <1>
    58 00002204 909191929292939394- <1>  db  -112, -111, -111, -110, -110, -110, -109, -109, -108, -108, -108, -107, -107, -106, -106, -106 ; 864
    58 0000220D 94949595969696      <1>
    59 00002214 9797989899999A9A9B- <1>  db  -105, -105, -104, -104, -103, -103, -102, -102, -101, -101, -101, -100, -100,  -99,  -99,  -98 ; 880
    59 0000221D 9B9B9C9C9D9D9E      <1>
    60 00002224 9E9F9FA0A0A1A1A2A3- <1>  db   -98,  -97,  -97,  -96,  -96,  -95,  -95,  -94,  -93,  -93,  -92,  -92,  -91,  -91,  -90,  -90 ; 896
    60 0000222D A3A4A4A5A5A6A6      <1>
    61 00002234 A7A7A8A9A9AAAAABAB- <1>  db   -89,  -89,  -88,  -87,  -87,  -86,  -86,  -85,  -85,  -84,  -83,  -83,  -82,  -82,  -81,  -80 ; 912
    61 0000223D ACADADAEAEAFB0      <1>
    62 00002244 B0B1B1B2B3B3B4B5B5- <1>  db   -80,  -79,  -79,  -78,  -77,  -77,  -76,  -75,  -75,  -74,  -74,  -73,  -72,  -72,  -71,  -70 ; 928
    62 0000224D B6B6B7B8B8B9BA      <1>
    63 00002254 BABBBCBCBDBEBEBFC0- <1>  db   -70,  -69,  -68,  -68,  -67,  -66,  -66,  -65,  -64,  -64,  -63,  -62,  -62,  -61,  -60,  -60 ; 944
    63 0000225D C0C1C2C2C3C4C4      <1>
    64 00002264 C5C6C6C7C8C9C9CACB- <1>  db   -59,  -58,  -58,  -57,  -56,  -55,  -55,  -54,  -53,  -53,  -52,  -51,  -50,  -50,  -49,  -48 ; 960
    64 0000226D CBCCCDCECECFD0      <1>
    65 00002274 D0D1D2D3D3D4D5D6D6- <1>  db   -48,  -47,  -46,  -45,  -45,  -44,  -43,  -42,  -42,  -41,  -40,  -40,  -39,  -38,  -37,  -37 ; 976
    65 0000227D D7D8D8D9DADBDB      <1>
    66 00002284 DCDDDEDEDFE0E1E2E2- <1>  db   -36,  -35,  -34,  -34,  -33,  -32,  -31,  -30,  -30,  -29,  -28,  -27,  -27,  -26,  -25,  -24 ; 992
    66 0000228D E3E4E5E5E6E7E8      <1>
    67 00002294 E8E9EAEBEBECEDEEEF- <1>  db   -24,  -23,  -22,  -21,  -21,  -20,  -19,  -18,  -17,  -17,  -16,  -15,  -14,  -14,  -13,  -12 ; 1008
    67 0000229D EFF0F1F2F2F3F4      <1>
    68 000022A4 F5F6F6F7F8F9F9FAFB- <1>  db   -11,  -10,  -10,   -9,   -8,   -7,   -7,   -6,   -5,   -4,   -3,   -3,   -2,   -1,    0,    0 ; 1024
    68 000022AD FCFDFDFEFF0000      <1>
  3110                                  
  3111 000022B4 B8003C012200EB00C2-     PointList: dw 0b8h, 13ch, 22h, 0ebh, 0c2h, 016h, 0, 0
  3111 000022BD 00160000000000     
  3112                                  
  3113 000022C4 B8003C012200EB00C2-     PointList2: dw 0b8h, 13ch, 22h, 0ebh, 0c2h, 016h, 0, 0
  3113 000022CD 00160000000000     
  3114                                   
  3115 000022D4 0100FFFFFFFF0100FF-     DirList:	dw 1,-1,-1,1,-1,1 
  3115 000022DD FF0100             
  3116 000022E0 01000100                 dw	1,1
  3117 000022E4 FFFF0100                 dw	-1,1
  3118 000022E8 0100FFFF                 dw	1,-1
  3119 000022EC 0100FFFF0100FFFF01-      dw 	+1,-1,+1,-1,+1,-1,+1,-1,+1,-1,+1,-1
  3119 000022F5 00FFFF0100FFFF0100-
  3119 000022FE FFFF0100FFFF       
  3120                                  
  3121                                  ;FillJumpTable:	dw	0
  3122                                  
  3123                                  section .bss 	; put uninitialized data here
  3124 00000000 <res 194h>              BackBufferTable: 	resw 202 	; 200 screen lines as words
  3125 00000194 <res 8000h>             BackBuffer: 		resw 16384	; 2 screen buffers
  3126                                  
  3127 00008194 <res C80h>              EdgeTable	resd	800
  3128                                  
  3129                                  
  3130                                  
  3131                                  ObjectPointsResults:
  3132 00008E14 <res 100h>              ObjectYPos:	resw	128 ; 128 words - xpos
  3133 00008F14 <res 100h>              ObjectXPos:	resw	128 ; 128 words - ypos
  3134 00009014 <res 100h>              ObjectClipCode:	resw	128 ; 128 words - clip codes
  3135 00009114 <res 100h>              ObjectXRot:	resw	128 ; 128 words - x rotated points
  3136 00009214 <res 100h>              ObjectYRot:	resw	128 ; 128 words - y rotated points
  3137 00009314 <res 100h>              ObjectZRot:	resw	128 ; 128 words - z rotated points
  3138                                  
  3139 00009414 ????                    SinX:		resw	1
  3140 00009416 ????                    CosX:	resw	1
  3141 00009418 ????                    SinY:		resw	1
  3142 0000941A ????                    CosY:	resw	1
  3143 0000941C ????                    SinZ:		resw	1
  3144 0000941E ????                    CosZ:	resw	1
  3145                                  
  3146 00009420 ????                    XST		resw	1
  3147 00009422 ????                    YST		resw	1
  3148 00009424 ????                    XEN		resw	1
  3149 00009426 ????                    YEN		resw	1
  3150 00009428 ??                      CCST	resb	1
  3151 00009429 ??                      CCEN	resb	1
  3152                                  
  3153 0000942A ????                    XAngle:	resw	1
  3154 0000942C ????                    YAngle:	resw	1
  3155 0000942E ????                    ZAngle:	resw	1
  3156                                  
  3157 00009430 ??                      Exit:	resb	1
  3158                                  
  3159 00009431 ????                    STX:		resw	1
  3160 00009433 ????                    STY:		resw	1
  3161 00009435 ????                    STZ:		resw	1
  3162 00009437 ????                    ENX:		resw	1
  3163 00009439 ????                    ENY:		resw	1
  3164 0000943B ????                    ENZ:		resw	1
  3165                                  
  3166 0000943D ????                    Test0: 	resw	1
  3167 0000943F ????                    Test1: 	resw	1
  3168 00009441 ????                    Test2: 	resw	1
  3169 00009443 ????                    Test3: 	resw	1
  3170 00009445 ????                    Test4: 	resw	1
  3171 00009447 ????                    Test5: 	resw	1
  3172 00009449 ????                    Test6: 	resw	1
  3173 0000944B ????                    Test7: 	resw	1
  3174 0000944D ????                    Test8: 	resw	1
  3175 0000944F ????                    Test9: 	resw	1
  3176                                  
  3177 00009451 ????                    BackBufferSeg	resw	1	; pointer to the segment containing the back buffer
  3178                                  
  3179 00009453 ??                      Colour resb 1
