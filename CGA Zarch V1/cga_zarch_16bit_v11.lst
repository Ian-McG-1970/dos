     1                                  ; nasm cga_line_v7.asm -o cgaline.com -f bin
     2                                  
     3                                  
     4                                  ; list of next line tables - even values = +8192 odd values = -8192 - put into 2 registers - swap registers after each next line
     5                                  
     6                                  VIDEO_SEGMENT	equ	0b800h 	; display memory segment for true CGA graphics modes
     7                                  SW				equ 80 		; screen width
     8                                  SE				equ	0		; screen even start
     9                                  SO				equ	8192	; screen odd start
    10                                  
    11                                  
    12                                  INPUT_STATUS_1	equ	03dah	; VGA status register
    13                                  VSYNC_MASK	equ	08h	; vertical sync bit in status register 1
    14                                  DE_MASK		equ	01h	; display enable bit in status register 1
    15                                  
    16                                  MAP_MASK	equ	2		; SC map mask register
    17                                  SC_INDEX		equ	3c4h	; SC index register
    18                                   
    19                                  TOP_CC		equ	1
    20                                  BOTTOM_CC	equ	2
    21                                  LEFT_CC		equ	4
    22                                  RIGHT_CC	equ	8
    23                                  BEHIND_CC	equ	16
    24                                  BACK_CC		equ 16
    25                                  FRONT_CC 	equ 32
    26                                  
    27                                  MIDDLE_X		equ	160
    28                                  MIDDLE_Y		equ	100
    29                                  TOP_EDGE	equ	MIDDLE_Y-100
    30                                  BOTTOM_EDGE	equ	MIDDLE_Y+99
    31                                  LEFT_EDGE	equ	MIDDLE_X-160
    32                                  RIGHT_EDGE	equ	MIDDLE_X+159
    33                                  
    34                                  KEY_1	EQU	0231h
    35                                  KEY_2	EQU	0332h
    36                                  KEY_3	EQU	0433h
    37                                  KEY_4 	EQU	0534h
    38                                  KEY_5 	EQU	0635h
    39                                  KEY_6 	EQU	0736h
    40                                  KEY_ESC	EQU 27
    41                                  
    42                                  CPU 8086
    43                                  bits 16
    44                                  org 100h
    45                                  
    46                                  section .text
    47                                  
    48                                  start:
    49 00000000 E89C01                  	call	BuildScreenTable
    50 00000003 B80400                  	mov	ax,04h 	; CGA 320 x 200 4 colors
    51 00000006 CD10                    	int		10h
    52                                  
    53                                  ;	mov	ax,0Bh 	; Pallette
    54                                  ;	mov	bh,1
    55                                  ;	mov	bl,0
    56                                  ;	mov	bx,00000h ; pallette 0 high
    57                                  ;	int	10h 
    58                                  	
    59 00000008 B44A                    	mov	ah, 4ah
    60 0000000A BB0010                  	mov	bx, 1000h
    61 0000000D CD21                    	int	21h
    62 0000000F B448                    	mov	ah, 48h
    63 00000011 BB0010                  	mov	bx, 1000h
    64 00000014 CD21                    	int	21h
    65 00000016 A3[D187]                	mov	[BackBufferSeg], ax
    66                                  
    67 00000019 31C0                    	xor ax,ax
    68 0000001B A2[B087]                	mov	[Exit],al
    69 0000001E A3[AA87]                	mov	[XAngle],ax
    70 00000021 A3[AC87]                	mov	[YAngle],ax		
    71 00000024 A3[AE87]                	mov	[ZAngle],ax
    72                                  	
    73                                  ;	mov	[Test0],ax
    74                                  	
    75                                  MainLoop:
    76 00000027 E8E403                  		call	WaitVSync ; Wait for vertical sync so the new start address has a chance to take effect.
    77 0000002A E8EF03                  		call	CopyClearBackBuffer ; copy back to front
    78                                  	
    79 0000002D 8B1E[D187]              		mov		bx,[BackBufferSeg]
    80 00000031 8EC3                    		mov		es,bx
    81                                  
    82 00000033 B300                    		mov		bl,0
    83 00000035 A1[7C0D]                		mov		ax,[XOffset]
    84                                  ;		call	Hex16
    85 00000038 B301                    		mov		bl,1
    86 0000003A A1[7E0D]                		mov		ax,[YOffset]
    87                                  ;		call	Hex16
    88 0000003D B302                    		mov		bl,2
    89 0000003F A1[800D]                		mov		ax,[ZOffset]
    90                                  ;		call	Hex16
    91                                  
    92 00000042 B304                    		mov		bl,4
    93 00000044 A1[AA87]                		mov		ax,[XAngle]
    94                                  ;		call	Hex16
    95 00000047 B305                    		mov		bl,5
    96 00000049 A1[AC87]                		mov		ax,[YAngle]
    97                                  ;		call	Hex16
    98 0000004C B306                    		mov		bl,6
    99 0000004E A1[AE87]                		mov		ax,[ZAngle]
   100                                  ;		call	Hex16
   101                                  
   102 00000051 B308                    	mov		bl,8
   103 00000053 A1[820F]                	mov		ax,[testx]
   104 00000056 E84A0A                  	call	Hex16
   105 00000059 B309                    	mov		bl,9
   106 0000005B A1[840F]                	mov		ax,[testy]
   107 0000005E E8420A                  	call	Hex16
   108 00000061 B30A                    	mov		bl,10
   109 00000063 A1[860F]                	mov		ax,[testz]
   110 00000066 E83A0A                  	call	Hex16
   111                                  
   112 00000069 8B1E[860F]              	mov		bx,[testz]
   113 0000006D 8B16[820F]              	mov		dx,[testx]
   114 00000071 8B0E[840F]              	mov		cx,[testy]
   115 00000075 E8910C                  	call	PerspectiveZW
   116                                  
   117 00000078 30FF                    	xor		bh,bh
   118 0000007A 53                      	push	bx
   119 0000007B B30C                    	mov		bl,12
   120                                  ;	call	Hex16
   121                                  	
   122 0000007D 58                      	pop		ax
   123 0000007E B30D                    	mov		bl,13
   124                                  ;	call	Hex8
   125                                  
   126 00000080 8B1E[860F]              	mov		bx,[testz]
   127 00000084 8B16[820F]              	mov		dx,[testx]
   128 00000088 8B0E[840F]              	mov		cx,[testy]
   129 0000008C E87A0C                  	call	PerspectiveZW
   130 0000008F 89CD                    	mov		bp,cx
   131 00000091 E8D803                  	call	Plot11
   132                                  
   133 00000094 BBFE01                  	mov		bx,510
   134 00000097 BAFE01                  	mov		dx,510
   135 0000009A B90100                  	mov		cx,1
   136 0000009D E8690C                  	call	PerspectiveZW
   137 000000A0 89CD                    	mov		bp,cx
   138 000000A2 E8C703                  	call	Plot11
   139                                  
   140 000000A5 BBFE01                  	mov		bx,510
   141 000000A8 BA0100                  	mov		dx,1
   142 000000AB B90100                  	mov		cx,1
   143 000000AE E8580C                  	call	PerspectiveZW
   144 000000B1 89CD                    	mov		bp,cx
   145 000000B3 E8B603                  	call	Plot11
   146                                  
   147 000000B6 BBFE01                  	mov		bx,510
   148 000000B9 BAFE01                  	mov		dx,510
   149 000000BC B9FE01                  	mov		cx,510
   150 000000BF E8470C                  	call	PerspectiveZW
   151 000000C2 89CD                    	mov		bp,cx
   152 000000C4 E8A503                  	call	Plot11
   153                                  
   154 000000C7 BBFE01                  	mov		bx,510
   155 000000CA BA0100                  	mov		dx,1
   156 000000CD B9FE01                  	mov		cx,510
   157 000000D0 E8360C                  	call	PerspectiveZW
   158 000000D3 89CD                    	mov		bp,cx
   159 000000D5 E89403                  	call	Plot11
   160                                  
   161 000000D8 BB0100                  	mov		bx,1
   162 000000DB BAFE01                  	mov		dx,510
   163 000000DE B90100                  	mov		cx,1
   164 000000E1 E8250C                  	call	PerspectiveZW
   165 000000E4 89CD                    	mov		bp,cx
   166 000000E6 E88303                  	call	Plot11
   167                                  
   168 000000E9 BB0100                  	mov		bx,1
   169 000000EC BA0100                  	mov		dx,1
   170 000000EF B90100                  	mov		cx,1
   171 000000F2 E8140C                  	call	PerspectiveZW
   172 000000F5 89CD                    	mov		bp,cx
   173 000000F7 E87203                  	call	Plot11
   174                                  
   175 000000FA BB0100                  	mov		bx,1
   176 000000FD BAFE01                  	mov		dx,510
   177 00000100 B9FE01                  	mov		cx,510
   178 00000103 E8030C                  	call	PerspectiveZW
   179 00000106 89CD                    	mov		bp,cx
   180 00000108 E86103                  	call	Plot11
   181                                  
   182 0000010B BB0100                  	mov		bx,1
   183 0000010E BA0100                  	mov		dx,1
   184 00000111 B9FE01                  	mov		cx,510
   185 00000114 E8F20B                  	call	PerspectiveZW
   186 00000117 89CD                    	mov		bp,cx
   187 00000119 E85003                  	call	Plot11
   188                                  
   189 0000011C A1[AA87]                		mov	ax,[XAngle]
   190 0000011F 83C001                  		add	ax,1
   191 00000122 25FF03                  		and ax,03ffh
   192 00000125 A3[AA87]                		mov	[XAngle],ax
   193 00000128 A1[AC87]                		mov	ax,[YAngle]
   194 0000012B 83E801                  		sub	ax,1
   195 0000012E 25FF03                  		and ax,03ffh
   196 00000131 A3[AC87]                		mov	[YAngle],ax
   197 00000134 A1[AE87]                		mov	ax,[ZAngle]
   198 00000137 83C001                  		add	ax,1
   199 0000013A 25FF03                  		and ax,03ffh
   200 0000013D A3[AE87]                		mov	[ZAngle],ax
   201                                  ;		call	BuildRotateMatrix
   202                                  
   203                                  ;		mov word	[XOffset],0
   204                                  ;		mov word	[YOffset],0
   205                                  ;		mov word	[ZOffset],250
   206 00000140 BE[D00C]                		mov	si,ObjectPoints00 ; points
   207 00000143 BF[600D]                		mov	di,ObjectLines00 ; lines
   208 00000146 B108                    		mov	cl,8 ; 8 		; points
   209 00000148 B50C                    		mov	ch,12 ; 12	; lines
   210                                  ;		call 		DrawObject
   211                                  
   212                                  ;		mov word	[XOffset],200
   213                                  ;		mov word	[YOffset],200
   214                                  ;		mov word	[ZOffset],200
   215 0000014A BE[D00C]                		mov	si,ObjectPoints00 ; points
   216 0000014D BF[600D]                		mov	di,ObjectLines00 ; lines
   217 00000150 B108                    		mov	cl,8 ; 8 		; points
   218 00000152 B50C                    		mov	ch,12 ; 12	; lines
   219 00000154 E86F09                  		call 		DrawObjectZW
   220                                  
   221                                  
   222                                  
   223 00000157 B316                    		mov		bl,22
   224 00000159 A1[BD87]                		mov		ax,[Test0]
   225 0000015C E84409                  		call	Hex16
   226 0000015F B317                    		mov		bl,23
   227 00000161 A1[BF87]                		mov		ax,[Test1]
   228 00000164 E83C09                  		call	Hex16
   229 00000167 B318                    		mov		bl,24
   230 00000169 A1[C187]                		mov		ax,[Test2]
   231 0000016C E83409                  		call	Hex16
   232 0000016F B319                    		mov		bl,25
   233 00000171 A1[C387]                		mov		ax,[Test3]
   234 00000174 E82C09                  		call	Hex16
   235 00000177 B31A                    		mov		bl,26
   236 00000179 A1[C587]                		mov		ax,[Test4]
   237 0000017C E82409                  		call	Hex16
   238                                  ;		mov		bl,27
   239                                  ;		mov		ax,[Test5]
   240                                  ;		call	Hex16
   241                                  ;		mov		bl,28
   242                                  ;		mov		ax,[Test6]
   243                                  ;		call	Hex16
   244                                  ;		mov		bl,29
   245                                  ;		mov		ax,[Test7]
   246                                  ;		call	Hex16
   247                                  ;		mov		bl,30
   248                                  ;		mov		ax,[Test8]
   249                                  ;		call	Hex16
   250                                  ;		mov		bl,31
   251                                  ;		mov		ax,[Test9]
   252                                  ;		call	Hex16
   253                                  
   254 0000017F B314                    		mov		bl,20
   255 00000181 B85020                  		mov		ax,8192+80
   256                                  ;		call	Hex16
   257 00000184 B315                    		mov		bl,21
   258 00000186 B850E0                  		mov		ax,-8192+80
   259                                  ;		call	Hex16
   260                                  	
   261                                  		
   262                                  ;		call	Test
   263                                  		
   264 00000189 E8D701                  		call	GetKey
   265                                  		
   266 0000018C A0[B087]                	mov		al,[Exit]
   267 0000018F 08C0                    	or		al,al
   268 00000191 7503E991FE              	je		MainLoop
   269                                  
   270 00000196 B80300                  Done:	mov		ax,3	; reset to text mode
   271 00000199 CD10                    		int		10h
   272 0000019B B44C                    		mov		ah,4ch	; exit to DOS
   273 0000019D CD21                    		int		21h
   274                                  
   275 0000019F 8D3E[0000]              BuildScreenTable:	lea		di,[BackBufferTable]
   276 000001A3 31ED                    					xor		bp,bp	; even lines
   277 000001A5 B96400                  					mov		cx,100
   278 000001A8 892D                    .loop:					mov		[di],bp
   279 000001AA 81C50020                						add		bp,8192
   280 000001AE 896D02                  						mov		[di+2],bp
   281 000001B1 81EDB01F                						sub		bp,8192-80
   282 000001B5 83C704                  						add		di,4
   283 000001B8 E2EE                    						loop	.loop
   284 000001BA C3                      					ret
   285                                  
   286 000001BB 39F2                    Line11:		cmp		dx,si 	; vs le ve?
   287 000001BD 7306                    			jnc		.noswap	; yes
   288 000001BF 87F2                    				xchg	si,dx	; swap vs,ve
   289 000001C1 87E9                    				xchg	bp,cx	; swap hs,he
   290 000001C3 EB06                    				jmp	.vdiff
   291                                  
   292 000001C5 7504                    .noswap:	jne		.vdiff			; v not same
   293 000001C7 39E9                    			cmp		cx,bp		; v is same 
   294 000001C9 7436                    			je 		.quit		; h is same
   295                                  
   296 000001CB 29F2                    .vdiff:		sub		dx,si	; ver diff = ve-vs
   297 000001CD 29E9                    			sub		cx,bp	; hs le he? - replace with sub below? todo
   298 000001CF 7360                    			jnc		.hforward	; yes
   299                                  
   300 000001D1 F7D9                    .hbackward:	neg 	cx	 		; decrement line across everytime and line down every few times
   301 000001D3 39D1                     			cmp		cx,dx
   302 000001D5 7501                    			jne		.hbnodiag ; .quit ; .vbackward ; .quit ;	.vbackward
   303 000001D7 41                      					inc		cx	; diagonal
   304 000001D8 7228                    .hbnodiag:	jc		.vbackward
   305                                  
   306 000001DA F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   307 000001DC 01F6                    			add		si,si	; start ver *2
   308 000001DE 01ED                    			add		bp,bp	; start hor *2
   309 000001E0 81C6[0000]              			add		si,BackBufferTable
   310 000001E4 3E8B3C                  			mov		di,[ds:si]	; lookup start ver		
   311                                  	
   312 000001E7 00E0                    .hbloop:		add 	al,ah	; fraction to current
   313 000001E9 7306                    				jnc		.hbplot	;
   314 000001EB 83C602                  					add		si,2
   315 000001EE 3E8B3C                  					mov		di,[ds:si]	; lookup start ver
   316                                  
   317 000001F1 8B9E[000A]              .hbplot:		mov		bx,[HorPosTable+bp]
   318 000001F5 8AB6[0000]              				mov		dh,[OrTable+bp]
   319 000001F9 260831                  				or byte [es:di+bx],dh
   320                                  
   321 000001FC 83ED02                  				sub		bp,2		; next hor
   322 000001FF E2E6                    				loop	.hbloop		; dec cx jnz
   323 00000201 C3                      .quit:		ret
   324                                  
   325 00000202 87D1                    .vbackward: xchg 	dx,cx			; decrement line down everytime and line across every few times
   326 00000204 F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   327                                  
   328 00000206 01F6                    			add		si,si	; start ver *2
   329 00000208 01ED                    			add		bp,bp	; start hor *2
   330 0000020A 81C6[0000]              			add		si,BackBufferTable
   331                                  	
   332 0000020E 8AB6[0000]              			mov		dh,[OrTable+bp]
   333 00000212 8B9E[000A]              			mov		bx,[HorPosTable+bp]
   334                                  	
   335 00000216 00E0                    .vbloop:		add 	al,ah	; fraction to current
   336 00000218 730B                    				jnc		.vbplot	;
   337 0000021A 83ED02                  					sub		bp,2
   338 0000021D 8AB6[0000]              					mov		dh,[OrTable+bp]
   339 00000221 8B9E[000A]              					mov		bx,[HorPosTable+bp]
   340                                  		
   341 00000225 3E8B3C                  .vbplot:		mov		di,[ds:si]	; lookup start ver
   342 00000228 260831                  				or byte [es:di+bx],dh
   343                                  
   344 0000022B 83C602                  				add		si,2		; next ver
   345 0000022E E2E6                    				loop	.vbloop		; dec cl jnz
   346 00000230 C3                      			ret
   347                                  
   348 00000231 39D1                    .hforward: 	cmp		cx,dx			; increment line across everytime and line down every few times
   349 00000233 7501                    			jne		.hfnodiag
   350 00000235 41                      				inc 	cx	; diagonal
   351 00000236 7228                    .hfnodiag:	jc		.vforward
   352                                  
   353 00000238 F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   354 0000023A 01F6                    			add		si,si	; start ver *2
   355 0000023C 01ED                    			add		bp,bp	; start hor *2
   356 0000023E 81C6[0000]              			add		si,BackBufferTable
   357 00000242 3E8B3C                  			mov		di,[ds:si]	; lookup start ver
   358                                  
   359 00000245 00E0                    .hfloop:		add 	al,ah	; fraction to current
   360 00000247 7306                    				jnc		.hfplot	;
   361 00000249 83C602                  					add		si,2
   362 0000024C 3E8B3C                  					mov		di,[ds:si]	; lookup start ver		
   363                                  
   364 0000024F 8B9E[000A]              .hfplot:		mov		bx,[HorPosTable+bp]
   365 00000253 8AB6[0000]              				mov		dh,[OrTable+bp]
   366 00000257 260831                  				or byte [es:di+bx],dh
   367                                  
   368 0000025A 83C502                  				add		bp,2		; next hor
   369 0000025D E2E6                    				loop	.hfloop		; dec cx jnz
   370 0000025F C3                      			ret
   371                                  
   372                                  ;	mov		di,[ds:si]
   373                                  
   374 00000260 87D1                    .vforward:	xchg 	dx,cx			; increment line down everytime and line across every few times
   375 00000262 F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   376                                  
   377 00000264 01F6                    			add		si,si	; start ver *2
   378 00000266 01ED                    			add		bp,bp	; start hor *2
   379 00000268 81C6[0000]              			add		si,BackBufferTable
   380                                  
   381 0000026C 8AB6[0000]              			mov		dh,[OrTable+bp]
   382 00000270 8B9E[000A]              			mov		bx,[HorPosTable+bp]
   383                                  	
   384 00000274 00E0                    .vfloop:		add 	al,ah	; fraction to current
   385 00000276 730B                    				jnc		.vfplot	;
   386 00000278 83C502                  					add		bp,2
   387 0000027B 8AB6[0000]              					mov		dh,[OrTable+bp]
   388 0000027F 8B9E[000A]              					mov		bx,[HorPosTable+bp]
   389                                  		
   390 00000283 3E8B3C                  .vfplot:		mov		di,[ds:si]	; lookup start ver
   391 00000286 260831                  				or byte [es:di+bx],dh
   392                                  
   393 00000289 83C602                  				add		si,2		; next ver
   394 0000028C E2E6                    				loop	.vfloop		; dec cl jnz
   395 0000028E C3                      			ret
   396                                  
   397 0000028F 39F2                    Line00:		cmp		dx,si 	; vs le ve?
   398 00000291 7306                    			jnc		.noswap	; yes
   399 00000293 87F2                    				xchg	si,dx	; swap vs,ve
   400 00000295 87E9                    				xchg	bp,cx	; swap hs,he
   401 00000297 EB06                    				jmp	.vdiff
   402                                  
   403 00000299 7504                    .noswap:	jne		.vdiff			; v not same
   404 0000029B 39E9                    				cmp		cx,bp		; v is same 
   405 0000029D 7436                    				je 		.quit		; h is same
   406                                  
   407 0000029F 29F2                    .vdiff:		sub		dx,si	; ver diff = ve-vs
   408 000002A1 29E9                    			sub		cx,bp	; hs le he? - replace with sub below? todo
   409 000002A3 7360                    			jnc		.hforward	; yes
   410                                  
   411 000002A5 F7D9                    .hbackward:	neg 	cx		; decrement line across everytime and line down every few times
   412                                   
   413 000002A7 39D1                    			cmp		cx,dx
   414 000002A9 7501                    			jne		.hbnodiag ; .quit ; .vbackward ; .quit ;	.vbackward
   415 000002AB 41                      				inc	cx	; diagonal
   416 000002AC 7228                    .hbnodiag:	jc		.vbackward
   417                                  
   418 000002AE F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   419 000002B0 01F6                    			add		si,si	; start ver *2
   420 000002B2 01ED                    			add		bp,bp	; start hor *2
   421 000002B4 81C6[0000]              			add		si,BackBufferTable
   422 000002B8 3E8B3C                  			mov		di,[ds:si]	; lookup start ver
   423                                  	
   424 000002BB 00E0                    .hbloop:		add 	al,ah	; fraction to current
   425 000002BD 7306                    				jnc		.hbplot	;
   426 000002BF 83C602                  					add		si,2
   427 000002C2 3E8B3C                  					mov		di,[ds:si]	; lookup start ver
   428                                  
   429 000002C5 8B9E[000A]              .hbplot:		mov		bx,[HorPosTable+bp]
   430 000002C9 8AB6[0005]              				mov		dh,[AndTable+bp]
   431 000002CD 262031                  				and byte [es:di+bx],dh
   432                                  
   433 000002D0 83ED02                  				sub		bp,2		; next hor
   434 000002D3 E2E6                    				loop	.hbloop		; dec cx jnz
   435 000002D5 C3                      .quit:		ret
   436                                  
   437 000002D6 87D1                    .vbackward:	xchg 	dx,cx		; decrement line down everytime and line across every few times
   438 000002D8 F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   439                                  
   440 000002DA 01F6                    			add		si,si	; start ver *2
   441 000002DC 01ED                    			add		bp,bp	; start hor *2
   442 000002DE 81C6[0000]              			add		si,BackBufferTable
   443 000002E2 8AB6[0005]              			mov		dh,[AndTable+bp]
   444 000002E6 8B9E[000A]              			mov		bx,[HorPosTable+bp]
   445                                  	
   446 000002EA 00E0                    .vbloop:		add 	al,ah	; fraction to current
   447 000002EC 730B                    				jnc		.vbplot	;
   448 000002EE 83ED02                  					sub		bp,2
   449 000002F1 8AB6[0005]              					mov		dh,[AndTable+bp]
   450 000002F5 8B9E[000A]              					mov		bx,[HorPosTable+bp]
   451                                  		
   452 000002F9 3E8B3C                  .vbplot:		mov		di,[ds:si]	; lookup start ver
   453 000002FC 262031                  				and byte [es:di+bx],dh
   454                                  
   455 000002FF 83C602                  				add		si,2		; next ver
   456 00000302 E2E6                    				loop	.vbloop		; dec cl jnz
   457 00000304 C3                      			ret
   458                                  
   459 00000305 39D1                    .hforward: 	cmp		cx,dx		; increment line across everytime and line down every few times
   460 00000307 7501                    			jne		.hfnodiag
   461 00000309 41                      				inc 	cx	; diagonal
   462 0000030A 7228                    .hfnodiag:	jc		.vforward
   463                                  
   464 0000030C F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   465 0000030E 01F6                    			add		si,si	; start ver *2
   466 00000310 01ED                    			add		bp,bp	; start hor *2
   467 00000312 81C6[0000]              			add		si,BackBufferTable
   468 00000316 3E8B3C                  			mov		di,[ds:si]	; lookup start ver
   469                                  	
   470 00000319 00E0                    .hfloop:		add 	al,ah	; fraction to current
   471 0000031B 7306                    				jnc		.hfplot	;
   472 0000031D 83C602                  					add		si,2
   473 00000320 3E8B3C                  					mov		di,[ds:si]	; lookup start ver		
   474                                  
   475 00000323 8B9E[000A]              .hfplot:		mov		bx,[HorPosTable+bp]
   476 00000327 8AB6[0005]              				mov		dh,[AndTable+bp]
   477 0000032B 262031                  				and byte [es:di+bx],dh
   478                                  	
   479 0000032E 83C502                  				add		bp,2		; next hor
   480 00000331 E2E6                    				loop	.hfloop		; dec cx jnz
   481 00000333 C3                      			ret
   482                                  
   483 00000334 87D1                    .vforward: 	xchg 	dx,cx			; increment line down everytime and line across every few times
   484 00000336 F7F1                    			div 	cx		; dx:ax *bx = ax*65536 *bx
   485                                  
   486 00000338 01F6                    			add		si,si	; start ver *2
   487 0000033A 01ED                    			add		bp,bp	; start hor *2
   488 0000033C 81C6[0000]              			add		si,BackBufferTable
   489 00000340 8AB6[0005]              			mov		dh,[AndTable+bp]
   490 00000344 8B9E[000A]              			mov		bx,[HorPosTable+bp]
   491                                  	
   492 00000348 00E0                    .vfloop:		add 	al,ah	; fraction to current
   493 0000034A 730B                    				jnc		.vfplot	;
   494 0000034C 83C502                  					add		bp,2
   495 0000034F 8AB6[0005]              					mov		dh,[AndTable+bp]
   496 00000353 8B9E[000A]              					mov		bx,[HorPosTable+bp]
   497                                  		
   498 00000357 3E8B3C                  .vfplot:		mov		di,[ds:si]	; lookup start ver
   499 0000035A 262031                  				and byte [es:di+bx],dh
   500                                  
   501 0000035D 83C602                  				add		si,2		; next ver
   502 00000360 E2E6                    				loop	.vfloop		; dec cl jnz
   503 00000362 C3                      			ret
   504                                  
   505                                  GetKey:
   506 00000363 B411                    	mov	ah,11h
   507 00000365 CD16                    	int	16h         	; has a key been pressed
   508 00000367 7426                    	jz	.key_none ; no
   509 00000369 B410                    	mov	ah,10h      ; yes 
   510 0000036B CD16                    	int	16h         	; get it in AX (al= ascii, ah=scan code)
   511 0000036D 3C1B                    	cmp	al,KEY_ESC
   512 0000036F 741F                    	je	.key_esc
   513 00000371 3D3102                  	cmp 	ax,KEY_1
   514 00000374 7420                    	je 	.key_1
   515 00000376 3D3203                  	cmp 	ax,KEY_2
   516 00000379 742F                    	je 	.key_2
   517 0000037B 3D3304                  	cmp 	ax,KEY_3
   518 0000037E 743E                    	je 	.key_3
   519 00000380 3D3405                  	cmp 	ax,KEY_4
   520 00000383 744D                    	je 	.key_4
   521 00000385 3D3506                  	cmp 	ax,KEY_5
   522 00000388 745C                    	je 	.key_5
   523 0000038A 3D3607                  	cmp 	ax,KEY_6
   524 0000038D 746B                    	je 	.key_6
   525                                  .key_none:
   526 0000038F C3                      	ret
   527                                  .key_esc:
   528 00000390 B001                    	mov	al,1
   529 00000392 A2[B087]                	mov	[Exit],al
   530 00000395 C3                      	ret
   531                                  .key_1:
   532 00000396 A1[780D]                	mov ax,[HOffset]
   533 00000399 83E801                  	sub ax,1
   534 0000039C A3[780D]                	mov [HOffset],ax
   535 0000039F A1[820F]                	mov ax,[testx]
   536 000003A2 48                      	dec ax
   537 000003A3 25FF01                  	and ax,511
   538 000003A6 A3[820F]                	mov [testx],ax
   539 000003A9 C3                      	ret
   540                                  .key_2:
   541 000003AA A1[780D]                	mov ax,[HOffset]
   542 000003AD 83C001                  	add ax,1
   543 000003B0 A3[780D]                	mov [HOffset],ax
   544 000003B3 A1[820F]                	mov ax,[testx]
   545 000003B6 40                      	inc ax
   546 000003B7 25FF01                  	and ax,511
   547 000003BA A3[820F]                	mov [testx],ax
   548 000003BD C3                      	ret
   549                                  .key_3:
   550 000003BE A1[7A0D]                	mov ax,[VOffset]
   551 000003C1 83E801                  	sub ax,1
   552 000003C4 A3[7A0D]                	mov [VOffset],ax
   553 000003C7 A1[840F]                	mov ax,[testy]
   554 000003CA 48                      	dec ax
   555 000003CB 25FF01                  	and ax,511
   556 000003CE A3[840F]                	mov [testy],ax
   557 000003D1 C3                      	ret
   558                                  .key_4:
   559 000003D2 A1[7A0D]                	mov ax,[VOffset]
   560 000003D5 83C001                  	add ax,1
   561 000003D8 A3[7A0D]                	mov [VOffset],ax
   562 000003DB A1[840F]                	mov ax,[testy]
   563 000003DE 40                      	inc ax
   564 000003DF 25FF01                  	and ax,511
   565 000003E2 A3[840F]                	mov [testy],ax
   566 000003E5 C3                      	ret
   567                                  .key_5:
   568 000003E6 A1[800D]                	mov ax,[ZOffset]
   569 000003E9 83E801                  	sub ax,1
   570 000003EC A3[800D]                	mov [ZOffset],ax
   571 000003EF A1[860F]                	mov ax,[testz]
   572 000003F2 48                      	dec ax
   573 000003F3 25FF01                  	and ax,511
   574 000003F6 A3[860F]                	mov [testz],ax
   575 000003F9 C3                      	ret
   576                                  .key_6:
   577 000003FA A1[800D]                	mov ax,[ZOffset]
   578 000003FD 83C001                  	add ax,1
   579 00000400 A3[800D]                	mov [ZOffset],ax
   580 00000403 A1[860F]                	mov ax,[testz]
   581 00000406 40                      	inc ax
   582 00000407 25FF01                  	and ax,511
   583 0000040A A3[860F]                	mov [testz],ax
   584 0000040D C3                      	ret
   585                                  
   586 0000040E BADA03                  WaitVSync: 			mov		dx,INPUT_STATUS_1	; Wait for the leading edge of vertical sync pulse.
   587 00000411 EC                      WaitNotVSyncLoop:		in		al,dx
   588 00000412 2408                    						and		al,VSYNC_MASK
   589 00000414 75FB                    						jnz		WaitNotVSyncLoop
   590 00000416 EC                      WaitVSyncLoop:			in		al,dx
   591 00000417 2408                    						and		al,VSYNC_MASK
   592 00000419 74FB                    						jz		WaitVSyncLoop
   593 0000041B C3                      					ret
   594                                  		
   595                                  CopyClearBackBuffer:
   596 0000041C FC                      	cld
   597                                  
   598 0000041D 8CDD                    	mov		bp,ds			; backup ds
   599                                  
   600 0000041F 8B16[D187]              	mov		dx,[BackBufferSeg]
   601 00000423 8EDA                    	mov		ds,dx
   602                                  
   603 00000425 B800B8                  	mov		ax,VIDEO_SEGMENT
   604 00000428 8EC0                    	mov		es,ax
   605                                  
   606 0000042A 31F6                    	xor		si,si		; DS:SI points to even back buffer
   607 0000042C 89F7                    	mov		di,si		; ES:DI points to CGA memory.
   608                                  
   609 0000042E B9A00F                  	mov		cx,4000
   610 00000431 F3A5                    	rep	movsw			; copy from ds:si to es:di
   611                                  
   612 00000433 BE0020                  	mov		si,8192		; DS:SI points to odd back buffer
   613 00000436 89F7                    	mov		di,si		; ES:DI points to CGA memory.
   614                                  
   615 00000438 B9A00F                  	mov		cx,4000
   616 0000043B F3A5                    	rep	movsw			; copy from ds:si to es:di
   617                                  
   618 0000043D 8CD8                    	mov		ax,ds		; es points to ds
   619 0000043F 8EC0                    	mov		es,ax
   620                                  
   621 00000441 31C0                    	xor ax,ax ; mov		ax,00101101001011010b ;
   622                                  	
   623 00000443 31FF                    	xor		di,di		; DS:SI points to even back buffer	
   624 00000445 B9A00F                  	mov		cx,4000
   625 00000448 F3AB                    	rep	stosw			; clear odd back buffer
   626                                  
   627 0000044A BF0020                  	mov		di,8192		; DS:SI points to odd back buffer	
   628 0000044D B9A00F                  	mov		cx,4000
   629 00000450 F3AB                    	rep	stosw			; clear odd back buffer
   630                                  
   631 00000452 8EDD                    	mov		ds,bp			; restore ds
   632                                  
   633 00000454 C3                      	ret
   634                                  
   635                                  Plot00:
   636 00000455 01DB                    	add		bx,bx 			; start ver *2
   637 00000457 8BBF[0000]              	mov		di,[BackBufferTable+bx]	; lookup start ver
   638 0000045B 01ED                    	add		bp,bp			; start hor *2
   639 0000045D 03BE[000A]              	add		di,[HorPosTable+bp]	; add start hor
   640 00000461 268A0D                  	mov		cl,[es:di]
   641 00000464 228E[0005]              	and		cl,[AndTable+bp]
   642 00000468 26880D                  	mov		[es:di],cl
   643 0000046B C3                      	ret
   644                                  
   645                                  Plot11:
   646 0000046C 01DB                    	add		bx,bx 			; start ver *2
   647 0000046E 8BBF[0000]              	mov		di,[BackBufferTable+bx]	; lookup start ver
   648 00000472 01ED                    	add		bp,bp			; start hor *2
   649 00000474 03BE[000A]              	add		di,[HorPosTable+bp]	; add start hor
   650 00000478 268A0D                  	mov		cl,[es:di]
   651 0000047B 0A8E[0000]              	or		cl,[OrTable+bp] 
   652 0000047F 26880D                  	mov		[es:di],cl
   653 00000482 C3                      	ret
   654                                  
   655                                  ; classify3d
   656                                  ;  get z
   657                                  ;  if minus
   658                                  ;   classify eq 16
   659                                  ;  else
   660                                  ;   do perspective
   661                                  ;    classify eq 0
   662                                  ;    if x lt 32767-100
   663                                  ;     classify eq 1
   664                                  ;    if x gt 32767+100
   665                                  ;    classify eq 2
   666                                  ;   if y lt 32767-160
   667                                  ;    classify +=4
   668                                  ;   if y gt 32767+160
   669                                  ;    classify +=8
   670                                  	
   671 00000483 57                      DrawObject2:		push	di ; object lines
   672 00000484 51                      				push	cx ; number of lines
   673                                  
   674                                  ;				mov		di,ObjectPointsResults
   675                                  
   676 00000485 30ED                    				xor		ch,ch
   677 00000487 FEC9                    				dec		cl
   678 00000489 00C9                    				add		cl,cl
   679 0000048B 89CF                    				mov		di,cx	; point count
   680                                  		
   681 0000048D BBFF00                  				mov		bx,255 ; high = or clip codes / low = and clip codes
   682                                  	
   683 00000490 53                      .rotate_point_loop:	push	bx
   684 00000491 3E8B0C                  					mov		cx,[ds:si]	; xpos
   685 00000494 3E8B4402                					mov		ax,[ds:si+2]	; ypos
   686 00000498 3E8B6C04                					mov		bp,[ds:si+4]	; zpos
   687                                  		
   688 0000049C E8A004                  					call	Rotate
   689                                  
   690 0000049F 89C8                    					mov		ax,cx
   691 000004A1 89E9                    					mov		cx,bp
   692 000004A3 89DD                    					mov		bp,bx
   693                                  		
   694 000004A5 0306[7E0D]              					add		ax,[YOffset]
   695 000004A9 8985[9485]              					mov		[ObjectYRot+di],ax 		; yrot
   696                                  
   697 000004AD 032E[7C0D]              					add		bp,[XOffset]
   698 000004B1 89AD[9484]              					mov		[ObjectXRot+di],bp 			; xrot
   699                                  
   700 000004B5 030E[800D]              					add		cx,[ZOffset]
   701 000004B9 898D[9486]              					mov		[ObjectZRot+di],cx 	; zrot
   702                                  
   703 000004BD 7904                    					jns		.point_in_front
   704 000004BF B210                    						mov		dl,BEHIND_CC
   705 000004C1 EB0E                    						jmp		.point_behind	
   706                                  
   707 000004C3 E82D05                  .point_in_front:	call	Perspective
   708 000004C6 8985[9481]              					mov		[ObjectYPos+di],ax 		; xpos
   709 000004CA 89AD[9482]              					mov		[ObjectXPos+di],bp 		; ypos
   710 000004CE E8FD04                  					call	ClassifyPoint
   711                                  
   712 000004D1 8895[9483]              .point_behind:		mov		[ObjectClipCode+di],dl 	; clip code
   713                                  
   714 000004D5 5B                      					pop		bx
   715 000004D6 20D3                    					and		bl,dl	; object and clip code
   716 000004D8 08D7                    					or		bh,dl	; object or clip code
   717                                  		
   718 000004DA 83C606                  					add		si,6				
   719 000004DD 83EF02                  					sub		di,2
   720 000004E0 79AE                    					jns		.rotate_point_loop
   721                                  
   722 000004E2 59                      				pop		cx 	; number of lines
   723 000004E3 5E                      				pop 	si 	; object lines
   724                                  
   725 000004E4 80FB00                  				cmp		bl,0				; if and_object_clip_code ne 0 all off one side so exit
   726 000004E7 7530                    				jnz		.off_screen
   727                                   
   728 000004E9 80FF00                  				cmp		bh,0				; if or_object_clip_code eq 0 all on screen so no clip needed
   729 000004EC 752C                    				jnz		.draw_clipped_object
   730                                  
   731                                  .draw_whole_object:
   732 000004EE 51                      .draw_whole_object_line_loop:	push	cx
   733 000004EF 56                      								push	si
   734                                  
   735 000004F0 30FF                    								xor		bh,bh
   736 000004F2 3E8A1C                  								mov		bl,[ds:si]
   737 000004F5 00DB                    								add		bl,bl	
   738 000004F7 8B8F[9481]              								mov		cx,[ObjectYPos+bx] ; endy
   739 000004FB 8B97[9482]              								mov		dx,[ObjectXPos+bx] ; endx
   740                                   
   741 000004FF 3E8A5C01                								mov		bl,[ds:si+1]
   742 00000503 00DB                    								add		bl,bl
   743 00000505 8BAF[9481]              								mov		bp,[ObjectYPos+bx] ; starty
   744 00000509 8BB7[9482]              								mov		si,[ObjectXPos+bx] ; startx
   745 0000050D E87FFD                  								call	Line00
   746                                  	 
   747 00000510 5E                      								pop		si
   748 00000511 59                      								pop		cx
   749 00000512 83C602                  								add		si,2
   750                                  
   751 00000515 FECD                    								dec		ch
   752 00000517 75D5                    								jnz		.draw_whole_object_line_loop
   753                                  
   754 00000519 C3                      .off_screen:				ret
   755                                  	
   756                                  .draw_clipped_object:	
   757 0000051A 30FF                    .draw_clipped_object_line_loop:	xor		bh,bh
   758 0000051C 51                      								push	cx
   759 0000051D 56                      								push	si
   760                                  		
   761 0000051E 3E8A1C                  								mov		bl,[ds:si]
   762 00000521 00DB                    								add		bl,bl
   763 00000523 8A87[9483]              								mov		al,[ObjectClipCode+bx] 	; start clip code
   764 00000527 3E8A5C01                								mov		bl,[ds:si+1]
   765 0000052B 00DB                    								add		bl,bl
   766 0000052D 8AA7[9483]              								mov		ah,[ObjectClipCode+bx] 	; end clip code
   767                                  
   768 00000531 88C3                    								mov		bl,al		; backup start clip code
   769 00000533 20E3                    								and		bl,ah	; both points are off 
   770 00000535 7522                    								jnz		.line_off_screen	; then line is off screen
   771                                  
   772 00000537 08E0                    								or		al,ah 	; if any point is off
   773 00000539 7528                    								jnz		.line_clip	; then line needs clipped
   774                                  		
   775 0000053B 3E8A1C                  								mov		bl,[ds:si]
   776 0000053E 00DB                    								add		bl,bl	
   777 00000540 8B8F[9481]              								mov		cx,[ObjectYPos+bx] ; starty
   778 00000544 8B97[9482]              								mov		dx,[ObjectXPos+bx] ; startx
   779                                  
   780 00000548 3E8A5C01                								mov		bl,[ds:si+1]
   781 0000054C 00DB                    								add		bl,bl
   782 0000054E 8BAF[9481]              								mov		bp,[ObjectYPos+bx] ; endy 
   783 00000552 8BB7[9482]              								mov		si,[ObjectXPos+bx] ; endx - todo - si is the problem?
   784                                  
   785 00000556 E862FC                  .draw_clipped_line:				call	Line11
   786                                  
   787 00000559 5E                      .line_off_screen:				pop		si
   788 0000055A 59                      								pop		cx
   789 0000055B 83C602                  								add		si,2
   790                                  		
   791 0000055E FECD                    								dec		ch
   792 00000560 75B8                    								jnz		.draw_clipped_object_line_loop
   793 00000562 C3                      							ret
   794                                  
   795                                  .line_clip:	; al = point 1 clip ; ah = point 2 clip
   796                                  
   797                                  ; copy point details to 2 sets of coords temp coords zyx and temp perspective xy
   798                                  ; if either point is behind
   799                                  ;  do z clip on required point
   800                                  ;  do perspective
   801                                  ;  do rest of tests
   802                                  
   803 00000563 30FF                    					xor		bh,bh
   804 00000565 3E8A1C                  					mov		bl,[ds:si]
   805 00000568 00DB                    					add		bl,bl	
   806 0000056A 8B97[9484]              					mov		dx,[ObjectXRot+bx]
   807 0000056E 8916[B187]              					mov		[STX],dx
   808 00000572 8B97[9485]              					mov		dx,[ObjectYRot+bx]
   809 00000576 8916[B387]              					mov		[STY],dx
   810 0000057A 8B97[9486]              					mov		dx,[ObjectZRot+bx]
   811 0000057E 8916[B587]              					mov		[STZ],dx
   812 00000582 8B97[9482]              					mov		dx,[ObjectXPos+bx]
   813 00000586 8916[A087]              					mov		[XST],dx
   814 0000058A 8B97[9481]              					mov		dx,[ObjectYPos+bx]	
   815 0000058E 8916[A287]              					mov		[YST],dx	
   816 00000592 8A87[9483]              					mov		al,[ObjectClipCode+bx]
   817                                  	
   818 00000596 3E8A5C01                					mov		bl,[ds:si+1]
   819 0000059A 00DB                    					add		bl,bl
   820 0000059C 8B97[9484]              					mov		dx,[ObjectXRot+bx]
   821 000005A0 8916[B787]              					mov		[ENX],dx
   822 000005A4 8B97[9485]              					mov		dx,[ObjectYRot+bx]
   823 000005A8 8916[B987]              					mov		[ENY],dx
   824 000005AC 8B97[9486]              					mov		dx,[ObjectZRot+bx]
   825 000005B0 8916[BB87]              					mov		[ENZ],dx	
   826 000005B4 8B97[9482]              					mov		dx,[ObjectXPos+bx]
   827 000005B8 8916[A487]              					mov		[XEN],dx
   828 000005BC 8B97[9481]              					mov		dx,[ObjectYPos+bx]
   829 000005C0 8916[A687]              					mov		[YEN],dx
   830 000005C4 8AA7[9483]              					mov		ah,[ObjectClipCode+bx]
   831                                  
   832 000005C8 A3[A887]                					mov		[CCST],ax
   833                                  	
   834 000005CB A1[A887]                .line_clip_loop:	mov		ax,[CCST]
   835 000005CE 88C3                    					mov		bl,al			; start cc
   836 000005D0 20E0                    					and		al,ah			; and with end cc
   837 000005D2 7585                    					jnz		.line_off_screen		; both off same side
   838                                  	
   839 000005D4 08E3                    					or		bl,ah			; or with end cc
   840 000005D6 7474                    					jz		.clip_draw_test		; all on so draw line
   841                                  
   842 000005D8 F6C310                  .clip_behind_test:	test	bl,BEHIND_CC	; test if either point is off (al=al or ah)
   843 000005DB 7413                    					jz		.clip_left_test
   844 000005DD E87F00                  					call	LineClipBehind
   845                                  
   846 000005E0 A1[A887]                					mov		ax,[CCST]
   847 000005E3 88C3                    					mov		bl,al			; start cc
   848 000005E5 20E0                    					and		al,ah			; and with end cc
   849 000005E7 7403E96DFF              					jnz		.line_off_screen		; both off same side
   850                                  
   851 000005EC 08E3                    					or		bl,ah			; or with end cc
   852 000005EE 745C                    					jz		.clip_draw_test		; all on so draw line
   853                                  	
   854 000005F0 F6C304                  .clip_left_test:	test	bl,LEFT_CC
   855 000005F3 7413                    					jz		.clip_right_test
   856 000005F5 E84101                  					call	LineClipLeft
   857 000005F8 A1[A887]                					mov		ax,[CCST]
   858 000005FB 88C3                    					mov		bl,al			; start cc
   859 000005FD 20E0                    					and		al,ah			; and with end cc
   860 000005FF 7403E955FF              					jnz		.line_off_screen		; both off same side
   861                                  
   862 00000604 08E3                    					or		bl,ah			; or with end cc
   863 00000606 7444                    					jz		.clip_draw_test		; all on so draw line
   864                                  		
   865 00000608 F6C308                  .clip_right_test:	test	bl,RIGHT_CC
   866 0000060B 7413                    					jz		.clip_top_test
   867 0000060D E88601                  					call	LineClipRight
   868 00000610 A1[A887]                					mov		ax,[CCST]
   869 00000613 88C3                    					mov		bl,al			; start cc
   870 00000615 20E0                    					and		al,ah			; and with end cc
   871 00000617 7403E93DFF              					jnz		.line_off_screen		; both off same side
   872                                  	
   873 0000061C 08E3                    					or		bl,ah			; or with end cc
   874 0000061E 742C                    					jz		.clip_draw_test		; all on so draw line
   875                                  		
   876                                  
   877 00000620 F6C301                  .clip_top_test:		test	bl,TOP_CC
   878 00000623 7413                    					jz		.clip_bottom_test
   879 00000625 E8B400                  					call	LineClipTop
   880 00000628 A1[A887]                					mov		ax,[CCST]
   881 0000062B 88C3                    					mov		bl,al			; start cc
   882 0000062D 20E0                    					and		al,ah			; and with end cc
   883 0000062F 7403E925FF              					jnz		.line_off_screen		; both off same side
   884                                  
   885 00000634 08E3                    					or		bl,ah			; or with end cc
   886 00000636 7414                    					jz		.clip_draw_test		; all on so draw line
   887                                  
   888 00000638 F6C302                  .clip_bottom_test:	test	bl,BOTTOM_CC
   889 0000063B 748E                    					jz		.line_clip_loop
   890 0000063D E8B501                  					call	LineClipBottom
   891 00000640 A1[A887]                					mov		ax,[CCST]
   892 00000643 88C3                    					mov		bl,al			; start cc
   893 00000645 20E0                    					and		al,ah			; and with end cc
   894 00000647 7403E90DFF              					jnz		.line_off_screen		; both off same side
   895                                  
   896 0000064C 8B0E[A287]              .clip_draw_test:	mov		cx,[YST]
   897 00000650 8B16[A087]              					mov		dx,[XST]
   898 00000654 8B2E[A687]              					mov		bp,[YEN]
   899 00000658 8B36[A487]              					mov		si,[XEN]
   900 0000065C E9F7FE                  					jmp		.draw_clipped_line
   901                                  	
   902 0000065F F6C410                  LineClipBehind:	test	ah,BEHIND_CC
   903 00000662 743C                    				jz		.behind_sback_efront
   904 00000664 A1[B187]                .behind_sfront_eback:	mov		ax,[STX]
   905 00000667 8B0E[B587]              						mov		cx,[STZ]
   906 0000066B 8B3E[BB87]              						mov		di,[ENZ]
   907 0000066F 8B1E[B787]              						mov		bx,[ENX]
   908 00000673 E8DC01                  						call	ClipBehind
   909 00000676 57                      						push	di
   910                                  	
   911 00000677 A1[B387]                						mov		ax,[STY]
   912 0000067A 8B0E[B587]              						mov		cx,[STZ]
   913 0000067E 8B3E[BB87]              						mov		di,[ENZ]
   914 00000682 8B1E[B987]              						mov		bx,[ENY]
   915 00000686 E8C901                  						call	ClipBehind
   916                                  
   917 00000689 89F8                    						mov		ax,di
   918 0000068B 5D                      						pop		bp
   919                                  
   920 0000068C 31C9                    						xor		cx,cx
   921 0000068E E86203                  						call	Perspective
   922 00000691 A3[A687]                						mov		[YEN],ax 
   923 00000694 892E[A487]              						mov		[XEN],bp
   924 00000698 E83303                  						call	ClassifyPoint
   925 0000069B 8816[A987]              						mov		[CCEN],dl
   926 0000069F C3                      						ret
   927 000006A0 A1[B787]                .behind_sback_efront:	mov		ax,[ENX]
   928 000006A3 8B0E[BB87]              						mov		cx,[ENZ]
   929 000006A7 8B3E[B587]              						mov		di,[STZ]
   930 000006AB 8B1E[B187]              						mov		bx,[STX]
   931 000006AF E8A001                  						call	ClipBehind
   932 000006B2 57                      						push	di
   933                                  	
   934 000006B3 A1[B987]                						mov		ax,[ENY]
   935 000006B6 8B0E[BB87]              						mov		cx,[ENZ]
   936 000006BA 8B3E[B587]              						mov		di,[STZ]
   937 000006BE 8B1E[B387]              						mov		bx,[STY]
   938 000006C2 E88D01                  						call	ClipBehind
   939                                  
   940 000006C5 89F8                    						mov		ax,di
   941 000006C7 5D                      						pop		bp
   942                                  		
   943 000006C8 31C9                    						xor		cx,cx
   944 000006CA E82603                  						call	Perspective
   945 000006CD A3[A287]                						mov		[YST],ax 
   946 000006D0 892E[A087]              						mov		[XST],bp 
   947 000006D4 E8F702                  						call	ClassifyPoint
   948 000006D7 8816[A887]              						mov		[CCST],dl
   949 000006DB C3                      						ret
   950                                  	
   951 000006DC F6C401                  LineClipTop:	test	ah,TOP_CC
   952 000006DF 742C                    				jz		.top_p1on_p2off
   953 000006E1 A1[A287]                .top_p1off_p2on:	mov		ax,[YST]
   954 000006E4 8B0E[A087]              					mov		cx,[XST]
   955 000006E8 8B3E[A487]              					mov		di,[XEN]
   956 000006EC 8B1E[A687]              					mov		bx,[YEN]
   957 000006F0 E86E01                  					call	ClipTop
   958                                  
   959 000006F3 893E[A687]              					mov		[YEN],di
   960 000006F7 BB0000                  					mov		bx,TOP_EDGE
   961 000006FA 891E[A487]              					mov		[XEN],bx
   962                                  
   963 000006FE A1[A687]                					mov		ax,[YEN]
   964 00000701 8B2E[A487]              					mov		bp,[XEN]
   965 00000705 E8C602                  					call	ClassifyPoint
   966 00000708 8816[A987]              					mov		[CCEN],dl
   967 0000070C C3                      					ret
   968 0000070D A1[A687]                .top_p1on_p2off:	mov		ax,[YEN]
   969 00000710 8B0E[A487]              					mov		cx,[XEN]
   970 00000714 8B3E[A087]              					mov		di,[XST]
   971 00000718 8B1E[A287]              					mov		bx,[YST]
   972 0000071C E84201                  					call	ClipTop
   973                                  
   974 0000071F 893E[A287]              					mov		[YST],di
   975 00000723 BB0000                  					mov		bx,TOP_EDGE
   976 00000726 891E[A087]              					mov		[XST],bx
   977                                  
   978 0000072A A1[A287]                					mov		ax,[YST]
   979 0000072D 8B2E[A087]              					mov		bp,[XST]
   980 00000731 E89A02                  					call	ClassifyPoint
   981 00000734 8816[A887]              					mov		[CCST],dl
   982 00000738 C3                      					ret
   983                                  	
   984 00000739 F6C404                  LineClipLeft:	test	ah,LEFT_CC	; end clip code is off left?
   985 0000073C 742C                    				jz		.left_p1on_p2off
   986 0000073E 8B0E[A287]              .left_p1off_p2on:	mov		cx,[YST]
   987 00000742 A1[A087]                					mov		ax,[XST]
   988 00000745 8B3E[A487]              					mov		di,[XEN]
   989 00000749 8B1E[A687]              					mov		bx,[YEN]	
   990 0000074D E82001                  					call	ClipLeft 	; ax returned 
   991                                  	
   992 00000750 891E[A487]              					mov		[XEN],bx
   993 00000754 BB0000                  					mov		bx,LEFT_EDGE
   994 00000757 891E[A687]              					mov		[YEN],bx
   995                                  		
   996 0000075B A1[A687]                					mov		ax,[YEN]
   997 0000075E 8B2E[A487]              					mov		bp,[XEN]
   998 00000762 E86902                  					call	ClassifyPoint
   999 00000765 8816[A987]              					mov		[CCEN],dl
  1000 00000769 C3                      					ret
  1001 0000076A 8B0E[A687]              .left_p1on_p2off:	mov		cx,[YEN]
  1002 0000076E A1[A487]                					mov		ax,[XEN]
  1003 00000771 8B3E[A087]              					mov		di,[XST]
  1004 00000775 8B1E[A287]              					mov		bx,[YST]
  1005 00000779 E8F400                  					call	ClipLeft
  1006                                  
  1007 0000077C 891E[A087]              					mov		[XST],bx
  1008 00000780 BB0000                  					mov		bx,LEFT_EDGE
  1009 00000783 891E[A287]              					mov		[YST],bx
  1010                                  
  1011 00000787 A1[A287]                					mov		ax,[YST]
  1012 0000078A 8B2E[A087]              					mov		bp,[XST]
  1013 0000078E E83D02                  					call	ClassifyPoint
  1014 00000791 8816[A887]              					mov		[CCST],dl
  1015 00000795 C3                      					ret
  1016                                  
  1017 00000796 F6C408                  LineClipRight:	test	ah,RIGHT_CC
  1018 00000799 742D                    				jz		.right_p1on_p2off
  1019 0000079B 8B2E[A287]              .right_p1off_p2on:	mov		bp,[YST]
  1020 0000079F 8B16[A087]              					mov		dx,[XST]
  1021 000007A3 8B3E[A487]              					mov		di,[XEN]
  1022 000007A7 8B1E[A687]              					mov		bx,[YEN]	
  1023 000007AB E8E300                  					call	ClipRight
  1024                                  
  1025 000007AE 892E[A487]              					mov		[XEN],bp
  1026 000007B2 BB3F01                  					mov		bx,RIGHT_EDGE
  1027 000007B5 891E[A687]              					mov		[YEN],bx
  1028                                  	
  1029 000007B9 A1[A687]                					mov		ax,[YEN]
  1030 000007BC 8B2E[A487]              					mov		bp,[XEN]
  1031 000007C0 E80B02                  					call	ClassifyPoint
  1032 000007C3 8816[A987]              					mov		[CCEN],dl		
  1033 000007C7 C3                      					ret
  1034                                  
  1035 000007C8 8B2E[A687]              .right_p1on_p2off:	mov		bp,[YEN]
  1036 000007CC 8B16[A487]              					mov		dx,[XEN]
  1037 000007D0 8B3E[A087]              					mov		di,[XST]
  1038 000007D4 8B1E[A287]              					mov		bx,[YST]	
  1039 000007D8 E8B600                  					call	ClipRight
  1040                                  
  1041 000007DB 892E[A087]              					mov		[XST],bp
  1042 000007DF BB3F01                  					mov		bx,RIGHT_EDGE
  1043 000007E2 891E[A287]              					mov		[YST],bx
  1044                                  
  1045 000007E6 A1[A287]                					mov		ax,[YST]
  1046 000007E9 8B2E[A087]              					mov		bp,[XST]
  1047 000007ED E8DE01                  					call	ClassifyPoint
  1048 000007F0 8816[A887]              					mov		[CCST],dl
  1049 000007F4 C3                      					ret
  1050                                  	
  1051 000007F5 F6C402                  LineClipBottom:	test	ah,BOTTOM_CC
  1052 000007F8 742C                    				jz		.bottom_p1on_p2off
  1053 000007FA A1[A287]                .bottom_p1off_p2on:	mov		ax,[YST]
  1054 000007FD 8B16[A087]              					mov		dx,[XST]
  1055 00000801 8B3E[A487]              					mov		di,[XEN]
  1056 00000805 8B1E[A687]              					mov		bx,[YEN]	
  1057 00000809 E87300                  					call	ClipBottom
  1058                                  
  1059 0000080C 890E[A687]              					mov		[YEN],cx
  1060 00000810 BBC700                  					mov		bx,BOTTOM_EDGE
  1061 00000813 891E[A487]              					mov		[XEN],bx
  1062                                  
  1063 00000817 A1[A687]                					mov		ax,[YEN]
  1064 0000081A 8B2E[A487]              					mov		bp,[XEN]
  1065 0000081E E8AD01                  					call	ClassifyPoint
  1066 00000821 8816[A987]              					mov		[CCEN],dl		
  1067 00000825 C3                      					ret
  1068 00000826 A1[A687]                .bottom_p1on_p2off:	mov		ax,[YEN]
  1069 00000829 8B16[A487]              					mov		dx,[XEN]
  1070 0000082D 8B3E[A087]              					mov		di,[XST]
  1071 00000831 8B1E[A287]              					mov		bx,[YST]	
  1072 00000835 E84700                  					call	ClipBottom
  1073                                  
  1074 00000838 890E[A287]              					mov		[YST],cx
  1075 0000083C BBC700                  					mov		bx,BOTTOM_EDGE
  1076 0000083F 891E[A087]              					mov		[XST],bx
  1077                                  
  1078 00000843 A1[A287]                					mov		ax,[YST]
  1079 00000846 8B2E[A087]              					mov		bp,[XST]
  1080 0000084A E88101                  					call	ClassifyPoint
  1081 0000084D 8816[A887]              					mov		[CCST],dl
  1082 00000851 C3                      					ret
  1083                                  	
  1084 00000852 89CD                    ClipBehind:	mov		bp,cx	; backup pon.z (onh)
  1085 00000854 29F9                    			sub		cx,di 	; pon.z-poff.z (dh)
  1086                                  
  1087 00000856 89C7                    			mov		di,ax	; backup pon.x (onv)
  1088 00000858 29D8                    			sub		ax,bx	; pon.x-poff.x (dv)
  1089                                  
  1090 0000085A F7ED                    			imul	bp	; pon.x-poff.x (dx) * pon.z (onh) 
  1091 0000085C F7F9                    			idiv	cx	; 	/ pon.z-poff.z (dh) (pon.z+poff.z)
  1092                                  
  1093 0000085E 29C7                    			sub	di,ax
  1094 00000860 C3                      			ret
  1095                                  	
  1096                                  ; input
  1097                                  ; ax = x on screen ; pon.x = +ve
  1098                                  ; bx = x off screen ; poff.x = -ve
  1099                                  ; dx = y on screen ; pon.y
  1100                                  ; di = y off screen ; poff.y
  1101                                  ; output
  1102                                  ; ax = clippedy
  1103                                  
  1104 00000861 89CD                    ClipTop:	mov		bp,cx	; backup pon.x (onh)
  1105 00000863 29F9                    			sub		cx,di 	; pon.x-poff.x (dh)
  1106                                  
  1107 00000865 89C7                    			mov		di,ax	; backup pon.y (onv)
  1108 00000867 29D8                    			sub		ax,bx	; pon.y-poff.y (dv)
  1109                                  
  1110 00000869 F7ED                    			imul	bp	; pon.y-poff.y (dv) * pon.x (onh) 
  1111 0000086B F7F9                    			idiv	cx	; 	/ pon.x-poff.x (dh) (pon.x+poff.x)
  1112                                  
  1113 0000086D 29C7                    			sub		di,ax
  1114 0000086F C3                      			ret
  1115                                  
  1116 00000870 89CD                    ClipLeft:	mov		bp,cx	; backup pon.x (onh)
  1117 00000872 29D9                    			sub		cx,bx 	; pon.x-poff.x (dh)
  1118                                  
  1119 00000874 89C3                    			mov		bx,ax	; backup pon.y (onv)
  1120 00000876 29F8                    			sub		ax,di	; pon.y-poff.y (dv)
  1121                                  
  1122 00000878 F7ED                    			imul	bp	; pon.y-poff.y (dv) * pon.x (onh) 
  1123 0000087A F7F9                    			idiv	cx	; 	/ pon.x-poff.x (dh) (pon.x+poff.x)
  1124                                  
  1125 0000087C 29C3                    			sub		bx,ax
  1126 0000087E C3                      			ret
  1127                                  
  1128 0000087F BDC700                  ClipBottom:	mov		bp,BOTTOM_EDGE
  1129 00000882 29D5                    			sub		bp,dx	; rightedge - pon.x (onh)
  1130 00000884 29D7                    			sub		di,dx	; poff.x - pon.x (dh)
  1131                                  
  1132 00000886 89C1                    			mov		cx,ax
  1133 00000888 29D8                    			sub		ax,bx	; pon.y-poff.y (dv)
  1134                                  
  1135 0000088A F7ED                    			imul	bp
  1136 0000088C F7FF                    			idiv	di
  1137                                  	
  1138 0000088E 29C1                    			sub		cx,ax
  1139 00000890 C3                      			ret
  1140                                  
  1141 00000891 B83F01                  ClipRight:	mov		ax,RIGHT_EDGE
  1142 00000894 29E8                    			sub		ax,bp	; rightedge - pon.x (onh)
  1143 00000896 29EB                    			sub		bx,bp	; poff.x - pon.x (dh)
  1144                                  	
  1145 00000898 89D5                    			mov		bp,dx
  1146 0000089A 29FA                    			sub		dx,di	; pon.y-poff.y (dv)
  1147                                  
  1148 0000089C F7EA                    			imul	dx
  1149 0000089E F7FB                    			idiv	bx
  1150                                  
  1151 000008A0 29C5                    			sub		bp,ax
  1152 000008A2 C3                      			ret
  1153                                  	
  1154 000008A3 80FF00                  GetSin256:	cmp		bh,0
  1155 000008A6 740A                    			je		.s000090
  1156 000008A8 80FF01                  .s090180:	cmp		bh,1
  1157 000008AB 750A                    			jne		.s180270
  1158 000008AD 30FF                    				xor		bh,bh
  1159 000008AF 80F3FF                  				xor		bl,255
  1160 000008B2 8A87[880F]              .s000090		mov		al,[sintab+bx]
  1161 000008B6 C3                      				ret
  1162 000008B7 80FF02                  .s180270:	cmp		bh,2
  1163 000008BA 7509                    			jne		.s270000
  1164 000008BC 30FF                    				xor		bh,bh
  1165 000008BE 8A87[880F]              				mov		al,[sintab+bx]
  1166 000008C2 F6D8                    				neg		al
  1167 000008C4 C3                      				ret
  1168 000008C5 30FF                    .s270000:	xor		bh,bh
  1169 000008C7 80F3FF                  			xor		bl,255
  1170 000008CA 8A87[880F]              			mov		al,[sintab+bx]
  1171 000008CE F6D8                    			neg		al
  1172 000008D0 C3                      			ret
  1173                                  
  1174 000008D1 89EB                    SinCos:		mov		bx,bp
  1175 000008D3 E8CDFF                  			call	GetSin256
  1176 000008D6 98                      			cbw
  1177 000008D7 89EB                    			mov		bx,bp
  1178 000008D9 01C0                    			add		ax,ax
  1179 000008DB 89C5                    			mov		bp,ax
  1180 000008DD FEC7                    			inc		bh
  1181 000008DF 80E703                  			and		bh,3
  1182 000008E2 E8BEFF                  			call	GetSin256
  1183 000008E5 98                      			cbw
  1184 000008E6 01C0                    			add		ax,ax
  1185 000008E8 C3                      			ret
  1186                                  
  1187 000008E9 8B2E[AA87]              RotationMatrix:	mov		bp,[XAngle]
  1188 000008ED E8E1FF                  				call	SinCos
  1189 000008F0 892E[9487]              				mov		[SinX],bp
  1190 000008F4 A3[9687]                				mov		[CosX],ax
  1191                                  
  1192 000008F7 8B2E[AC87]              				mov		bp,[YAngle]
  1193 000008FB E8D3FF                  				call	SinCos
  1194 000008FE 892E[9887]              				mov		[SinY],bp
  1195 00000902 A3[9A87]                				mov		[CosY],ax
  1196                                  	
  1197 00000905 8B2E[AE87]              				mov		bp,[ZAngle]
  1198 00000909 E8C5FF                  				call	SinCos
  1199 0000090C 892E[9C87]              				mov		[SinZ],bp
  1200 00000910 A3[9E87]                				mov		[CosZ],ax
  1201                                  
  1202 00000913 C3                      				ret
  1203                                  
  1204                                  ; cos(x) * cos(z) 										= mz3 ?
  1205                                  ; sin(x)												= my3 ?
  1206                                  ; cos(x) * -sin(z)										= mx3 ?
  1207                                   
  1208                                  ; (cos(y) * -sin(x) * cos(z)) + (sin(y) * sin(z)),		= mz2 ?
  1209                                  ; cos(y) * cos(x),										= my2 ?
  1210                                  ; (cos(y) * -sin(x) * -sin(z)) + (sin(y) * cos(z))		= mx2 ?
  1211                                  
  1212                                  ; (-sin(y) * -sin(x) * cos(z)) + (cos(y) * sin(z))		= mz1 ?
  1213                                  ; -sin(y) * cos(x) 										= my1 ?
  1214                                  ; (-sin(y) * -sin(x) * -sin(z)) + (cos(y) * cos(z)) 	= mx1 ?
  1215                                  
  1216                                  
  1217                                  ; mx1= (sin(gam)*sin(bet)*sin(alp)) + (cos(gam)*cos(alp))
  1218                                  ; my1= (-cos(bet))*sin(alp)
  1219                                  ; mz1= (sin(gam)*cos(alp)) - (cos(gam)*sin(bet)*sin(alp))
  1220                                  
  1221                                  ; mx2= (cos(gam)*sin(alp)) - (sin(gam)*sin(bet)*cos(alp))
  1222                                  ; my2= (cos(bet)*cos(alp))
  1223                                  ; mz2= ((-cos(gam))*sin(bet)*cos(alp)) - (sin(gam)*sin(alp))
  1224                                  
  1225                                  ; mx3 = cos(bet)*sin(gam)
  1226                                  ; my3 = sin(bet)
  1227                                  ; mz3 = cos(gam)*cos(bet)
  1228                                  
  1229                                  ; x"'=x*mx1 + y*my1 + z*mz1
  1230                                  ; y"'=x*mx2 + y*my2 + z*mz2
  1231                                  ; z"'=x*mx3 + y*my3 + z*mz3.
  1232                                  
  1233                                  ; alp=X
  1234                                  ; bet=Y
  1235                                  ; gam=Z
  1236                                  
  1237                                  ; mx1= (SinZ*SinY*SinX) + (CosZ*CosX)
  1238                                  ; #1 = SinZ * SinY
  1239                                  ; #2 = #1 * SinX
  1240                                  ; #3 = CosZ * CosX
  1241                                  ; #4 = #2 + #3
  1242                                  
  1243                                  ; my1= (-CosY)*SinX
  1244                                  ; #1 = -CosY
  1245                                  ; #2 = #1 * SinX
  1246                                  
  1247                                  ; mz1= (SinZ*CosX) - (CosZ*SinY*SinX)
  1248                                  ; #1 = SinZ * CosX
  1249                                  ; #2 = CosZ * SinY
  1250                                  ; #3 = #2 * SinX
  1251                                  ; #4 = #1 - #3
  1252                                  
  1253                                  ; mx2= (CosZ*SinX) - (SinZ*SinY*CosX)
  1254                                  ; #1 = CosZ * SinX
  1255                                  ; #2 = SinZ * SinY
  1256                                  ; #3 = #2 * CosX
  1257                                  ; #4 = #1 - #2
  1258                                  
  1259                                  ; my2= (CosY*CosX)
  1260                                  ; #1 = CosY * CosX
  1261                                  
  1262                                  ; mz2= ((-CosZ)*SinY*CosX) - (SinZ*SinX)
  1263                                  ; #1 = -CosZ
  1264                                  ; #2 = #1 * SinY
  1265                                  ; #3 = #2 * CosX
  1266                                  ; #4 = Sinz * SinX
  1267                                  ; #5 = #3 - #4
  1268                                  
  1269                                  ; mx3 = CosY*SinZ
  1270                                  ; #1 = CosY * SinZ
  1271                                  
  1272                                  ; my3 = SinY
  1273                                  ; #1 = SinY
  1274                                  
  1275                                  ; mz3 = CosZ*CosY
  1276                                  ; #1 = CosZ * CosY
  1277                                  
  1278 00000914 8B2E[AA87]              BuildRotateMatrix:	mov		bp,[XAngle]
  1279 00000918 E8B6FF                  					call	SinCos
  1280 0000091B 892E[9487]              					mov		[SinX],bp
  1281 0000091F A3[9687]                					mov		[CosX],ax
  1282                                  
  1283 00000922 8B2E[AC87]              					mov		bp,[YAngle]
  1284 00000926 E8A8FF                  					call	SinCos
  1285 00000929 892E[9887]              					mov		[SinY],bp
  1286 0000092D A3[9A87]                					mov		[CosY],ax
  1287                                  	
  1288 00000930 8B2E[AE87]              					mov		bp,[ZAngle]
  1289 00000934 E89AFF                  					call	SinCos
  1290 00000937 892E[9C87]              					mov		[SinZ],bp
  1291 0000093B A3[9E87]                					mov		[CosZ],ax
  1292 0000093E C3                      					ret
  1293                                  	
  1294                                  Rotate:
  1295 0000093F 06                      	push es
  1296                                  ;rotate around x-axis:
  1297                                  ;	y'' = y'*cos(C) + z'*sin(C)
  1298                                  ;	z'' = y'*sin(C) - z'*cos(C)
  1299                                  	
  1300                                  RotateX:
  1301 00000940 8EC0                    	mov	es,ax	; y
  1302 00000942 F72E[9687]              	imul	word [CosX] ; y*cos(x)
  1303 00000946 88E3                    	mov	bl,ah
  1304 00000948 88D7                    	mov	bh,dl
  1305                                  
  1306 0000094A 89E8                    	mov	ax,bp	; z
  1307 0000094C F72E[9487]              	imul	word [SinX]	; z*sin(x)
  1308 00000950 88E0                    	mov	al,ah
  1309 00000952 88D4                    	mov	ah,dl
  1310 00000954 01C3                    	add		bx,ax
  1311                                  
  1312 00000956 8CC0                    	mov	ax,es	; y
  1313 00000958 8EC3                    	mov	es,bx
  1314 0000095A F72E[9487]              	imul	word [SinX]	 ; y*sin(x)
  1315 0000095E 88E3                    	mov	bl,ah
  1316 00000960 88D7                    	mov	bh,dl
  1317                                  
  1318 00000962 89E8                    	mov	ax,bp	; z
  1319 00000964 F72E[9687]              	imul	word [CosX]	; z*cos(x)
  1320 00000968 88E0                    	mov	al,ah
  1321 0000096A 88D4                    	mov	ah,dl
  1322                                  
  1323 0000096C 29C3                    	sub	bx,ax
  1324 0000096E 89DD                    	mov	bp,bx
  1325                                  
  1326                                  ; rotate around y-axis:
  1327                                  ;	x'' = x'*cos(B) + z*sin(B)
  1328                                  ;	z'  = x'*sin(B) - z*cos(B)
  1329                                  
  1330                                  RotateY:
  1331 00000970 89C8                    	mov	ax,cx	; x
  1332 00000972 F72E[9A87]              	imul	word [CosY]	 ; x*cos(y)
  1333 00000976 88E3                    	mov	bl,ah
  1334 00000978 88D7                    	mov	bh,dl
  1335                                  
  1336 0000097A 89E8                    	mov	ax,bp	; z
  1337 0000097C F72E[9887]              	imul	word [SinY]	; z*sin(y)
  1338 00000980 88E0                    	mov	al,ah
  1339 00000982 88D4                    	mov	ah,dl
  1340 00000984 01C3                    	add	bx,ax
  1341                                  
  1342 00000986 89C8                    	mov	ax,cx	; x
  1343 00000988 89D9                    	mov	cx,bx
  1344 0000098A F72E[9887]              	imul	word [SinY]	; x*sin(y)
  1345 0000098E 88E3                    	mov	bl,ah
  1346 00000990 88D7                    	mov	bh,dl
  1347                                  
  1348 00000992 89E8                    	mov	ax,bp	; z
  1349 00000994 F72E[9A87]              	imul	word [CosY]	; z*cos(y)
  1350 00000998 88E0                    	mov	al,ah
  1351 0000099A 88D4                    	mov	ah,dl
  1352                                  
  1353 0000099C 29C3                    	sub	bx,ax
  1354 0000099E 89DD                    	mov	bp,bx
  1355                                  
  1356                                  ;rotate around z-axis:
  1357                                  ;	x'  = x*cos(A) + y*sin(A)
  1358                                  ;	y'  = x*sin(A) - y*cos(A)
  1359                                  
  1360                                  RotateZ:
  1361 000009A0 89C8                    	mov	ax,cx	; x
  1362 000009A2 F72E[9E87]              	imul	word [CosZ] 	; x*cos(z)
  1363 000009A6 88E3                    	mov	bl,ah
  1364 000009A8 88D7                    	mov	bh,dl
  1365                                  
  1366 000009AA 8CC0                    	mov	ax,es	; y
  1367 000009AC F72E[9C87]              	imul	word [SinZ]; y*sin(z)
  1368 000009B0 88E0                    	mov	al,ah
  1369 000009B2 88D4                    	mov	ah,dl
  1370 000009B4 01C3                    	add		bx,ax
  1371                                  
  1372 000009B6 89C8                    	mov	ax,cx 	; x
  1373 000009B8 F72E[9C87]              	imul 	word [SinZ]	; x*sin(z)
  1374 000009BC 88E1                    	mov	cl,ah
  1375 000009BE 88D5                    	mov	ch,dl
  1376                                  
  1377 000009C0 8CC0                    	mov	ax,es	; y
  1378 000009C2 F72E[9E87]              	imul	word [CosZ]	; y*cos(z)
  1379 000009C6 88E0                    	mov	al,ah
  1380 000009C8 88D4                    	mov	ah,dl
  1381                                  
  1382 000009CA 29C1                    	sub	cx,ax
  1383                                  
  1384                                  
  1385 000009CC 07                      	pop es
  1386                                  
  1387 000009CD C3                      	ret
  1388                                  
  1389 000009CE 30D2                    ClassifyPoint:	xor		dl,dl	; in = ax/bp	; out = dl	; clear clipcodes
  1390                                  
  1391 000009D0 83FD00                  				cmp		bp,TOP_EDGE
  1392 000009D3 7D04                    				jge		.right_test
  1393 000009D5 B201                    					mov		dl,TOP_CC
  1394 000009D7 EB08                    					jmp		.hor_test_end
  1395                                  
  1396 000009D9 81FDC700                .right_test:	cmp		bp,BOTTOM_EDGE
  1397 000009DD 7E02                    				jle		.hor_test_end
  1398 000009DF B202                    					mov		dl,BOTTOM_CC
  1399                                  
  1400 000009E1 83F800                  .hor_test_end:	cmp		ax,LEFT_EDGE
  1401 000009E4 7D04                    				jge		.bottom_test
  1402 000009E6 80CA04                  					or		dl,LEFT_CC
  1403 000009E9 C3                      					ret
  1404 000009EA 3D3F01                  .bottom_test:	cmp		ax,RIGHT_EDGE
  1405 000009ED 7E03                    				jle		.ver_test_end
  1406 000009EF 80CA08                  					or		dl,RIGHT_CC 			
  1407 000009F2 C3                      .ver_test_end:	ret
  1408                                  
  1409 000009F3 FEC5                    Perspective:	inc		ch	; in - bp = z / ax = x  dx = y	; z +256
  1410                                  		
  1411 000009F5 99                      				cwd
  1412 000009F6 88E2                    				mov		dl,ah
  1413 000009F8 88C4                    				mov		ah,al		; dx:ax = ypos *256 = ypos *256	
  1414 000009FA F7F9                    				idiv	cx 		; ax = dx:ax = ypos*256 / zpos+256
  1415 000009FC 83C064                  				add		ax,MIDDLE_Y	; ypos
  1416                                  	
  1417 000009FF 95                      				xchg	ax,bp
  1418                                  
  1419 00000A00 99                      				cwd
  1420 00000A01 88E2                    				mov		dl,ah
  1421 00000A03 88C4                    				mov		ah,al		; dx:ax = xpos *256 = xpos *256
  1422 00000A05 F7F9                    				idiv	cx 		; ax = dx:ax = xpos*256 / zpos+256
  1423 00000A07 05A000                  				add		ax,MIDDLE_X	; xpos
  1424                                  	
  1425 00000A0A C3                      				ret			; output bl=clip codes / ax=xpos / bp=ypos
  1426                                  	
  1427 00000A0B 89FE                    HexChar:	mov		si,di
  1428 00000A0D 88C3                    			mov		bl,al
  1429 00000A0F D0EB                    			shr		bl,1
  1430 00000A11 D0EB                    			shr		bl,1
  1431 00000A13 D0EB                    			shr		bl,1
  1432 00000A15 D0EB                    			shr		bl,1
  1433 00000A17 83E30F                  			and		bx,15
  1434 00000A1A 8AA7[800C]              			mov		ah,[Hex0+bx]
  1435 00000A1E 268825                  			mov		[es:di],ah
  1436 00000A21 81C70020                			add		di,8192
  1437 00000A25 8AA7[900C]              			mov		ah,[Hex1+bx]
  1438 00000A29 268825                  			mov		[es:di],ah
  1439 00000A2C 81EFB01F                			sub		di,8192-80
  1440 00000A30 8AA7[A00C]              			mov		ah,[Hex2+bx]
  1441 00000A34 268825                  			mov		[es:di],ah
  1442 00000A37 81C70020                			add		di,8192
  1443 00000A3B 8AA7[B00C]              			mov		ah,[Hex3+bx]
  1444 00000A3F 268825                  			mov		[es:di],ah
  1445 00000A42 81EFB01F                			sub		di,8192-80
  1446 00000A46 8AA7[C00C]              			mov		ah,[Hex4+bx]
  1447 00000A4A 268825                  			mov		[es:di],ah
  1448                                  
  1449 00000A4D 89F7                    			mov		di,si
  1450 00000A4F 47                      			inc		di
  1451                                  
  1452 00000A50 88C3                    			mov		bl,al
  1453 00000A52 80E30F                  			and		bl,15
  1454 00000A55 8A87[800C]              			mov		al,[Hex0+bx]
  1455 00000A59 268805                  			mov		[es:di],al
  1456 00000A5C 81C70020                			add		di,8192
  1457 00000A60 8A87[900C]              			mov		al,[Hex1+bx]
  1458 00000A64 268805                  			mov		[es:di],al
  1459 00000A67 81EFB01F                			sub		di,8192-80
  1460 00000A6B 8A87[A00C]              			mov		al,[Hex2+bx]
  1461 00000A6F 268805                  			mov		[es:di],al
  1462 00000A72 81C70020                			add		di,8192
  1463 00000A76 8A87[B00C]              			mov		al,[Hex3+bx]
  1464 00000A7A 268805                  			mov		[es:di],al
  1465 00000A7D 81EFB01F                			sub		di,8192-80
  1466 00000A81 8A87[C00C]              			mov		al,[Hex4+bx]
  1467 00000A85 268805                  			mov		[es:di],al
  1468 00000A88 C3                      			ret
  1469                                  
  1470 00000A89 50                      Hex24:		push	ax
  1471 00000A8A 53                      			push	bx
  1472                                  
  1473 00000A8B 88F8                    			mov		al,bh
  1474 00000A8D E82100                  			call	Hex8
  1475                                  						
  1476 00000A90 5B                      			pop		bx
  1477 00000A91 58                      			pop		ax
  1478                                  
  1479 00000A92 50                      			push	ax
  1480 00000A93 53                      			push	bx
  1481                                  
  1482 00000A94 BF0200                  			mov		di,2
  1483 00000A97 E81900                  			call	HexByte
  1484                                  
  1485 00000A9A 5B                      			pop		bx
  1486 00000A9B 58                      			pop		ax
  1487                                  
  1488 00000A9C 88E0                    			mov		al,ah
  1489 00000A9E BF0400                  			mov		di,4
  1490 00000AA1 EB10                    			jmp		HexByte	; does ret
  1491                                  
  1492 00000AA3 50                      Hex16:		push	ax
  1493 00000AA4 53                      			push	bx
  1494                                  
  1495 00000AA5 88E0                    			mov		al,ah
  1496 00000AA7 E80700                  			call	Hex8
  1497                                  						
  1498 00000AAA 5B                      			pop		bx
  1499 00000AAB 58                      			pop		ax
  1500                                  
  1501 00000AAC BF0200                  			mov		di,2
  1502 00000AAF EB02                    			jmp		HexByte ; does ret
  1503                                  
  1504 00000AB1 31FF                    Hex8:		xor		di,di
  1505 00000AB3 30FF                    HexByte:	xor		bh,bh
  1506 00000AB5 88DC                    			mov		ah,bl
  1507 00000AB7 00E4                    			add		ah,ah	; *2
  1508 00000AB9 00E3                    			add		bl,ah	; *3
  1509 00000ABB 01DB                    			add		bx,bx	; *6
  1510 00000ABD 01DB                    			add		bx,bx	; *12
  1511 00000ABF 03BF[0000]              			add		di,[BackBufferTable+bx]	; lookup start ver
  1512 00000AC3 E945FF                  			jmp		HexChar	 ; does ret
  1513                                  ;			ret
  1514                                  
  1515                                  
  1516                                  ; pre-classify point
  1517                                  ; get camera v
  1518                                  ; sub 255
  1519                                  ; store start_v
  1520                                  ; get camera_h
  1521                                  ; sub 255
  1522                                  ; store start_h
  1523                                  ; get camera_z
  1524                                  ; sub 255
  1525                                  ; store start_z
  1526                                  
  1527                                  ; classify point
  1528                                  ; get v
  1529                                  ; sub start_v from v
  1530                                  ; if v neg
  1531                                  ;  off left
  1532                                  ; if v gt 510
  1533                                  ;  off right
  1534                                  ; get z
  1535                                  ; sub start_z from z
  1536                                  ; if z neg
  1537                                  ;  off back
  1538                                  ; if z gt 510
  1539                                  ;  off front
  1540                                  
  1541                                  ; get h
  1542                                  ; sub start_h from h
  1543                                  ; if h neg
  1544                                  ;  off top
  1545                                  ; if h gt 510
  1546                                  ;  off bot
  1547                                   
  1548                                  ; get object
  1549                                  ; rotate it
  1550                                  ; translate it
  1551                                  ; classify each point
  1552                                  ; if onscreen 
  1553                                  ;  do perspective
  1554                                  
  1555                                  ; read through lines
  1556                                  
  1557                                  MAX_EDGE EQU 510
  1558                                  MIDDLE_H EQU MIDDLE_X
  1559                                  
  1560 00000AC6 57                      DrawObjectZW:	push	di ; object lines
  1561 00000AC7 51                      				push	cx ; number of lines
  1562                                  
  1563 00000AC8 30ED                    				xor		ch,ch
  1564 00000ACA FEC9                    				dec		cl
  1565 00000ACC 00C9                    				add		cl,cl
  1566 00000ACE 89CF                    				mov		di,cx	; point count
  1567                                  
  1568 00000AD0 57                       push di
  1569 00000AD1 BBFF00                  				mov		bx,255 ; high = or clip codes / low = and clip codes
  1570                                  	
  1571 00000AD4 53                      .rotate_point_loop:	push	bx
  1572 00000AD5 3E8B04                  					mov		ax,[ds:si]		; vpos
  1573 00000AD8 3E8B5C02                					mov		bx,[ds:si+2]	; hpos
  1574 00000ADC 3E8B4C04                					mov		cx,[ds:si+4]	; zpos
  1575 00000AE0 890E[C387]              	mov		[Test3],cx
  1576                                  		
  1577 00000AE4 30D2                    					xor		dl,dl					; clip code
  1578                                  
  1579 00000AE6 0306[7A0D]              					add		ax,[VOffset]
  1580                                  
  1581                                  ;					jns		.off_right
  1582                                  ;						mov		dl,LEFT_CC
  1583                                  ;						jmp		.off_ver
  1584                                  ;.off_right			cmp		ax,MAX_EDGE
  1585                                  ;					jle		.off_ver
  1586                                  ;						mov		dl,RIGHT_CC
  1587                                  
  1588                                  
  1589 00000AEA 031E[780D]              .off_ver			add		bx,[HOffset]
  1590                                  
  1591                                  ;					jns		.off_bottom
  1592                                  ;						or		dl,TOP_CC
  1593                                  ;						jmp		.off_z
  1594                                  ;.off_bottom			cmp		bx,MAX_EDGE
  1595                                  ;					jle		.off_z
  1596                                  ;						or		dl,BOTTOM_CC
  1597                                  
  1598                                  
  1599 00000AEE 030E[800D]              .off_z				add		cx,[ZOffset]
  1600 00000AF2 890E[C587]              	mov		[Test4],cx
  1601                                  
  1602                                  
  1603                                  
  1604                                  ;					jns		.off_back
  1605                                  ;						or		dl,FRONT_CC
  1606                                  ;						jmp		.off_clip
  1607                                  ;.off_back			cmp		cx,MAX_EDGE
  1608                                  ;					jle		.off_clip
  1609                                  ;						or		dl,BACK_CC
  1610                                  
  1611                                  .off_clip:
  1612 00000AF6 8985[9485]              					mov		[ObjectYRot+di],ax 	; yrot
  1613 00000AFA 899D[9484]              					mov		[ObjectXRot+di],bx 	; xrot
  1614 00000AFE 898D[9486]              					mov		[ObjectZRot+di],cx 	; zrot
  1615                                  
  1616 00000B02 8895[9483]              					mov		[ObjectClipCode+di],dl 	; clip code
  1617                                  
  1618 00000B06 84D2                    					test	dl,dl
  1619 00000B08 751B                    					jnz		.off_scn
  1620 00000B0A 89C2                    						mov		dx,ax
  1621                                  
  1622 00000B0C 8916[BD87]              	mov		[Test0],dx
  1623 00000B10 891E[BF87]              	mov		[Test1],bx
  1624 00000B14 890E[C187]              	mov		[Test2],cx
  1625                                  
  1626 00000B18 E8EE01                  						call	PerspectiveZW
  1627 00000B1B 899D[9481]              						mov		[ObjectYPos+di],bx 		; xpos
  1628 00000B1F 898D[9482]              						mov		[ObjectXPos+di],cx 		; ypos
  1629                                  						
  1630                                  ;	mov		[Test1],bx
  1631                                  ;	mov		[Test2],cx
  1632                                  
  1633 00000B23 30D2                    						xor		dl,dl	; if it reaches here it must be onscreen?
  1634                                  
  1635                                  .off_scn:
  1636 00000B25 5B                      					pop		bx
  1637 00000B26 20D3                    					and		bl,dl	; object and clip code
  1638 00000B28 08D7                    					or		bh,dl	; object or clip code
  1639                                  		
  1640 00000B2A 83C606                  					add		si,6				
  1641 00000B2D 83EF02                  					sub		di,2
  1642 00000B30 79A2                    					jns		.rotate_point_loop
  1643                                  				
  1644 00000B32 59                      				pop		cx 	; number of lines
  1645 00000B33 5E                      				pop 	si 	; object lines
  1646                                  
  1647 00000B34 5F                       pop di ; number of points
  1648                                  
  1649                                  ;	mov		[Test0],bx
  1650                                  
  1651 00000B35 8B1E[9481]              						mov		bx,[ObjectYPos+0] 		; xpos
  1652 00000B39 8B2E[9482]              						mov		bp,[ObjectXPos+0] 		; ypos
  1653 00000B3D E82CF9                  						call	Plot11
  1654 00000B40 8B1E[9681]              						mov		bx,[ObjectYPos+2] 		; xpos
  1655 00000B44 8B2E[9682]              						mov		bp,[ObjectXPos+2] 		; ypos
  1656 00000B48 E821F9                  						call	Plot11
  1657 00000B4B 8B1E[9881]              						mov		bx,[ObjectYPos+4] 		; xpos
  1658 00000B4F 8B2E[9882]              						mov		bp,[ObjectXPos+4] 		; ypos
  1659 00000B53 E816F9                  						call	Plot11
  1660 00000B56 8B1E[9A81]              						mov		bx,[ObjectYPos+6] 		; xpos
  1661 00000B5A 8B2E[9A82]              						mov		bp,[ObjectXPos+6] 		; ypos
  1662 00000B5E E80BF9                  						call	Plot11
  1663                                  
  1664 00000B61 8B1E[9C81]              						mov		bx,[ObjectYPos+8] 		; xpos
  1665 00000B65 8B2E[9C82]              						mov		bp,[ObjectXPos+8] 		; ypos
  1666 00000B69 E800F9                  						call	Plot11
  1667 00000B6C 8B1E[9E81]              						mov		bx,[ObjectYPos+10] 		; xpos
  1668 00000B70 8B2E[9E82]              						mov		bp,[ObjectXPos+10] 		; ypos
  1669 00000B74 E8F5F8                  						call	Plot11
  1670 00000B77 8B1E[A081]              						mov		bx,[ObjectYPos+12] 		; xpos
  1671 00000B7B 8B2E[A082]              						mov		bp,[ObjectXPos+12] 		; ypos
  1672 00000B7F E8EAF8                  						call	Plot11
  1673 00000B82 8B1E[A281]              						mov		bx,[ObjectYPos+14] 		; xpos
  1674 00000B86 8B2E[A282]              						mov		bp,[ObjectXPos+14] 		; ypos
  1675 00000B8A E8DFF8                  						call	Plot11
  1676                                    
  1677 00000B8D C3                      	ret
  1678 00000B8E 80FB00                  				cmp		bl,0				; if and_object_clip_code ne 0 all off one side so exit
  1679 00000B91 7530                    				jnz		.off_screen
  1680                                   
  1681 00000B93 80FF00                  				cmp		bh,0				; if or_object_clip_code eq 0 all on screen so no clip needed
  1682 00000B96 752C                    				jnz		.draw_clipped_object
  1683                                  
  1684                                  .draw_whole_object:
  1685 00000B98 51                      .draw_whole_object_line_loop:	push	cx
  1686 00000B99 56                      								push	si
  1687                                  
  1688 00000B9A 30FF                    								xor		bh,bh
  1689 00000B9C 3E8A1C                  								mov		bl,[ds:si]
  1690 00000B9F 00DB                    								add		bl,bl	
  1691 00000BA1 8B8F[9481]              								mov		cx,[ObjectYPos+bx] ; endy
  1692 00000BA5 8B97[9482]              								mov		dx,[ObjectXPos+bx] ; endx
  1693                                   
  1694 00000BA9 3E8A5C01                								mov		bl,[ds:si+1]
  1695 00000BAD 00DB                    								add		bl,bl
  1696 00000BAF 8BAF[9481]              								mov		bp,[ObjectYPos+bx] ; starty
  1697 00000BB3 8BB7[9482]              								mov		si,[ObjectXPos+bx] ; startx
  1698 00000BB7 E8D5F6                  								call	Line00
  1699                                  	 
  1700 00000BBA 5E                      								pop		si
  1701 00000BBB 59                      								pop		cx
  1702 00000BBC 83C602                  								add		si,2
  1703                                  
  1704 00000BBF FECD                    								dec		ch
  1705 00000BC1 75D5                    								jnz		.draw_whole_object_line_loop
  1706                                  
  1707 00000BC3 C3                      .off_screen:				ret
  1708                                  	
  1709                                  .draw_clipped_object:	
  1710 00000BC4 30FF                    .draw_clipped_object_line_loop:	xor		bh,bh
  1711 00000BC6 51                      								push	cx
  1712 00000BC7 56                      								push	si
  1713                                  		
  1714 00000BC8 3E8A1C                  								mov		bl,[ds:si]
  1715 00000BCB 00DB                    								add		bl,bl
  1716 00000BCD 8A87[9483]              								mov		al,[ObjectClipCode+bx] 	; start clip code
  1717 00000BD1 3E8A5C01                								mov		bl,[ds:si+1]
  1718 00000BD5 00DB                    								add		bl,bl
  1719 00000BD7 8AA7[9483]              								mov		ah,[ObjectClipCode+bx] 	; end clip code
  1720                                  
  1721 00000BDB 88C3                    								mov		bl,al		; backup start clip code
  1722 00000BDD 20E3                    								and		bl,ah	; both points are off 
  1723 00000BDF 7522                    								jnz		.line_off_screen	; then line is off screen
  1724                                  
  1725 00000BE1 08E0                    								or		al,ah 	; if any point is off
  1726 00000BE3 7528                    								jnz		.line_clip	; then line needs clipped
  1727                                  		
  1728 00000BE5 3E8A1C                  								mov		bl,[ds:si]
  1729 00000BE8 00DB                    								add		bl,bl	
  1730 00000BEA 8B8F[9481]              								mov		cx,[ObjectYPos+bx] ; starty
  1731 00000BEE 8B97[9482]              								mov		dx,[ObjectXPos+bx] ; startx
  1732                                  
  1733 00000BF2 3E8A5C01                								mov		bl,[ds:si+1]
  1734 00000BF6 00DB                    								add		bl,bl
  1735 00000BF8 8BAF[9481]              								mov		bp,[ObjectYPos+bx] ; endy 
  1736 00000BFC 8BB7[9482]              								mov		si,[ObjectXPos+bx] ; endx - todo - si is the problem?
  1737                                  
  1738 00000C00 E8B8F5                  .draw_clipped_line:				call	Line11
  1739                                  
  1740 00000C03 5E                      .line_off_screen:				pop		si
  1741 00000C04 59                      								pop		cx
  1742 00000C05 83C602                  								add		si,2
  1743                                  		
  1744 00000C08 FECD                    								dec		ch
  1745 00000C0A 75B8                    								jnz		.draw_clipped_object_line_loop
  1746 00000C0C C3                      							ret
  1747                                  
  1748                                  .line_clip:	; al = point 1 clip ; ah = point 2 clip
  1749                                  
  1750                                  ; copy point details to 2 sets of coords temp coords zyx and temp perspective xy
  1751                                  ; if either point is behind
  1752                                  ;  do z clip on required point
  1753                                  ;  do perspective
  1754                                  ;  do rest of tests
  1755                                  
  1756 00000C0D 30FF                    					xor		bh,bh
  1757 00000C0F 3E8A1C                  					mov		bl,[ds:si]
  1758 00000C12 00DB                    					add		bl,bl	
  1759 00000C14 8B97[9484]              					mov		dx,[ObjectXRot+bx]
  1760 00000C18 8916[B187]              					mov		[STX],dx
  1761 00000C1C 8B97[9485]              					mov		dx,[ObjectYRot+bx]
  1762 00000C20 8916[B387]              					mov		[STY],dx
  1763 00000C24 8B97[9486]              					mov		dx,[ObjectZRot+bx]
  1764 00000C28 8916[B587]              					mov		[STZ],dx
  1765 00000C2C 8B97[9482]              					mov		dx,[ObjectXPos+bx]
  1766 00000C30 8916[A087]              					mov		[XST],dx
  1767 00000C34 8B97[9481]              					mov		dx,[ObjectYPos+bx]	
  1768 00000C38 8916[A287]              					mov		[YST],dx	
  1769 00000C3C 8A87[9483]              					mov		al,[ObjectClipCode+bx]
  1770                                  	
  1771 00000C40 3E8A5C01                					mov		bl,[ds:si+1]
  1772 00000C44 00DB                    					add		bl,bl
  1773 00000C46 8B97[9484]              					mov		dx,[ObjectXRot+bx]
  1774 00000C4A 8916[B787]              					mov		[ENX],dx
  1775 00000C4E 8B97[9485]              					mov		dx,[ObjectYRot+bx]
  1776 00000C52 8916[B987]              					mov		[ENY],dx
  1777 00000C56 8B97[9486]              					mov		dx,[ObjectZRot+bx]
  1778 00000C5A 8916[BB87]              					mov		[ENZ],dx	
  1779 00000C5E 8B97[9482]              					mov		dx,[ObjectXPos+bx]
  1780 00000C62 8916[A487]              					mov		[XEN],dx
  1781 00000C66 8B97[9481]              					mov		dx,[ObjectYPos+bx]
  1782 00000C6A 8916[A687]              					mov		[YEN],dx
  1783 00000C6E 8AA7[9483]              					mov		ah,[ObjectClipCode+bx]
  1784                                  
  1785 00000C72 A3[A887]                					mov		[CCST],ax
  1786                                  	
  1787 00000C75 A1[A887]                .line_clip_loop:	mov		ax,[CCST]
  1788 00000C78 88C3                    					mov		bl,al			; start cc
  1789 00000C7A 20E0                    					and		al,ah			; and with end cc
  1790 00000C7C 7585                    					jnz		.line_off_screen		; both off same side
  1791                                  	
  1792 00000C7E 08E3                    					or		bl,ah			; or with end cc
  1793 00000C80 7474                    					jz		.clip_draw_test		; all on so draw line
  1794                                  
  1795 00000C82 F6C310                  .clip_behind_test:	test	bl,BEHIND_CC	; test if either point is off (al=al or ah)
  1796 00000C85 7413                    					jz		.clip_left_test
  1797 00000C87 E8D5F9                  					call	LineClipBehind
  1798                                  
  1799 00000C8A A1[A887]                					mov		ax,[CCST]
  1800 00000C8D 88C3                    					mov		bl,al			; start cc
  1801 00000C8F 20E0                    					and		al,ah			; and with end cc
  1802 00000C91 7403E96DFF              					jnz		.line_off_screen		; both off same side
  1803                                  
  1804 00000C96 08E3                    					or		bl,ah			; or with end cc
  1805 00000C98 745C                    					jz		.clip_draw_test		; all on so draw line
  1806                                  	
  1807 00000C9A F6C304                  .clip_left_test:	test	bl,LEFT_CC
  1808 00000C9D 7413                    					jz		.clip_right_test
  1809 00000C9F E897FA                  					call	LineClipLeft
  1810 00000CA2 A1[A887]                					mov		ax,[CCST]
  1811 00000CA5 88C3                    					mov		bl,al			; start cc
  1812 00000CA7 20E0                    					and		al,ah			; and with end cc
  1813 00000CA9 7403E955FF              					jnz		.line_off_screen		; both off same side
  1814                                  
  1815 00000CAE 08E3                    					or		bl,ah			; or with end cc
  1816 00000CB0 7444                    					jz		.clip_draw_test		; all on so draw line
  1817                                  		
  1818 00000CB2 F6C308                  .clip_right_test:	test	bl,RIGHT_CC
  1819 00000CB5 7413                    					jz		.clip_top_test
  1820 00000CB7 E8DCFA                  					call	LineClipRight
  1821 00000CBA A1[A887]                					mov		ax,[CCST]
  1822 00000CBD 88C3                    					mov		bl,al			; start cc
  1823 00000CBF 20E0                    					and		al,ah			; and with end cc
  1824 00000CC1 7403E93DFF              					jnz		.line_off_screen		; both off same side
  1825                                  	
  1826 00000CC6 08E3                    					or		bl,ah			; or with end cc
  1827 00000CC8 742C                    					jz		.clip_draw_test		; all on so draw line
  1828                                  		
  1829                                  
  1830 00000CCA F6C301                  .clip_top_test:		test	bl,TOP_CC
  1831 00000CCD 7413                    					jz		.clip_bottom_test
  1832 00000CCF E80AFA                  					call	LineClipTop
  1833 00000CD2 A1[A887]                					mov		ax,[CCST]
  1834 00000CD5 88C3                    					mov		bl,al			; start cc
  1835 00000CD7 20E0                    					and		al,ah			; and with end cc
  1836 00000CD9 7403E925FF              					jnz		.line_off_screen		; both off same side
  1837                                  
  1838 00000CDE 08E3                    					or		bl,ah			; or with end cc
  1839 00000CE0 7414                    					jz		.clip_draw_test		; all on so draw line
  1840                                  
  1841 00000CE2 F6C302                  .clip_bottom_test:	test	bl,BOTTOM_CC
  1842 00000CE5 748E                    					jz		.line_clip_loop
  1843 00000CE7 E80BFB                  					call	LineClipBottom
  1844 00000CEA A1[A887]                					mov		ax,[CCST]
  1845 00000CED 88C3                    					mov		bl,al			; start cc
  1846 00000CEF 20E0                    					and		al,ah			; and with end cc
  1847 00000CF1 7403E90DFF              					jnz		.line_off_screen		; both off same side
  1848                                  
  1849 00000CF6 8B0E[A287]              .clip_draw_test:	mov		cx,[YST]
  1850 00000CFA 8B16[A087]              					mov		dx,[XST]
  1851 00000CFE 8B2E[A687]              					mov		bp,[YEN]
  1852 00000D02 8B36[A487]              					mov		si,[XEN]
  1853 00000D06 E9F7FE                  					jmp		.draw_clipped_line
  1854                                  
  1855                                  ; hor = 0 to 510
  1856                                  ; ver = 0 to 510
  1857                                  ; z = 0 to 510
  1858                                  
  1859                                  PerspectiveZW: ; in = bx=z/cx=v/dx=h/dh=hsign - out = bx=v/cx=h
  1860 00000D09 D1EB                    	shr		bx,1
  1861 00000D0B 8A87[820E]              	mov		al,[persvtab8+bx]
  1862 00000D0F D1E9                    	shr		cx,1
  1863 00000D11 F6E1                    	MUL		cl
  1864                                  
  1865 00000D13 8A87[820D]              	mov		al,[pershtab8+bx]
  1866 00000D17 88E3                    	mov		bl,ah
  1867 00000D19 42                      	inc 	dx
  1868 00000D1A 84F6                        test 	dh,dh
  1869 00000D1C 750D                    	jnz		.pos
  1870                                  
  1871 00000D1E F6DA                    .neg	neg		dl
  1872 00000D20 F6E2                    		MUL		dl
  1873 00000D22 88E1                    		mov		cl,ah
  1874 00000D24 F7D9                    		neg		cx
  1875 00000D26 81C1A000                		add		cx,MIDDLE_H
  1876 00000D2A C3                      		ret
  1877                                  
  1878 00000D2B F6E2                    .pos	MUL		dl
  1879 00000D2D 88E1                    		mov		cl,ah
  1880 00000D2F 81C1A000                		add		cx,MIDDLE_H
  1881 00000D33 C3                      		ret
  1882                                  
  1883                                  section .data align=8 ; 16 ; 8 ; 16
  1884                                  
  1885                                  OrTable:	
  1886 00000000 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1886 00000009 0030000C000300C000-
  1886 00000012 30000C000300C00030-
  1886 0000001B 000C000300C0003000-
  1886 00000024 0C000300C00030000C-
  1886 0000002D 000300C00030000C00-
  1886 00000036 0300C00030000C0003-
  1886 0000003F 00                 
  1887 00000040 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1887 00000049 0030000C000300C000-
  1887 00000052 30000C000300C00030-
  1887 0000005B 000C000300C0003000-
  1887 00000064 0C000300C00030000C-
  1887 0000006D 000300C00030000C00-
  1887 00000076 0300C00030000C0003-
  1887 0000007F 00                 
  1888 00000080 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1888 00000089 0030000C000300C000-
  1888 00000092 30000C000300C00030-
  1888 0000009B 000C000300C0003000-
  1888 000000A4 0C000300C00030000C-
  1888 000000AD 000300C00030000C00-
  1888 000000B6 0300C00030000C0003-
  1888 000000BF 00                 
  1889 000000C0 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1889 000000C9 0030000C000300C000-
  1889 000000D2 30000C000300C00030-
  1889 000000DB 000C000300C0003000-
  1889 000000E4 0C000300C00030000C-
  1889 000000ED 000300C00030000C00-
  1889 000000F6 0300C00030000C0003-
  1889 000000FF 00                 
  1890 00000100 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1890 00000109 0030000C000300C000-
  1890 00000112 30000C000300C00030-
  1890 0000011B 000C000300C0003000-
  1890 00000124 0C000300C00030000C-
  1890 0000012D 000300C00030000C00-
  1890 00000136 0300C00030000C0003-
  1890 0000013F 00                 
  1891 00000140 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1891 00000149 0030000C000300C000-
  1891 00000152 30000C000300C00030-
  1891 0000015B 000C000300C0003000-
  1891 00000164 0C000300C00030000C-
  1891 0000016D 000300C00030000C00-
  1891 00000176 0300C00030000C0003-
  1891 0000017F 00                 
  1892 00000180 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1892 00000189 0030000C000300C000-
  1892 00000192 30000C000300C00030-
  1892 0000019B 000C000300C0003000-
  1892 000001A4 0C000300C00030000C-
  1892 000001AD 000300C00030000C00-
  1892 000001B6 0300C00030000C0003-
  1892 000001BF 00                 
  1893 000001C0 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1893 000001C9 0030000C000300C000-
  1893 000001D2 30000C000300C00030-
  1893 000001DB 000C000300C0003000-
  1893 000001E4 0C000300C00030000C-
  1893 000001ED 000300C00030000C00-
  1893 000001F6 0300C00030000C0003-
  1893 000001FF 00                 
  1894 00000200 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1894 00000209 0030000C000300C000-
  1894 00000212 30000C000300C00030-
  1894 0000021B 000C000300C0003000-
  1894 00000224 0C000300C00030000C-
  1894 0000022D 000300C00030000C00-
  1894 00000236 0300C00030000C0003-
  1894 0000023F 00                 
  1895 00000240 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1895 00000249 0030000C000300C000-
  1895 00000252 30000C000300C00030-
  1895 0000025B 000C000300C0003000-
  1895 00000264 0C000300C00030000C-
  1895 0000026D 000300C00030000C00-
  1895 00000276 0300C00030000C0003-
  1895 0000027F 00                 
  1896 00000280 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1896 00000289 0030000C000300C000-
  1896 00000292 30000C000300C00030-
  1896 0000029B 000C000300C0003000-
  1896 000002A4 0C000300C00030000C-
  1896 000002AD 000300C00030000C00-
  1896 000002B6 0300C00030000C0003-
  1896 000002BF 00                 
  1897 000002C0 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1897 000002C9 0030000C000300C000-
  1897 000002D2 30000C000300C00030-
  1897 000002DB 000C000300C0003000-
  1897 000002E4 0C000300C00030000C-
  1897 000002ED 000300C00030000C00-
  1897 000002F6 0300C00030000C0003-
  1897 000002FF 00                 
  1898 00000300 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1898 00000309 0030000C000300C000-
  1898 00000312 30000C000300C00030-
  1898 0000031B 000C000300C0003000-
  1898 00000324 0C000300C00030000C-
  1898 0000032D 000300C00030000C00-
  1898 00000336 0300C00030000C0003-
  1898 0000033F 00                 
  1899 00000340 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1899 00000349 0030000C000300C000-
  1899 00000352 30000C000300C00030-
  1899 0000035B 000C000300C0003000-
  1899 00000364 0C000300C00030000C-
  1899 0000036D 000300C00030000C00-
  1899 00000376 0300C00030000C0003-
  1899 0000037F 00                 
  1900 00000380 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1900 00000389 0030000C000300C000-
  1900 00000392 30000C000300C00030-
  1900 0000039B 000C000300C0003000-
  1900 000003A4 0C000300C00030000C-
  1900 000003AD 000300C00030000C00-
  1900 000003B6 0300C00030000C0003-
  1900 000003BF 00                 
  1901 000003C0 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1901 000003C9 0030000C000300C000-
  1901 000003D2 30000C000300C00030-
  1901 000003DB 000C000300C0003000-
  1901 000003E4 0C000300C00030000C-
  1901 000003ED 000300C00030000C00-
  1901 000003F6 0300C00030000C0003-
  1901 000003FF 00                 
  1902 00000400 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1902 00000409 0030000C000300C000-
  1902 00000412 30000C000300C00030-
  1902 0000041B 000C000300C0003000-
  1902 00000424 0C000300C00030000C-
  1902 0000042D 000300C00030000C00-
  1902 00000436 0300C00030000C0003-
  1902 0000043F 00                 
  1903 00000440 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1903 00000449 0030000C000300C000-
  1903 00000452 30000C000300C00030-
  1903 0000045B 000C000300C0003000-
  1903 00000464 0C000300C00030000C-
  1903 0000046D 000300C00030000C00-
  1903 00000476 0300C00030000C0003-
  1903 0000047F 00                 
  1904 00000480 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1904 00000489 0030000C000300C000-
  1904 00000492 30000C000300C00030-
  1904 0000049B 000C000300C0003000-
  1904 000004A4 0C000300C00030000C-
  1904 000004AD 000300C00030000C00-
  1904 000004B6 0300C00030000C0003-
  1904 000004BF 00                 
  1905 000004C0 C00030000C000300C0-     	dw	192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3,192,48,12,3
  1905 000004C9 0030000C000300C000-
  1905 000004D2 30000C000300C00030-
  1905 000004DB 000C000300C0003000-
  1905 000004E4 0C000300C00030000C-
  1905 000004ED 000300C00030000C00-
  1905 000004F6 0300C00030000C0003-
  1905 000004FF 00                 
  1906                                  
  1907                                  AndTable:	
  1908 00000500 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1908 00000509 00CF00F300FC003F00-
  1908 00000512 CF00F300FC003F00CF-
  1908 0000051B 00F300FC003F00CF00-
  1908 00000524 F300FC003F00CF00F3-
  1908 0000052D 00FC003F00CF00F300-
  1908 00000536 FC003F00CF00F300FC-
  1908 0000053F 00                 
  1909 00000540 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1909 00000549 00CF00F300FC003F00-
  1909 00000552 CF00F300FC003F00CF-
  1909 0000055B 00F300FC003F00CF00-
  1909 00000564 F300FC003F00CF00F3-
  1909 0000056D 00FC003F00CF00F300-
  1909 00000576 FC003F00CF00F300FC-
  1909 0000057F 00                 
  1910 00000580 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1910 00000589 00CF00F300FC003F00-
  1910 00000592 CF00F300FC003F00CF-
  1910 0000059B 00F300FC003F00CF00-
  1910 000005A4 F300FC003F00CF00F3-
  1910 000005AD 00FC003F00CF00F300-
  1910 000005B6 FC003F00CF00F300FC-
  1910 000005BF 00                 
  1911 000005C0 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1911 000005C9 00CF00F300FC003F00-
  1911 000005D2 CF00F300FC003F00CF-
  1911 000005DB 00F300FC003F00CF00-
  1911 000005E4 F300FC003F00CF00F3-
  1911 000005ED 00FC003F00CF00F300-
  1911 000005F6 FC003F00CF00F300FC-
  1911 000005FF 00                 
  1912 00000600 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1912 00000609 00CF00F300FC003F00-
  1912 00000612 CF00F300FC003F00CF-
  1912 0000061B 00F300FC003F00CF00-
  1912 00000624 F300FC003F00CF00F3-
  1912 0000062D 00FC003F00CF00F300-
  1912 00000636 FC003F00CF00F300FC-
  1912 0000063F 00                 
  1913 00000640 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1913 00000649 00CF00F300FC003F00-
  1913 00000652 CF00F300FC003F00CF-
  1913 0000065B 00F300FC003F00CF00-
  1913 00000664 F300FC003F00CF00F3-
  1913 0000066D 00FC003F00CF00F300-
  1913 00000676 FC003F00CF00F300FC-
  1913 0000067F 00                 
  1914 00000680 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1914 00000689 00CF00F300FC003F00-
  1914 00000692 CF00F300FC003F00CF-
  1914 0000069B 00F300FC003F00CF00-
  1914 000006A4 F300FC003F00CF00F3-
  1914 000006AD 00FC003F00CF00F300-
  1914 000006B6 FC003F00CF00F300FC-
  1914 000006BF 00                 
  1915 000006C0 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1915 000006C9 00CF00F300FC003F00-
  1915 000006D2 CF00F300FC003F00CF-
  1915 000006DB 00F300FC003F00CF00-
  1915 000006E4 F300FC003F00CF00F3-
  1915 000006ED 00FC003F00CF00F300-
  1915 000006F6 FC003F00CF00F300FC-
  1915 000006FF 00                 
  1916 00000700 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1916 00000709 00CF00F300FC003F00-
  1916 00000712 CF00F300FC003F00CF-
  1916 0000071B 00F300FC003F00CF00-
  1916 00000724 F300FC003F00CF00F3-
  1916 0000072D 00FC003F00CF00F300-
  1916 00000736 FC003F00CF00F300FC-
  1916 0000073F 00                 
  1917 00000740 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1917 00000749 00CF00F300FC003F00-
  1917 00000752 CF00F300FC003F00CF-
  1917 0000075B 00F300FC003F00CF00-
  1917 00000764 F300FC003F00CF00F3-
  1917 0000076D 00FC003F00CF00F300-
  1917 00000776 FC003F00CF00F300FC-
  1917 0000077F 00                 
  1918 00000780 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1918 00000789 00CF00F300FC003F00-
  1918 00000792 CF00F300FC003F00CF-
  1918 0000079B 00F300FC003F00CF00-
  1918 000007A4 F300FC003F00CF00F3-
  1918 000007AD 00FC003F00CF00F300-
  1918 000007B6 FC003F00CF00F300FC-
  1918 000007BF 00                 
  1919 000007C0 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1919 000007C9 00CF00F300FC003F00-
  1919 000007D2 CF00F300FC003F00CF-
  1919 000007DB 00F300FC003F00CF00-
  1919 000007E4 F300FC003F00CF00F3-
  1919 000007ED 00FC003F00CF00F300-
  1919 000007F6 FC003F00CF00F300FC-
  1919 000007FF 00                 
  1920 00000800 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1920 00000809 00CF00F300FC003F00-
  1920 00000812 CF00F300FC003F00CF-
  1920 0000081B 00F300FC003F00CF00-
  1920 00000824 F300FC003F00CF00F3-
  1920 0000082D 00FC003F00CF00F300-
  1920 00000836 FC003F00CF00F300FC-
  1920 0000083F 00                 
  1921 00000840 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1921 00000849 00CF00F300FC003F00-
  1921 00000852 CF00F300FC003F00CF-
  1921 0000085B 00F300FC003F00CF00-
  1921 00000864 F300FC003F00CF00F3-
  1921 0000086D 00FC003F00CF00F300-
  1921 00000876 FC003F00CF00F300FC-
  1921 0000087F 00                 
  1922 00000880 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1922 00000889 00CF00F300FC003F00-
  1922 00000892 CF00F300FC003F00CF-
  1922 0000089B 00F300FC003F00CF00-
  1922 000008A4 F300FC003F00CF00F3-
  1922 000008AD 00FC003F00CF00F300-
  1922 000008B6 FC003F00CF00F300FC-
  1922 000008BF 00                 
  1923 000008C0 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1923 000008C9 00CF00F300FC003F00-
  1923 000008D2 CF00F300FC003F00CF-
  1923 000008DB 00F300FC003F00CF00-
  1923 000008E4 F300FC003F00CF00F3-
  1923 000008ED 00FC003F00CF00F300-
  1923 000008F6 FC003F00CF00F300FC-
  1923 000008FF 00                 
  1924 00000900 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1924 00000909 00CF00F300FC003F00-
  1924 00000912 CF00F300FC003F00CF-
  1924 0000091B 00F300FC003F00CF00-
  1924 00000924 F300FC003F00CF00F3-
  1924 0000092D 00FC003F00CF00F300-
  1924 00000936 FC003F00CF00F300FC-
  1924 0000093F 00                 
  1925 00000940 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1925 00000949 00CF00F300FC003F00-
  1925 00000952 CF00F300FC003F00CF-
  1925 0000095B 00F300FC003F00CF00-
  1925 00000964 F300FC003F00CF00F3-
  1925 0000096D 00FC003F00CF00F300-
  1925 00000976 FC003F00CF00F300FC-
  1925 0000097F 00                 
  1926 00000980 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1926 00000989 00CF00F300FC003F00-
  1926 00000992 CF00F300FC003F00CF-
  1926 0000099B 00F300FC003F00CF00-
  1926 000009A4 F300FC003F00CF00F3-
  1926 000009AD 00FC003F00CF00F300-
  1926 000009B6 FC003F00CF00F300FC-
  1926 000009BF 00                 
  1927 000009C0 3F00CF00F300FC003F-     	dw	255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3,255-192,255-48,255-12,255-3
  1927 000009C9 00CF00F300FC003F00-
  1927 000009D2 CF00F300FC003F00CF-
  1927 000009DB 00F300FC003F00CF00-
  1927 000009E4 F300FC003F00CF00F3-
  1927 000009ED 00FC003F00CF00F300-
  1927 000009F6 FC003F00CF00F300FC-
  1927 000009FF 00                 
  1928                                  	
  1929                                  HorPosTable:
  1930 00000A00 0000000000000000        	dw	0,0,0,0
  1931 00000A08 0100010001000100        	dw	1,1,1,1
  1932 00000A10 0200020002000200        	dw	2,2,2,2
  1933 00000A18 0300030003000300        	dw	3,3,3,3
  1934 00000A20 0400040004000400        	dw	4,4,4,4
  1935 00000A28 0500050005000500        	dw	5,5,5,5
  1936 00000A30 0600060006000600        	dw	6,6,6,6
  1937 00000A38 0700070007000700        	dw	7,7,7,7
  1938 00000A40 0800080008000800        	dw	8,8,8,8
  1939 00000A48 0900090009000900        	dw	9,9,9,9
  1940                                  	
  1941 00000A50 0A000A000A000A00        	dw	10,10,10,10
  1942 00000A58 0B000B000B000B00        	dw	11,11,11,11
  1943 00000A60 0C000C000C000C00        	dw	12,12,12,12
  1944 00000A68 0D000D000D000D00        	dw	13,13,13,13
  1945 00000A70 0E000E000E000E00        	dw	14,14,14,14
  1946 00000A78 0F000F000F000F00        	dw	15,15,15,15
  1947 00000A80 1000100010001000        	dw	16,16,16,16
  1948 00000A88 1100110011001100        	dw	17,17,17,17
  1949 00000A90 1200120012001200        	dw	18,18,18,18
  1950 00000A98 1300130013001300        	dw	19,19,19,19
  1951                                  	
  1952 00000AA0 1400140014001400        	dw	20,20,20,20
  1953 00000AA8 1500150015001500        	dw	21,21,21,21
  1954 00000AB0 1600160016001600        	dw	22,22,22,22
  1955 00000AB8 1700170017001700        	dw	23,23,23,23
  1956 00000AC0 1800180018001800        	dw	24,24,24,24
  1957 00000AC8 1900190019001900        	dw	25,25,25,25
  1958 00000AD0 1A001A001A001A00        	dw	26,26,26,26
  1959 00000AD8 1B001B001B001B00        	dw	27,27,27,27
  1960 00000AE0 1C001C001C001C00        	dw	28,28,28,28
  1961 00000AE8 1D001D001D001D00        	dw	29,29,29,29
  1962                                  	
  1963 00000AF0 1E001E001E001E00        	dw	30,30,30,30
  1964 00000AF8 1F001F001F001F00        	dw	31,31,31,31
  1965 00000B00 2000200020002000        	dw	32,32,32,32
  1966 00000B08 2100210021002100        	dw	33,33,33,33
  1967 00000B10 2200220022002200        	dw	34,34,34,34
  1968 00000B18 2300230023002300        	dw	35,35,35,35
  1969 00000B20 2400240024002400        	dw	36,36,36,36
  1970 00000B28 2500250025002500        	dw	37,37,37,37
  1971 00000B30 2600260026002600        	dw	38,38,38,38
  1972 00000B38 2700270027002700        	dw	39,39,39,39
  1973                                  
  1974 00000B40 2800280028002800        	dw	40,40,40,40
  1975 00000B48 2900290029002900        	dw	41,41,41,41
  1976 00000B50 2A002A002A002A00        	dw	42,42,42,42
  1977 00000B58 2B002B002B002B00        	dw	43,43,43,43
  1978 00000B60 2C002C002C002C00        	dw	44,44,44,44
  1979 00000B68 2D002D002D002D00        	dw	45,45,45,45
  1980 00000B70 2E002E002E002E00        	dw	46,46,46,46
  1981 00000B78 2F002F002F002F00        	dw	47,47,47,47
  1982 00000B80 3000300030003000        	dw	48,48,48,48
  1983 00000B88 3100310031003100        	dw	49,49,49,49
  1984                                  
  1985 00000B90 3200320032003200        	dw	50,50,50,50
  1986 00000B98 3300330033003300        	dw	51,51,51,51
  1987 00000BA0 3400340034003400        	dw	52,52,52,52
  1988 00000BA8 3500350035003500        	dw	53,53,53,53
  1989 00000BB0 3600360036003600        	dw	54,54,54,54
  1990 00000BB8 3700370037003700        	dw	55,55,55,55
  1991 00000BC0 3800380038003800        	dw	56,56,56,56
  1992 00000BC8 3900390039003900        	dw	57,57,57,57
  1993 00000BD0 3A003A003A003A00        	dw	58,58,58,58
  1994 00000BD8 3B003B003B003B00        	dw	59,59,59,59
  1995                                  
  1996 00000BE0 3C003C003C003C00        	dw	60,60,60,60
  1997 00000BE8 3D003D003D003D00        	dw	61,61,61,61
  1998 00000BF0 3E003E003E003E00        	dw	62,62,62,62
  1999 00000BF8 3F003F003F003F00        	dw	63,63,63,63
  2000 00000C00 4000400040004000        	dw	64,64,64,64
  2001 00000C08 4100410041004100        	dw	65,65,65,65
  2002 00000C10 4200420042004200        	dw	66,66,66,66
  2003 00000C18 4300430043004300        	dw	67,67,67,67
  2004 00000C20 4400440044004400        	dw	68,68,68,68
  2005 00000C28 4500450045004500        	dw	69,69,69,69
  2006                                  
  2007 00000C30 4600460046004600        	dw	70,70,70,70
  2008 00000C38 4700470047004700        	dw	71,71,71,71
  2009 00000C40 4800480048004800        	dw	72,72,72,72
  2010 00000C48 4900490049004900        	dw	73,73,73,73
  2011 00000C50 4A004A004A004A00        	dw	74,74,74,74
  2012 00000C58 4B004B004B004B00        	dw	75,75,75,75
  2013 00000C60 4C004C004C004C00        	dw	76,76,76,76
  2014 00000C68 4D004D004D004D00        	dw	77,77,77,77
  2015 00000C70 4E004E004E004E00        	dw	78,78,78,78
  2016 00000C78 4F004F004F004F00        	dw	79,79,79,79
  2017                                  
  2018 00000C80 FC30FCFCCCFCFCFCFC-     Hex0	db 11111100b,00110000b,11111100b,11111100b,11001100b,11111100b,11111100b,11111100b,11111100b,11111100b,11111100b,11111100b,11111100b,11110000b,11111100b,11111100b
  2018 00000C89 FCFCFCFCF0FCFC     
  2019 00000C90 CCF00C0CCCC0C00CCC-     Hex1	db 11001100b,11110000b,00001100b,00001100b,11001100b,11000000b,11000000b,00001100b,11001100b,11001100b,11001100b,11001100b,11000000b,11001100b,11000000b,11000000b
  2019 00000C99 CCCCCCC0CCC0C0     
  2020 00000CA0 CC30FCFCFCFCFC0CFC-     Hex2	db 11001100b,00110000b,11111100b,11111100b,11111100b,11111100b,11111100b,00001100b,11111100b,11111100b,11111100b,11110000b,11000000b,11001100b,11111100b,11111100b
  2020 00000CA9 FCFCF0C0CCFCFC     
  2021 00000CB0 CC30C00C0C0CCC0CCC-     Hex3	db 11001100b,00110000b,11000000b,00001100b,00001100b,00001100b,11001100b,00001100b,11001100b,00001100b,11001100b,11001100b,11000000b,11001100b,11000000b,11000000b
  2021 00000CB9 0CCCCCC0CCC0C0     
  2022 00000CC0 FCFCFCFC0CFCFC0CFC-     Hex4	db 11111100b,11111100b,11111100b,11111100b,00001100b,11111100b,11111100b,00001100b,11111100b,11111100b,11001100b,11111100b,11111100b,11110000b,11111100b,11000000b
  2022 00000CC9 FCCCFCFCF0FCC0     
  2023                                   
  2024                                  ObjectPoints00:
  2025 00000CD0 E2FFE2FFE2FF            	dw	-30,-30,-30 		;+150
  2026 00000CD6 E2FFE2FF1E00            	dw	-30,-30,+30		;+150
  2027 00000CDC E2FF1E00E2FF            	dw	-30,+30,-30		;+150
  2028 00000CE2 E2FF1E001E00            	dw	-30,+30,+30		;+150
  2029 00000CE8 1E00E2FFE2FF            	dw	+30,-30,-30 		;+150
  2030 00000CEE 1E00E2FF1E00            	dw	+30,-30,+30 		;+150
  2031 00000CF4 1E001E00E2FF            	dw	+30,+30,-30		;+150
  2032 00000CFA 1E001E001E00            	dw	+30,+30,+30		;+150
  2033                                  
  2034 00000D00 D4FED4FED4FE            	dw	-300,-300,-300 		;+150
  2035 00000D06 D4FED4FE2C01            	dw	-300,-300,+300		;+150
  2036 00000D0C D4FE2C01D4FE            	dw	-300,+300,-300		;+150
  2037 00000D12 D4FE2C012C01            	dw	-300,+300,+300		;+150
  2038 00000D18 2C01D4FED4FE            	dw	+300,-300,-300 		;+150
  2039 00000D1E 2C01D4FE2C01            	dw	+300,-300,+300 		;+150
  2040 00000D24 2C012C01D4FE            	dw	+300,+300,-300		;+150
  2041 00000D2A 2C012C012C01            	dw	+300,+300,+300		;+150
  2042                                  
  2043 00000D30 48F460F078EC            	dw	-3000,-4000,-5000 ;+150
  2044 00000D36 48F460F08813            	dw	-3000,-4000,+5000 ;+150
  2045 00000D3C 48F4A00F78EC            	dw	-3000,+4000,-5000 ;+150
  2046 00000D42 48F4A00F8813            	dw	-3000,+4000,+5000 ;+150
  2047 00000D48 B80B60F078EC            	dw	+3000,-4000,-5000 ;+150
  2048 00000D4E B80B60F08813            	dw	+3000,-4000,+5000 ;+150
  2049 00000D54 B80BA00F78EC            	dw	+3000,+4000,-5000;+150
  2050 00000D5A B80BA00F8813            	dw	+3000,+4000,+5000 ;+150
  2051                                  	
  2052                                  ObjectLines00:
  2053 00000D60 0001                    	db	0,1
  2054 00000D62 0103                    	db	1,3
  2055 00000D64 0302                    	db	3,2
  2056 00000D66 0200                    	db	2,0
  2057 00000D68 0405                    	db	4,5
  2058 00000D6A 0507                    	db	5,7
  2059 00000D6C 0706                    	db	7,6
  2060 00000D6E 0604                    	db	6,4
  2061 00000D70 0004                    	db	0,4
  2062 00000D72 0105                    	db	1,5
  2063 00000D74 0206                    	db	2,6
  2064 00000D76 0307                    	db	3,7
  2065                                  
  2066 00000D78 C800                    HOffset:	dw	200
  2067 00000D7A C800                    VOffset:	dw	200
  2068                                  
  2069 00000D7C 0CFE                    XOffset:	dw	-500
  2070 00000D7E 0CFE                    YOffset:	dw	-500
  2071 00000D80 C800                    ZOffset:	dw	200 ; 2500	
  2072                                  
  2073                                  pershtab8:
  2074 00000D82 9F                       db 159
  2075 00000D83 9F                       db 159
  2076 00000D84 9F                       db 159
  2077 00000D85 9F                       db 159
  2078 00000D86 9E                       db 158
  2079 00000D87 9E                       db 158
  2080 00000D88 9E                       db 158
  2081 00000D89 9E                       db 158
  2082 00000D8A 9E                       db 158
  2083 00000D8B 9D                       db 157
  2084 00000D8C 9D                       db 157
  2085 00000D8D 9D                       db 157
  2086 00000D8E 9D                       db 157
  2087 00000D8F 9C                       db 156
  2088 00000D90 9C                       db 156
  2089 00000D91 9C                       db 156
  2090 00000D92 9C                       db 156
  2091 00000D93 9C                       db 156
  2092 00000D94 9B                       db 155
  2093 00000D95 9B                       db 155
  2094 00000D96 9B                       db 155
  2095 00000D97 9B                       db 155
  2096 00000D98 9B                       db 155
  2097 00000D99 9A                       db 154
  2098 00000D9A 9A                       db 154
  2099 00000D9B 9A                       db 154
  2100 00000D9C 9A                       db 154
  2101 00000D9D 99                       db 153
  2102 00000D9E 99                       db 153
  2103 00000D9F 99                       db 153
  2104 00000DA0 99                       db 153
  2105 00000DA1 99                       db 153
  2106 00000DA2 98                       db 152
  2107 00000DA3 98                       db 152
  2108 00000DA4 98                       db 152
  2109 00000DA5 98                       db 152
  2110 00000DA6 98                       db 152
  2111 00000DA7 97                       db 151
  2112 00000DA8 97                       db 151
  2113 00000DA9 97                       db 151
  2114 00000DAA 97                       db 151
  2115 00000DAB 96                       db 150
  2116 00000DAC 96                       db 150
  2117 00000DAD 96                       db 150
  2118 00000DAE 96                       db 150
  2119 00000DAF 96                       db 150
  2120 00000DB0 95                       db 149
  2121 00000DB1 95                       db 149
  2122 00000DB2 95                       db 149
  2123 00000DB3 95                       db 149
  2124 00000DB4 95                       db 149
  2125 00000DB5 94                       db 148
  2126 00000DB6 94                       db 148
  2127 00000DB7 94                       db 148
  2128 00000DB8 94                       db 148
  2129 00000DB9 93                       db 147
  2130 00000DBA 93                       db 147
  2131 00000DBB 93                       db 147
  2132 00000DBC 93                       db 147
  2133 00000DBD 93                       db 147
  2134 00000DBE 92                       db 146
  2135 00000DBF 92                       db 146
  2136 00000DC0 92                       db 146
  2137 00000DC1 92                       db 146
  2138 00000DC2 92                       db 146
  2139 00000DC3 91                       db 145
  2140 00000DC4 91                       db 145
  2141 00000DC5 91                       db 145
  2142 00000DC6 91                       db 145
  2143 00000DC7 90                       db 144
  2144 00000DC8 90                       db 144
  2145 00000DC9 90                       db 144
  2146 00000DCA 90                       db 144
  2147 00000DCB 90                       db 144
  2148 00000DCC 8F                       db 143
  2149 00000DCD 8F                       db 143
  2150 00000DCE 8F                       db 143
  2151 00000DCF 8F                       db 143
  2152 00000DD0 8F                       db 143
  2153 00000DD1 8E                       db 142
  2154 00000DD2 8E                       db 142
  2155 00000DD3 8E                       db 142
  2156 00000DD4 8E                       db 142
  2157 00000DD5 8D                       db 141
  2158 00000DD6 8D                       db 141
  2159 00000DD7 8D                       db 141
  2160 00000DD8 8D                       db 141
  2161 00000DD9 8D                       db 141
  2162 00000DDA 8C                       db 140
  2163 00000DDB 8C                       db 140
  2164 00000DDC 8C                       db 140
  2165 00000DDD 8C                       db 140
  2166 00000DDE 8C                       db 140
  2167 00000DDF 8B                       db 139
  2168 00000DE0 8B                       db 139
  2169 00000DE1 8B                       db 139
  2170 00000DE2 8B                       db 139
  2171 00000DE3 8A                       db 138
  2172 00000DE4 8A                       db 138
  2173 00000DE5 8A                       db 138
  2174 00000DE6 8A                       db 138
  2175 00000DE7 8A                       db 138
  2176 00000DE8 89                       db 137
  2177 00000DE9 89                       db 137
  2178 00000DEA 89                       db 137
  2179 00000DEB 89                       db 137
  2180 00000DEC 89                       db 137
  2181 00000DED 88                       db 136
  2182 00000DEE 88                       db 136
  2183 00000DEF 88                       db 136
  2184 00000DF0 88                       db 136
  2185 00000DF1 87                       db 135
  2186 00000DF2 87                       db 135
  2187 00000DF3 87                       db 135
  2188 00000DF4 87                       db 135
  2189 00000DF5 87                       db 135
  2190 00000DF6 86                       db 134
  2191 00000DF7 86                       db 134
  2192 00000DF8 86                       db 134
  2193 00000DF9 86                       db 134
  2194 00000DFA 86                       db 134
  2195 00000DFB 85                       db 133
  2196 00000DFC 85                       db 133
  2197 00000DFD 85                       db 133
  2198 00000DFE 85                       db 133
  2199 00000DFF 84                       db 132
  2200 00000E00 84                       db 132
  2201 00000E01 84                       db 132
  2202 00000E02 84                       db 132
  2203 00000E03 84                       db 132
  2204 00000E04 83                       db 131
  2205 00000E05 83                       db 131
  2206 00000E06 83                       db 131
  2207 00000E07 83                       db 131
  2208 00000E08 82                       db 130
  2209 00000E09 82                       db 130
  2210 00000E0A 82                       db 130
  2211 00000E0B 82                       db 130
  2212 00000E0C 82                       db 130
  2213 00000E0D 81                       db 129
  2214 00000E0E 81                       db 129
  2215 00000E0F 81                       db 129
  2216 00000E10 81                       db 129
  2217 00000E11 81                       db 129
  2218 00000E12 80                       db 128
  2219 00000E13 80                       db 128
  2220 00000E14 80                       db 128
  2221 00000E15 80                       db 128
  2222 00000E16 7F                       db 127
  2223 00000E17 7F                       db 127
  2224 00000E18 7F                       db 127
  2225 00000E19 7F                       db 127
  2226 00000E1A 7F                       db 127
  2227 00000E1B 7E                       db 126
  2228 00000E1C 7E                       db 126
  2229 00000E1D 7E                       db 126
  2230 00000E1E 7E                       db 126
  2231 00000E1F 7E                       db 126
  2232 00000E20 7D                       db 125
  2233 00000E21 7D                       db 125
  2234 00000E22 7D                       db 125
  2235 00000E23 7D                       db 125
  2236 00000E24 7C                       db 124
  2237 00000E25 7C                       db 124
  2238 00000E26 7C                       db 124
  2239 00000E27 7C                       db 124
  2240 00000E28 7C                       db 124
  2241 00000E29 7B                       db 123
  2242 00000E2A 7B                       db 123
  2243 00000E2B 7B                       db 123
  2244 00000E2C 7B                       db 123
  2245 00000E2D 7B                       db 123
  2246 00000E2E 7A                       db 122
  2247 00000E2F 7A                       db 122
  2248 00000E30 7A                       db 122
  2249 00000E31 7A                       db 122
  2250 00000E32 79                       db 121
  2251 00000E33 79                       db 121
  2252 00000E34 79                       db 121
  2253 00000E35 79                       db 121
  2254 00000E36 79                       db 121
  2255 00000E37 78                       db 120
  2256 00000E38 78                       db 120
  2257 00000E39 78                       db 120
  2258 00000E3A 78                       db 120
  2259 00000E3B 78                       db 120
  2260 00000E3C 77                       db 119
  2261 00000E3D 77                       db 119
  2262 00000E3E 77                       db 119
  2263 00000E3F 77                       db 119
  2264 00000E40 76                       db 118
  2265 00000E41 76                       db 118
  2266 00000E42 76                       db 118
  2267 00000E43 76                       db 118
  2268 00000E44 76                       db 118
  2269 00000E45 75                       db 117
  2270 00000E46 75                       db 117
  2271 00000E47 75                       db 117
  2272 00000E48 75                       db 117
  2273 00000E49 75                       db 117
  2274 00000E4A 74                       db 116
  2275 00000E4B 74                       db 116
  2276 00000E4C 74                       db 116
  2277 00000E4D 74                       db 116
  2278 00000E4E 73                       db 115
  2279 00000E4F 73                       db 115
  2280 00000E50 73                       db 115
  2281 00000E51 73                       db 115
  2282 00000E52 73                       db 115
  2283 00000E53 72                       db 114
  2284 00000E54 72                       db 114
  2285 00000E55 72                       db 114
  2286 00000E56 72                       db 114
  2287 00000E57 72                       db 114
  2288 00000E58 71                       db 113
  2289 00000E59 71                       db 113
  2290 00000E5A 71                       db 113
  2291 00000E5B 71                       db 113
  2292 00000E5C 70                       db 112
  2293 00000E5D 70                       db 112
  2294 00000E5E 70                       db 112
  2295 00000E5F 70                       db 112
  2296 00000E60 70                       db 112
  2297 00000E61 6F                       db 111
  2298 00000E62 6F                       db 111
  2299 00000E63 6F                       db 111
  2300 00000E64 6F                       db 111
  2301 00000E65 6F                       db 111
  2302 00000E66 6E                       db 110
  2303 00000E67 6E                       db 110
  2304 00000E68 6E                       db 110
  2305 00000E69 6E                       db 110
  2306 00000E6A 6D                       db 109
  2307 00000E6B 6D                       db 109
  2308 00000E6C 6D                       db 109
  2309 00000E6D 6D                       db 109
  2310 00000E6E 6D                       db 109
  2311 00000E6F 6C                       db 108
  2312 00000E70 6C                       db 108
  2313 00000E71 6C                       db 108
  2314 00000E72 6C                       db 108
  2315 00000E73 6C                       db 108
  2316 00000E74 6B                       db 107
  2317 00000E75 6B                       db 107
  2318 00000E76 6B                       db 107
  2319 00000E77 6B                       db 107
  2320 00000E78 6A                       db 106
  2321 00000E79 6A                       db 106
  2322 00000E7A 6A                       db 106
  2323 00000E7B 6A                       db 106
  2324 00000E7C 6A                       db 106
  2325 00000E7D 69                       db 105
  2326 00000E7E 69                       db 105
  2327 00000E7F 69                       db 105
  2328 00000E80 69                       db 105
  2329 00000E81 69                       db 105
  2330                                  
  2331                                  persvtab8:
  2332 00000E82 C7                       db 199
  2333 00000E83 C7                       db 199
  2334 00000E84 C7                       db 199
  2335 00000E85 C6                       db 198
  2336 00000E86 C6                       db 198
  2337 00000E87 C6                       db 198
  2338 00000E88 C6                       db 198
  2339 00000E89 C5                       db 197
  2340 00000E8A C5                       db 197
  2341 00000E8B C5                       db 197
  2342 00000E8C C5                       db 197
  2343 00000E8D C4                       db 196
  2344 00000E8E C4                       db 196
  2345 00000E8F C4                       db 196
  2346 00000E90 C3                       db 195
  2347 00000E91 C3                       db 195
  2348 00000E92 C3                       db 195
  2349 00000E93 C3                       db 195
  2350 00000E94 C2                       db 194
  2351 00000E95 C2                       db 194
  2352 00000E96 C2                       db 194
  2353 00000E97 C2                       db 194
  2354 00000E98 C1                       db 193
  2355 00000E99 C1                       db 193
  2356 00000E9A C1                       db 193
  2357 00000E9B C0                       db 192
  2358 00000E9C C0                       db 192
  2359 00000E9D C0                       db 192
  2360 00000E9E C0                       db 192
  2361 00000E9F BF                       db 191
  2362 00000EA0 BF                       db 191
  2363 00000EA1 BF                       db 191
  2364 00000EA2 BF                       db 191
  2365 00000EA3 BE                       db 190
  2366 00000EA4 BE                       db 190
  2367 00000EA5 BE                       db 190
  2368 00000EA6 BE                       db 190
  2369 00000EA7 BD                       db 189
  2370 00000EA8 BD                       db 189
  2371 00000EA9 BD                       db 189
  2372 00000EAA BC                       db 188
  2373 00000EAB BC                       db 188
  2374 00000EAC BC                       db 188
  2375 00000EAD BC                       db 188
  2376 00000EAE BB                       db 187
  2377 00000EAF BB                       db 187
  2378 00000EB0 BB                       db 187
  2379 00000EB1 BB                       db 187
  2380 00000EB2 BA                       db 186
  2381 00000EB3 BA                       db 186
  2382 00000EB4 BA                       db 186
  2383 00000EB5 B9                       db 185
  2384 00000EB6 B9                       db 185
  2385 00000EB7 B9                       db 185
  2386 00000EB8 B9                       db 185
  2387 00000EB9 B8                       db 184
  2388 00000EBA B8                       db 184
  2389 00000EBB B8                       db 184
  2390 00000EBC B8                       db 184
  2391 00000EBD B7                       db 183
  2392 00000EBE B7                       db 183
  2393 00000EBF B7                       db 183
  2394 00000EC0 B7                       db 183
  2395 00000EC1 B6                       db 182
  2396 00000EC2 B6                       db 182
  2397 00000EC3 B6                       db 182
  2398 00000EC4 B5                       db 181
  2399 00000EC5 B5                       db 181
  2400 00000EC6 B5                       db 181
  2401 00000EC7 B5                       db 181
  2402 00000EC8 B4                       db 180
  2403 00000EC9 B4                       db 180
  2404 00000ECA B4                       db 180
  2405 00000ECB B4                       db 180
  2406 00000ECC B3                       db 179
  2407 00000ECD B3                       db 179
  2408 00000ECE B3                       db 179
  2409 00000ECF B2                       db 178
  2410 00000ED0 B2                       db 178
  2411 00000ED1 B2                       db 178
  2412 00000ED2 B2                       db 178
  2413 00000ED3 B1                       db 177
  2414 00000ED4 B1                       db 177
  2415 00000ED5 B1                       db 177
  2416 00000ED6 B1                       db 177
  2417 00000ED7 B0                       db 176
  2418 00000ED8 B0                       db 176
  2419 00000ED9 B0                       db 176
  2420 00000EDA B0                       db 176
  2421 00000EDB AF                       db 175
  2422 00000EDC AF                       db 175
  2423 00000EDD AF                       db 175
  2424 00000EDE AE                       db 174
  2425 00000EDF AE                       db 174
  2426 00000EE0 AE                       db 174
  2427 00000EE1 AE                       db 174
  2428 00000EE2 AD                       db 173
  2429 00000EE3 AD                       db 173
  2430 00000EE4 AD                       db 173
  2431 00000EE5 AD                       db 173
  2432 00000EE6 AC                       db 172
  2433 00000EE7 AC                       db 172
  2434 00000EE8 AC                       db 172
  2435 00000EE9 AB                       db 171
  2436 00000EEA AB                       db 171
  2437 00000EEB AB                       db 171
  2438 00000EEC AB                       db 171
  2439 00000EED AA                       db 170
  2440 00000EEE AA                       db 170
  2441 00000EEF AA                       db 170
  2442 00000EF0 AA                       db 170
  2443 00000EF1 A9                       db 169
  2444 00000EF2 A9                       db 169
  2445 00000EF3 A9                       db 169
  2446 00000EF4 A9                       db 169
  2447 00000EF5 A8                       db 168
  2448 00000EF6 A8                       db 168
  2449 00000EF7 A8                       db 168
  2450 00000EF8 A7                       db 167
  2451 00000EF9 A7                       db 167
  2452 00000EFA A7                       db 167
  2453 00000EFB A7                       db 167
  2454 00000EFC A6                       db 166
  2455 00000EFD A6                       db 166
  2456 00000EFE A6                       db 166
  2457 00000EFF A6                       db 166
  2458 00000F00 A5                       db 165
  2459 00000F01 A5                       db 165
  2460 00000F02 A5                       db 165
  2461 00000F03 A4                       db 164
  2462 00000F04 A4                       db 164
  2463 00000F05 A4                       db 164
  2464 00000F06 A4                       db 164
  2465 00000F07 A3                       db 163
  2466 00000F08 A3                       db 163
  2467 00000F09 A3                       db 163
  2468 00000F0A A3                       db 163
  2469 00000F0B A2                       db 162
  2470 00000F0C A2                       db 162
  2471 00000F0D A2                       db 162
  2472 00000F0E A1                       db 161
  2473 00000F0F A1                       db 161
  2474 00000F10 A1                       db 161
  2475 00000F11 A1                       db 161
  2476 00000F12 A0                       db 160
  2477 00000F13 A0                       db 160
  2478 00000F14 A0                       db 160
  2479 00000F15 A0                       db 160
  2480 00000F16 9F                       db 159
  2481 00000F17 9F                       db 159
  2482 00000F18 9F                       db 159
  2483 00000F19 9F                       db 159
  2484 00000F1A 9E                       db 158
  2485 00000F1B 9E                       db 158
  2486 00000F1C 9E                       db 158
  2487 00000F1D 9D                       db 157
  2488 00000F1E 9D                       db 157
  2489 00000F1F 9D                       db 157
  2490 00000F20 9D                       db 157
  2491 00000F21 9C                       db 156
  2492 00000F22 9C                       db 156
  2493 00000F23 9C                       db 156
  2494 00000F24 9C                       db 156
  2495 00000F25 9B                       db 155
  2496 00000F26 9B                       db 155
  2497 00000F27 9B                       db 155
  2498 00000F28 9A                       db 154
  2499 00000F29 9A                       db 154
  2500 00000F2A 9A                       db 154
  2501 00000F2B 9A                       db 154
  2502 00000F2C 99                       db 153
  2503 00000F2D 99                       db 153
  2504 00000F2E 99                       db 153
  2505 00000F2F 99                       db 153
  2506 00000F30 98                       db 152
  2507 00000F31 98                       db 152
  2508 00000F32 98                       db 152
  2509 00000F33 98                       db 152
  2510 00000F34 97                       db 151
  2511 00000F35 97                       db 151
  2512 00000F36 97                       db 151
  2513 00000F37 96                       db 150
  2514 00000F38 96                       db 150
  2515 00000F39 96                       db 150
  2516 00000F3A 96                       db 150
  2517 00000F3B 95                       db 149
  2518 00000F3C 95                       db 149
  2519 00000F3D 95                       db 149
  2520 00000F3E 95                       db 149
  2521 00000F3F 94                       db 148
  2522 00000F40 94                       db 148
  2523 00000F41 94                       db 148
  2524 00000F42 93                       db 147
  2525 00000F43 93                       db 147
  2526 00000F44 93                       db 147
  2527 00000F45 93                       db 147
  2528 00000F46 92                       db 146
  2529 00000F47 92                       db 146
  2530 00000F48 92                       db 146
  2531 00000F49 92                       db 146
  2532 00000F4A 91                       db 145
  2533 00000F4B 91                       db 145
  2534 00000F4C 91                       db 145
  2535 00000F4D 91                       db 145
  2536 00000F4E 90                       db 144
  2537 00000F4F 90                       db 144
  2538 00000F50 90                       db 144
  2539 00000F51 8F                       db 143
  2540 00000F52 8F                       db 143
  2541 00000F53 8F                       db 143
  2542 00000F54 8F                       db 143
  2543 00000F55 8E                       db 142
  2544 00000F56 8E                       db 142
  2545 00000F57 8E                       db 142
  2546 00000F58 8E                       db 142
  2547 00000F59 8D                       db 141
  2548 00000F5A 8D                       db 141
  2549 00000F5B 8D                       db 141
  2550 00000F5C 8C                       db 140
  2551 00000F5D 8C                       db 140
  2552 00000F5E 8C                       db 140
  2553 00000F5F 8C                       db 140
  2554 00000F60 8B                       db 139
  2555 00000F61 8B                       db 139
  2556 00000F62 8B                       db 139
  2557 00000F63 8B                       db 139
  2558 00000F64 8A                       db 138
  2559 00000F65 8A                       db 138
  2560 00000F66 8A                       db 138
  2561 00000F67 8A                       db 138
  2562 00000F68 89                       db 137
  2563 00000F69 89                       db 137
  2564 00000F6A 89                       db 137
  2565 00000F6B 88                       db 136
  2566 00000F6C 88                       db 136
  2567 00000F6D 88                       db 136
  2568 00000F6E 88                       db 136
  2569 00000F6F 87                       db 135
  2570 00000F70 87                       db 135
  2571 00000F71 87                       db 135
  2572 00000F72 87                       db 135
  2573 00000F73 86                       db 134
  2574 00000F74 86                       db 134
  2575 00000F75 86                       db 134
  2576 00000F76 85                       db 133
  2577 00000F77 85                       db 133
  2578 00000F78 85                       db 133
  2579 00000F79 85                       db 133
  2580 00000F7A 84                       db 132
  2581 00000F7B 84                       db 132
  2582 00000F7C 84                       db 132
  2583 00000F7D 84                       db 132
  2584 00000F7E 83                       db 131
  2585 00000F7F 83                       db 131
  2586 00000F80 83                       db 131
  2587 00000F81 83                       db 131
  2588                                  
  2589 00000F82 0000                    testx dw 0
  2590 00000F84 0000                    testy dw 0
  2591 00000F86 0000                    testz dw 0
  2592                                  	
  2593                                  %include  'sin256.inc'
     1                              <1> sintab:
     2 00000F88 000001020303040506- <1>  db     0,    0,    1,    2,    3,    3,    4,    5,    6,    7,    7,    8,    9,   10,   10,   11 ; 16
     2 00000F91 070708090A0A0B      <1>
     3 00000F98 0C0D0E0E0F10111112- <1>  db    12,   13,   14,   14,   15,   16,   17,   17,   18,   19,   20,   21,   21,   22,   23,   24 ; 32
     3 00000FA1 13141515161718      <1>
     4 00000FA8 18191A1B1B1C1D1E1E- <1>  db    24,   25,   26,   27,   27,   28,   29,   30,   30,   31,   32,   33,   34,   34,   35,   36 ; 48
     4 00000FB1 1F202122222324      <1>
     5 00000FB8 252526272828292A2A- <1>  db    37,   37,   38,   39,   40,   40,   41,   42,   42,   43,   44,   45,   45,   46,   47,   48 ; 64
     5 00000FC1 2B2C2D2D2E2F30      <1>
     6 00000FC8 303132323334353536- <1>  db    48,   49,   50,   50,   51,   52,   53,   53,   54,   55,   55,   56,   57,   58,   58,   59 ; 80
     6 00000FD1 373738393A3A3B      <1>
     7 00000FD8 3C3C3D3E3E3F404041- <1>  db    60,   60,   61,   62,   62,   63,   64,   64,   65,   66,   66,   67,   68,   68,   69,   70 ; 96
     7 00000FE1 42424344444546      <1>
     8 00000FE8 46474848494A4A4B4B- <1>  db    70,   71,   72,   72,   73,   74,   74,   75,   75,   76,   77,   77,   78,   79,   79,   80 ; 112
     8 00000FF1 4C4D4D4E4F4F50      <1>
     9 00000FF8 505152525353545555- <1>  db    80,   81,   82,   82,   83,   83,   84,   85,   85,   86,   86,   87,   87,   88,   89,   89 ; 128
     9 00001001 56565757585959      <1>
    10 00001008 5A5A5B5B5C5C5D5D5E- <1>  db    90,   90,   91,   91,   92,   92,   93,   93,   94,   95,   95,   96,   96,   97,   97,   98 ; 144
    10 00001011 5F5F6060616162      <1>
    11 00001018 626363646465656566- <1>  db    98,   99,   99,  100,  100,  101,  101,  101,  102,  102,  103,  103,  104,  104,  105,  105 ; 160
    11 00001021 66676768686969      <1>
    12 00001028 6A6A6A6B6B6C6C6C6D- <1>  db   106,  106,  106,  107,  107,  108,  108,  108,  109,  109,  110,  110,  110,  111,  111,  112 ; 176
    12 00001031 6D6E6E6E6F6F70      <1>
    13 00001038 707071717172727273- <1>  db   112,  112,  113,  113,  113,  114,  114,  114,  115,  115,  115,  116,  116,  116,  117,  117 ; 192
    13 00001041 73737474747575      <1>
    14 00001048 757676767677777778- <1>  db   117,  118,  118,  118,  118,  119,  119,  119,  120,  120,  120,  120,  121,  121,  121,  121 ; 208
    14 00001051 78787879797979      <1>
    15 00001058 7A7A7A7A7A7B7B7B7B- <1>  db   122,  122,  122,  122,  122,  123,  123,  123,  123,  123,  124,  124,  124,  124,  124,  124 ; 224
    15 00001061 7B7C7C7C7C7C7C      <1>
    16 00001068 7D7D7D7D7D7D7D7E7E- <1>  db   125,  125,  125,  125,  125,  125,  125,  126,  126,  126,  126,  126,  126,  126,  126,  126 ; 240
    16 00001071 7E7E7E7E7E7E7E      <1>
    17 00001078 7E7E7F7F7F7F7F7F7F- <1>  db   126,  126,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127 ; 256
    17 00001081 7F7F7F7F7F7F7F      <1>
    18                              <1> 
    19 00001088 7F7F7F7F7F7F7F7F7F- <1>  db   127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  127,  126,  126 ; 272
    19 00001091 7F7F7F7F7F7E7E      <1>
    20 00001098 7E7E7E7E7E7E7E7E7E- <1>  db   126,  126,  126,  126,  126,  126,  126,  126,  126,  125,  125,  125,  125,  125,  125,  125 ; 288
    20 000010A1 7D7D7D7D7D7D7D      <1>
    21 000010A8 7C7C7C7C7C7C7B7B7B- <1>  db   124,  124,  124,  124,  124,  124,  123,  123,  123,  123,  123,  122,  122,  122,  122,  122 ; 304
    21 000010B1 7B7B7A7A7A7A7A      <1>
    22 000010B8 797979797878787877- <1>  db   121,  121,  121,  121,  120,  120,  120,  120,  119,  119,  119,  118,  118,  118,  118,  117 ; 320
    22 000010C1 77777676767675      <1>
    23 000010C8 757574747473737372- <1>  db   117,  117,  116,  116,  116,  115,  115,  115,  114,  114,  114,  113,  113,  113,  112,  112 ; 336
    23 000010D1 72727171717070      <1>
    24 000010D8 706F6F6E6E6E6D6D6C- <1>  db   112,  111,  111,  110,  110,  110,  109,  109,  108,  108,  108,  107,  107,  106,  106,  106 ; 352
    24 000010E1 6C6C6B6B6A6A6A      <1>
    25 000010E8 696968686767666665- <1>  db   105,  105,  104,  104,  103,  103,  102,  102,  101,  101,  101,  100,  100,   99,   99,   98 ; 368
    25 000010F1 65656464636362      <1>
    26 000010F8 62616160605F5F5E5D- <1>  db    98,   97,   97,   96,   96,   95,   95,   94,   93,   93,   92,   92,   91,   91,   90,   90 ; 384
    26 00001101 5D5C5C5B5B5A5A      <1>
    27 00001108 595958575756565555- <1>  db    89,   89,   88,   87,   87,   86,   86,   85,   85,   84,   83,   83,   82,   82,   81,   80 ; 400
    27 00001111 54535352525150      <1>
    28 00001118 504F4F4E4D4D4C4B4B- <1>  db    80,   79,   79,   78,   77,   77,   76,   75,   75,   74,   74,   73,   72,   72,   71,   70 ; 416
    28 00001121 4A4A4948484746      <1>
    29 00001128 464544444342424140- <1>  db    70,   69,   68,   68,   67,   66,   66,   65,   64,   64,   63,   62,   62,   61,   60,   60 ; 432
    29 00001131 403F3E3E3D3C3C      <1>
    30 00001138 3B3A3A393837373635- <1>  db    59,   58,   58,   57,   56,   55,   55,   54,   53,   53,   52,   51,   50,   50,   49,   48 ; 448
    30 00001141 35343332323130      <1>
    31 00001148 302F2E2D2D2C2B2A2A- <1>  db    48,   47,   46,   45,   45,   44,   43,   42,   42,   41,   40,   40,   39,   38,   37,   37 ; 464
    31 00001151 29282827262525      <1>
    32 00001158 2423222221201F1E1E- <1>  db    36,   35,   34,   34,   33,   32,   31,   30,   30,   29,   28,   27,   27,   26,   25,   24 ; 480
    32 00001161 1D1C1B1B1A1918      <1>
    33 00001168 181716151514131211- <1>  db    24,   23,   22,   21,   21,   20,   19,   18,   17,   17,   16,   15,   14,   14,   13,   12 ; 496
    33 00001171 11100F0E0E0D0C      <1>
    34 00001178 0B0A0A090807070605- <1>  db    11,   10,   10,    9,    8,    7,    7,    6,    5,    4,    3,    3,    2,    1,    0,    0 ; 512
    34 00001181 04030302010000      <1>
    35                              <1>  
    36 00001188 0000FFFEFDFDFCFBFA- <1>  db     0,    0,   -1,   -2,   -3,   -3,   -4,   -5,   -6,   -7,   -7,   -8,   -9,  -10,  -10,  -11 ; 528
    36 00001191 F9F9F8F7F6F6F5      <1>
    37 00001198 F4F3F2F2F1F0EFEFEE- <1>  db   -12,  -13,  -14,  -14,  -15,  -16,  -17,  -17,  -18,  -19,  -20,  -21,  -21,  -22,  -23,  -24 ; 544
    37 000011A1 EDECEBEBEAE9E8      <1>
    38 000011A8 E8E7E6E5E5E4E3E2E2- <1>  db   -24,  -25,  -26,  -27,  -27,  -28,  -29,  -30,  -30,  -31,  -32,  -33,  -34,  -34,  -35,  -36 ; 560
    38 000011B1 E1E0DFDEDEDDDC      <1>
    39 000011B8 DBDBDAD9D8D8D7D6D6- <1>  db   -37,  -37,  -38,  -39,  -40,  -40,  -41,  -42,  -42,  -43,  -44,  -45,  -45,  -46,  -47,  -48 ; 576
    39 000011C1 D5D4D3D3D2D1D0      <1>
    40 000011C8 D0CFCECECDCCCBCBCA- <1>  db   -48,  -49,  -50,  -50,  -51,  -52,  -53,  -53,  -54,  -55,  -55,  -56,  -57,  -58,  -58,  -59 ; 592
    40 000011D1 C9C9C8C7C6C6C5      <1>
    41 000011D8 C4C4C3C2C2C1C0C0BF- <1>  db   -60,  -60,  -61,  -62,  -62,  -63,  -64,  -64,  -65,  -66,  -66,  -67,  -68,  -68,  -69,  -70 ; 608
    41 000011E1 BEBEBDBCBCBBBA      <1>
    42 000011E8 BAB9B8B8B7B6B6B5B5- <1>  db   -70,  -71,  -72,  -72,  -73,  -74,  -74,  -75,  -75,  -76,  -77,  -77,  -78,  -79,  -79,  -80 ; 624
    42 000011F1 B4B3B3B2B1B1B0      <1>
    43 000011F8 B0AFAEAEADADACABAB- <1>  db   -80,  -81,  -82,  -82,  -83,  -83,  -84,  -85,  -85,  -86,  -86,  -87,  -87,  -88,  -89,  -89 ; 640
    43 00001201 AAAAA9A9A8A7A7      <1>
    44 00001208 A6A6A5A5A4A4A3A3A2- <1>  db   -90,  -90,  -91,  -91,  -92,  -92,  -93,  -93,  -94,  -95,  -95,  -96,  -96,  -97,  -97,  -98 ; 656
    44 00001211 A1A1A0A09F9F9E      <1>
    45 00001218 9E9D9D9C9C9B9B9B9A- <1>  db   -98,  -99,  -99, -100, -100, -101, -101, -101, -102, -102, -103, -103, -104, -104, -105, -105 ; 672
    45 00001221 9A999998989797      <1>
    46 00001228 969696959594949493- <1>  db  -106, -106, -106, -107, -107, -108, -108, -108, -109, -109, -110, -110, -110, -111, -111, -112 ; 688
    46 00001231 93929292919190      <1>
    47 00001238 90908F8F8F8E8E8E8D- <1>  db  -112, -112, -113, -113, -113, -114, -114, -114, -115, -115, -115, -116, -116, -116, -117, -117 ; 704
    47 00001241 8D8D8C8C8C8B8B      <1>
    48 00001248 8B8A8A8A8A89898988- <1>  db  -117, -118, -118, -118, -118, -119, -119, -119, -120, -120, -120, -120, -121, -121, -121, -121 ; 720
    48 00001251 88888887878787      <1>
    49 00001258 868686868685858585- <1>  db  -122, -122, -122, -122, -122, -123, -123, -123, -123, -123, -124, -124, -124, -124, -124, -124 ; 736
    49 00001261 85848484848484      <1>
    50 00001268 838383838383838282- <1>  db  -125, -125, -125, -125, -125, -125, -125, -126, -126, -126, -126, -126, -126, -126, -126, -126 ; 752
    50 00001271 82828282828282      <1>
    51 00001278 828281818181818181- <1>  db  -126, -126, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127 ; 768
    51 00001281 81818181818181      <1>
    52                              <1>  
    53 00001288 818181818181818181- <1>  db  -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -127, -126, -126 ; 784
    53 00001291 81818181818282      <1>
    54 00001298 828282828282828282- <1>  db  -126, -126, -126, -126, -126, -126, -126, -126, -126, -125, -125, -125, -125, -125, -125, -125 ; 800
    54 000012A1 83838383838383      <1>
    55 000012A8 848484848484858585- <1>  db  -124, -124, -124, -124, -124, -124, -123, -123, -123, -123, -123, -122, -122, -122, -122, -122 ; 816
    55 000012B1 85858686868686      <1>
    56 000012B8 878787878888888889- <1>  db  -121, -121, -121, -121, -120, -120, -120, -120, -119, -119, -119, -118, -118, -118, -118, -117 ; 832
    56 000012C1 89898A8A8A8A8B      <1>
    57 000012C8 8B8B8C8C8C8D8D8D8E- <1>  db  -117, -117, -116, -116, -116, -115, -115, -115, -114, -114, -114, -113, -113, -113, -112, -112 ; 848
    57 000012D1 8E8E8F8F8F9090      <1>
    58 000012D8 909191929292939394- <1>  db  -112, -111, -111, -110, -110, -110, -109, -109, -108, -108, -108, -107, -107, -106, -106, -106 ; 864
    58 000012E1 94949595969696      <1>
    59 000012E8 9797989899999A9A9B- <1>  db  -105, -105, -104, -104, -103, -103, -102, -102, -101, -101, -101, -100, -100,  -99,  -99,  -98 ; 880
    59 000012F1 9B9B9C9C9D9D9E      <1>
    60 000012F8 9E9F9FA0A0A1A1A2A3- <1>  db   -98,  -97,  -97,  -96,  -96,  -95,  -95,  -94,  -93,  -93,  -92,  -92,  -91,  -91,  -90,  -90 ; 896
    60 00001301 A3A4A4A5A5A6A6      <1>
    61 00001308 A7A7A8A9A9AAAAABAB- <1>  db   -89,  -89,  -88,  -87,  -87,  -86,  -86,  -85,  -85,  -84,  -83,  -83,  -82,  -82,  -81,  -80 ; 912
    61 00001311 ACADADAEAEAFB0      <1>
    62 00001318 B0B1B1B2B3B3B4B5B5- <1>  db   -80,  -79,  -79,  -78,  -77,  -77,  -76,  -75,  -75,  -74,  -74,  -73,  -72,  -72,  -71,  -70 ; 928
    62 00001321 B6B6B7B8B8B9BA      <1>
    63 00001328 BABBBCBCBDBEBEBFC0- <1>  db   -70,  -69,  -68,  -68,  -67,  -66,  -66,  -65,  -64,  -64,  -63,  -62,  -62,  -61,  -60,  -60 ; 944
    63 00001331 C0C1C2C2C3C4C4      <1>
    64 00001338 C5C6C6C7C8C9C9CACB- <1>  db   -59,  -58,  -58,  -57,  -56,  -55,  -55,  -54,  -53,  -53,  -52,  -51,  -50,  -50,  -49,  -48 ; 960
    64 00001341 CBCCCDCECECFD0      <1>
    65 00001348 D0D1D2D3D3D4D5D6D6- <1>  db   -48,  -47,  -46,  -45,  -45,  -44,  -43,  -42,  -42,  -41,  -40,  -40,  -39,  -38,  -37,  -37 ; 976
    65 00001351 D7D8D8D9DADBDB      <1>
    66 00001358 DCDDDEDEDFE0E1E2E2- <1>  db   -36,  -35,  -34,  -34,  -33,  -32,  -31,  -30,  -30,  -29,  -28,  -27,  -27,  -26,  -25,  -24 ; 992
    66 00001361 E3E4E5E5E6E7E8      <1>
    67 00001368 E8E9EAEBEBECEDEEEF- <1>  db   -24,  -23,  -22,  -21,  -21,  -20,  -19,  -18,  -17,  -17,  -16,  -15,  -14,  -14,  -13,  -12 ; 1008
    67 00001371 EFF0F1F2F2F3F4      <1>
    68 00001378 F5F6F6F7F8F9F9FAFB- <1>  db   -11,  -10,  -10,   -9,   -8,   -7,   -7,   -6,   -5,   -4,   -3,   -3,   -2,   -1,    0,    0 ; 1024
    68 00001381 FCFDFDFEFF0000      <1>
  2594                                  
  2595                                  section .bss 	; put uninitialized data here
  2596 00000000 <res 194h>              BackBufferTable: 	resw 202 	; 200 screen lines as words
  2597 00000194 <res 8000h>             BackBuffer: 		resw 16384	; 2 screen buffers
  2598                                  
  2599                                  
  2600                                  ObjectPointsResults:
  2601 00008194 <res 100h>              ObjectYPos:	resw	128 ; 128 words - xpos
  2602 00008294 <res 100h>              ObjectXPos:	resw	128 ; 128 words - ypos
  2603 00008394 <res 100h>              ObjectClipCode:	resw	128 ; 128 words - clip codes
  2604 00008494 <res 100h>              ObjectXRot:	resw	128 ; 128 words - x rotated points
  2605 00008594 <res 100h>              ObjectYRot:	resw	128 ; 128 words - y rotated points
  2606 00008694 <res 100h>              ObjectZRot:	resw	128 ; 128 words - z rotated points
  2607                                  
  2608 00008794 ????                    SinX:		resw	1
  2609 00008796 ????                    CosX:	resw	1
  2610 00008798 ????                    SinY:		resw	1
  2611 0000879A ????                    CosY:	resw	1
  2612 0000879C ????                    SinZ:		resw	1
  2613 0000879E ????                    CosZ:	resw	1
  2614                                  
  2615 000087A0 ????                    XST		resw	1
  2616 000087A2 ????                    YST		resw	1
  2617 000087A4 ????                    XEN		resw	1
  2618 000087A6 ????                    YEN		resw	1
  2619 000087A8 ??                      CCST	resb	1
  2620 000087A9 ??                      CCEN	resb	1
  2621                                  
  2622 000087AA ????                    XAngle:	resw	1
  2623 000087AC ????                    YAngle:	resw	1
  2624 000087AE ????                    ZAngle:	resw	1
  2625                                  
  2626 000087B0 ??                      Exit:	resb	1
  2627                                  
  2628 000087B1 ????                    STX:		resw	1
  2629 000087B3 ????                    STY:		resw	1
  2630 000087B5 ????                    STZ:		resw	1
  2631 000087B7 ????                    ENX:		resw	1
  2632 000087B9 ????                    ENY:		resw	1
  2633 000087BB ????                    ENZ:		resw	1
  2634                                  
  2635 000087BD ????                    Test0: 	resw	1
  2636 000087BF ????                    Test1: 	resw	1
  2637 000087C1 ????                    Test2: 	resw	1
  2638 000087C3 ????                    Test3: 	resw	1
  2639 000087C5 ????                    Test4: 	resw	1
  2640 000087C7 ????                    Test5: 	resw	1
  2641 000087C9 ????                    Test6: 	resw	1
  2642 000087CB ????                    Test7: 	resw	1
  2643 000087CD ????                    Test8: 	resw	1
  2644 000087CF ????                    Test9: 	resw	1
  2645                                  
  2646 000087D1 ????                    BackBufferSeg	resw	1	; pointer to the segment containing the back buffer
